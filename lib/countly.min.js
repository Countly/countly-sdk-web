(function(La,bb){"object"===typeof exports&&"undefined"!==typeof module?bb(exports):"function"===typeof define&&define.amd?define(["exports"],bb):(La="undefined"!==typeof globalThis?globalThis:La||self,bb(La.Countly=La.Countly||{}))})(this,function(La){function bb(n,q,v){if("function"==typeof n?n===q:n.has(q))return 3>arguments.length?q:v;throw new TypeError("Private element is not present on this object");}function b(n,q){return n.get(bb(n,q))}function p(n,q,v){if(q.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object");
q.set(n,v)}function k(n,q,v){return n.set(bb(n,q),v),v}function w(n,q,v){a:{var a=q;if("object"==typeof a&&a){var G=a[Symbol.toPrimitive];if(void 0!==G){a=G.call(a,"string");if("object"!=typeof a)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}}return(q="symbol"==typeof a?a:a+"")in n?Object.defineProperty(n,q,{value:v,enumerable:!0,configurable:!0,writable:!0}):n[q]=v,n}function T(n){"@babel/helpers - typeof";return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?
function(q){return typeof q}:function(q){return q&&"function"==typeof Symbol&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},T(n)}function Oc(n){var q=[];if("undefined"!==typeof n.options)for(var v=0;v<n.options.length;v++)n.options[v].selected&&q.push(n.options[v].value);return q.join(", ")}function oc(){var n=Pc("xxxxxxxx","[x]");var q=Date.now().toString();return n+q}function pc(){return Pc("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx","[xy]")}function Pc(n,q){var v=(new Date).getTime();
return n.replace(new RegExp(q,"g"),function(a){var G=(v+16*Math.random())%16|0;return("x"===a?G:G&3|8).toString(16)})}function I(){return Math.floor((new Date).getTime()/1E3)}function cb(){var n=(new Date).getTime();Ib>=n?Ib++:Ib=n;return Ib}function x(n,q,v){if(q&&Object.keys(q).length){if("undefined"!==typeof q[n])return q[n]}else if("undefined"!==typeof t[n])return t[n];return v}function qc(n,q,v){for(var a in t.i)t.i[a].tracking_crashes&&t.i[a].recordError(n,q,v)}function rc(n,q){for(var v=[],
a=Object.keys(n||{}).sort(),G=0;G<a.length;G++){var c=a[G];v.push(c+"="+encodeURIComponent(n[c]))}var d=v.join("&");return q?Qc(d,q).then(function(g){return d+="&checksum256="+g.toUpperCase()}):Promise.resolve(d)}function Ma(n){return"string"===typeof n&&"/"===n.substring(n.length-1)?n.substring(0,n.length-1):n}function rb(n,q){for(var v={},a,G=0,c=q.length;G<c;G++)a=q[G],"undefined"!==typeof n[a]&&(v[a]=n[a]);return v}function ua(n,q,v,a,G,c){var d={};if(n){if(Object.keys(n).length>a){var g={},h=
0,m;for(m in n)h<a&&(g[m]=n[m],h++);n=g}for(var l in n)a=C(l,q,G,c),g=C(n[l],v,G,c),d[a]=g}return d}function C(n,q,v,a){var G=n;"number"===typeof n&&(n=n.toString());"string"===typeof n&&n.length>q&&(G=n.substring(0,q),a(f.DEBUG,v+", Key: [ "+n+" ] is longer than accepted length. It will be truncated."));return G}function Qc(n,q){n=(new TextEncoder).encode(n+q);return crypto.subtle.digest("SHA-256",n).then(function(v){return Array.from(new Uint8Array(v)).map(function(a){return a.toString(16).padStart(2,
"0")}).join("").toUpperCase()})}function F(n,q,v){A&&(null===n||"undefined"===typeof n?Jb()&&console.warn("[WARNING] [Countly] add_event_listener, Can't bind ["+q+"] event to nonexisting element"):"undefined"!==typeof n.addEventListener?n.addEventListener(q,v,!1):n.attachEvent("on"+q,v))}function Kb(n){return n?"undefined"!==typeof n.target?n.target:n.srcElement:window.event.srcElement}function db(n){if(n)return n;(n=navigator.userAgent)||(n=sc());return n}function sc(n){if(n)return n;n="";navigator.userAgentData&&
(n=navigator.userAgentData.brands.map(function(q){return q.brand+":"+q.version}).join(),n+=navigator.userAgentData.mobile?" mobi ":" ",n+=navigator.userAgentData.platform);return n}function tc(n){if(!n){if(navigator.userAgentData&&navigator.userAgentData.mobile)return"phone";n=db()}n=n.toLowerCase();var q="desktop",v=/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/;/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(n)?
q="tablet":v.test(n)&&(q="phone");return q}function Rc(n){var q=/(CountlySiteBot|nuhk|Googlebot|GoogleSecurityScanner|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver|bingbot|Google Web Preview|Mediapartners-Google|AdsBot-Google|Baiduspider|Ezooms|YahooSeeker|AltaVista|AVSearch|Mercator|Scooter|InfoSeek|Ultraseek|Lycos|Wget|YandexBot|Yandex|YaDirectFetcher|SiteBot|Exabot|AhrefsBot|MJ12bot|TurnitinBot|magpie-crawler|Nutch Crawler|CMS Crawler|rogerbot|Domnutch|ssearch_bot|XoviBot|netseer|digincore|fr-crawler|wesee|AliasIO|contxbot|PingdomBot|BingPreview|HeadlessChrome|Lighthouse)/;
if(n)return q.test(n);n=q.test(db());q=q.test(sc());return n||q}function uc(n){"undefined"===typeof n.pageY&&"number"===typeof n.clientX&&document.documentElement&&(n.pageX=n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n.pageY=n.clientY+document.body.scrollTop+document.documentElement.scrollTop);return n}function Lb(){var n=document;return Math.max(Math.max(n.body.scrollHeight,n.documentElement.scrollHeight),Math.max(n.body.offsetHeight,n.documentElement.offsetHeight),Math.max(n.body.clientHeight,
n.documentElement.clientHeight))}function vc(){var n=document;return Math.max(Math.max(n.body.scrollWidth,n.documentElement.scrollWidth),Math.max(n.body.offsetWidth,n.documentElement.offsetWidth),Math.max(n.body.clientWidth,n.documentElement.clientWidth))}function Sc(){var n=document;return Math.min(Math.min(n.body.clientHeight,n.documentElement.clientHeight),Math.min(n.body.offsetHeight,n.documentElement.offsetHeight),window.innerHeight)}function Tc(n,q,v,a,G,c){n=document.createElement(n);var d;
n.setAttribute(q,v);n.setAttribute(a,G);q=function(){d||c();d=!0};c&&(n.onreadystatechange=q,n.onload=q);document.getElementsByTagName("head")[0].appendChild(n)}function Uc(n,q){Tc("script","type","text/javascript","src",n,q)}function Mb(n,q){Tc("link","rel","stylesheet","href",n,q)}function Vc(){if(A){var n=document.getElementById("cly-loader");if(!n){var q=document.head||document.getElementsByTagName("head")[0],v=document.createElement("style");v.type="text/css";v.styleSheet?v.styleSheet.cssText=
"#cly-loader {height: 4px; width: 100%; position: absolute; z-index: 99999; overflow: hidden; background-color: #fff; top:0px; left:0px;}#cly-loader:before{display: block; position: absolute; content: ''; left: -200px; width: 200px; height: 4px; background-color: #2EB52B; animation: cly-loading 2s linear infinite;}@keyframes cly-loading { from {left: -200px; width: 30%;} 50% {width: 30%;} 70% {width: 70%;} 80% { left: 50%;} 95% {left: 120%;} to {left: 100%;}}":v.appendChild(document.createTextNode("#cly-loader {height: 4px; width: 100%; position: absolute; z-index: 99999; overflow: hidden; background-color: #fff; top:0px; left:0px;}#cly-loader:before{display: block; position: absolute; content: ''; left: -200px; width: 200px; height: 4px; background-color: #2EB52B; animation: cly-loading 2s linear infinite;}@keyframes cly-loading { from {left: -200px; width: 30%;} 50% {width: 30%;} 70% {width: 70%;} 80% { left: 50%;} 95% {left: 120%;} to {left: 100%;}}"));
q.appendChild(v);n=document.createElement("div");n.setAttribute("id","cly-loader");window.addEventListener("load",function(){if(t.showLoaderProtection)Jb()&&console.warn("[WARNING] [Countly] showLoader, Loader is already on");else try{document.body.appendChild(n)}catch(a){Jb()&&console.error("[ERROR] [Countly] showLoader, Body is not loaded for loader to append: "+a)}})}n.style.display="block"}}function Jb(){return t&&t.debug&&"undefined"!==typeof console?!0:!1}function Wc(){if(A){t.showLoaderProtection=
!0;var n=document.getElementById("cly-loader");n&&(n.style.display="none")}}function ud(n){var q=document.createElement("script"),v=document.createElement("script");q.async=!0;v.async=!0;q.src=t.customSourceBoomerang||Xc.BOOMERANG_SRC;v.src=t.customSourceCountlyBoomerang||Xc.CLY_BOOMERANG_SRC;document.getElementsByTagName("head")[0].appendChild(q);document.getElementsByTagName("head")[0].appendChild(v);var a=!1,G=!1;q.onload=function(){a=!0};v.onload=function(){G=!0};var c=0,d=setInterval(function(){c+=
50;if(a&&G||1500<=c){if(t.debug){var g="BoomerangJS loaded:["+a+"], countly_boomerang loaded:["+G+"].";a&&G?console.log("[DEBUG] "+g):console.warn("[WARNING] "+g+" Initializing without APM.")}t.init(n);clearInterval(d)}},50)}var U={NPS:"[CLY]_nps",SURVEY:"[CLY]_survey",STAR_RATING:"[CLY]_star_rating",VIEW:"[CLY]_view",ORIENTATION:"[CLY]_orientation",ACTION:"[CLY]_action"},vd=Object.values(U),f={ERROR:"[ERROR] ",WARNING:"[WARNING] ",INFO:"[INFO] ",DEBUG:"[DEBUG] ",VERBOSE:"[VERBOSE] "},Xc={BOOMERANG_SRC:"https://cdn.jsdelivr.net/npm/countly-sdk-web@latest/plugin/boomerang/boomerang.min.js",
CLY_BOOMERANG_SRC:"https://cdn.jsdelivr.net/npm/countly-sdk-web@latest/plugin/boomerang/countly_boomerang.js"},S=Object.freeze({errorCount:"cly_hc_error_count",warningCount:"cly_hc_warning_count",statusCode:"cly_hc_status_code",errorMessage:"cly_hc_error_message",backoffCount:"cly_hc_backoff_count",consecutiveBackoffCount:"cly_hc_consecutive_backoff_count"}),Yc=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?::([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?::([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,
A="undefined"!==typeof window,t=globalThis.Countly||{},Ib=0,sb=new WeakMap,Zc=new WeakMap,eb=new WeakMap,fa=new WeakMap,tb=new WeakMap,Na=new WeakMap,fb=new WeakMap,L=new WeakMap,R=new WeakMap,Z=new WeakMap,va=new WeakMap,ja=new WeakMap,ka=new WeakMap,ub=new WeakMap,Oa=new WeakMap,oa=new WeakMap,vb=new WeakMap,ba=new WeakMap,Pa=new WeakMap,Qa=new WeakMap,wb=new WeakMap,gb=new WeakMap,Ra=new WeakMap,Fa=new WeakMap,pa=new WeakMap,Sa=new WeakMap,hb=new WeakMap,ib=new WeakMap,N=new WeakMap,la=new WeakMap,
wa=new WeakMap,Nb=new WeakMap,xa=new WeakMap,Ga=new WeakMap,J=new WeakMap,Ta=new WeakMap,Ua=new WeakMap,xb=new WeakMap,ya=new WeakMap,jb=new WeakMap,qa=new WeakMap,za=new WeakMap,ra=new WeakMap,yb=new WeakMap,M=new WeakMap,zb=new WeakMap,wc=new WeakMap,Va=new WeakMap,kb=new WeakMap,lb=new WeakMap,mb=new WeakMap,Aa=new WeakMap,Ob=new WeakMap,sa=new WeakMap,Ha=new WeakMap,Wa=new WeakMap,nb=new WeakMap,Pb=new WeakMap,ob=new WeakMap,pb=new WeakMap,Ab=new WeakMap,Bb=new WeakMap,Qb=new WeakMap,Rb=new WeakMap,
qb=new WeakMap,Xa=new WeakMap,Sb=new WeakMap,K=new WeakMap,H=new WeakMap,ca=new WeakMap,Ya=new WeakMap,Ba=new WeakMap,Ca=new WeakMap,Tb=new WeakMap,Ub=new WeakMap,Vb=new WeakMap,Wb=new WeakMap,Xb=new WeakMap,Yb=new WeakMap,Zb=new WeakMap,xc=new WeakMap,Za=new WeakMap,Ia=new WeakMap,$a=new WeakMap,Cb=new WeakMap,Db=new WeakMap,Eb=new WeakMap,$b=new WeakMap,ac=new WeakMap,bc=new WeakMap,$c=new WeakMap,yc=new WeakMap,ha=new WeakMap,zc=new WeakMap,ma=new WeakMap,ta=new WeakMap,Ac=new WeakMap,Bc=new WeakMap,
cc=new WeakMap,dc=new WeakMap,Cc=new WeakMap,Ja=new WeakMap,ad=new WeakMap,ec=new WeakMap,bd=new WeakMap,Dc=new WeakMap,cd=new WeakMap,dd=new WeakMap,fc=new WeakMap,Da=new WeakMap,gc=new WeakMap,Ec=new WeakMap,hc=new WeakMap,ed=new WeakMap,Fc=new WeakMap,ab=new WeakMap,V=new WeakMap,Fb=new WeakMap,fd=new WeakMap,gd=new WeakMap,Ea=new WeakMap,ic=new WeakMap,hd=new WeakMap,Gc=new WeakMap,Gb=new WeakMap,Hb=new WeakMap,jc=new WeakMap,e=new WeakMap,ia=new WeakMap,Hc=new WeakMap,id=new WeakMap,Ic=new WeakMap,
Jc=new WeakMap,kc=new WeakMap,lc=new WeakMap,Kc=new WeakMap,mc=new WeakMap,jd=new WeakMap,Lc=new WeakMap,kd=new WeakMap,ld=new WeakMap,md=new WeakMap,nd=new WeakMap,Mc=new WeakMap,B=new WeakMap,z=new WeakMap,da=new WeakMap,od=new WeakMap,pd=new WeakMap,qd=new WeakMap,rd=new WeakMap,na=new WeakMap,sd=function(n,q,v){return Object.defineProperty(n,"prototype",{writable:!1}),n}(function v(q){var a=this;if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");p(this,sb,void 0);
p(this,Zc,void 0);p(this,eb,void 0);p(this,fa,void 0);p(this,tb,void 0);p(this,Na,void 0);p(this,fb,void 0);p(this,L,void 0);p(this,R,void 0);p(this,Z,void 0);p(this,va,void 0);p(this,ja,void 0);p(this,ka,void 0);p(this,ub,void 0);p(this,Oa,void 0);p(this,oa,void 0);p(this,vb,void 0);p(this,ba,void 0);p(this,Pa,void 0);p(this,Qa,void 0);p(this,wb,void 0);p(this,gb,void 0);p(this,Ra,void 0);p(this,Fa,void 0);p(this,pa,void 0);p(this,Sa,void 0);p(this,hb,void 0);p(this,ib,void 0);p(this,N,void 0);p(this,
la,void 0);p(this,wa,void 0);p(this,Nb,void 0);p(this,xa,void 0);p(this,Ga,void 0);p(this,J,void 0);p(this,Ta,void 0);p(this,Ua,void 0);p(this,xb,void 0);p(this,ya,void 0);p(this,jb,void 0);p(this,qa,void 0);p(this,za,void 0);p(this,ra,void 0);p(this,yb,void 0);p(this,M,void 0);p(this,zb,void 0);p(this,wc,void 0);p(this,Va,void 0);p(this,kb,void 0);p(this,lb,void 0);p(this,mb,void 0);p(this,Aa,void 0);p(this,Ob,void 0);p(this,sa,void 0);p(this,Ha,void 0);p(this,Wa,void 0);p(this,nb,void 0);p(this,
Pb,void 0);p(this,ob,void 0);p(this,pb,void 0);p(this,Ab,void 0);p(this,Bb,void 0);p(this,Qb,void 0);p(this,Rb,void 0);p(this,qb,void 0);p(this,Xa,void 0);p(this,Sb,void 0);p(this,K,void 0);p(this,H,void 0);p(this,ca,void 0);p(this,Ya,void 0);p(this,Ba,void 0);p(this,Ca,void 0);p(this,Tb,void 0);p(this,Ub,void 0);p(this,Vb,void 0);p(this,Wb,void 0);p(this,Xb,void 0);p(this,Yb,void 0);p(this,Zb,void 0);p(this,xc,void 0);p(this,Za,void 0);p(this,Ia,void 0);p(this,$a,void 0);p(this,Cb,void 0);p(this,
Db,void 0);p(this,Eb,void 0);p(this,$b,void 0);p(this,ac,function(){if("[CLY]_temp_id"===a.device_id)b(e,a).call(a,f.INFO,"server_config, Device ID is temporary, not fetching server config");else if(b(xc,a))b(e,a).call(a,f.INFO,"server_config, SDK behavior sync is disabled, not fetching server config");else{b(e,a).call(a,f.INFO,"server_config, Fetching server config");var c={};c.app_key=a.app_key;c.device_id=a.device_id;c.sdk_version=b(ra,a);c.sdk_name=b(za,a);c.t=b(J,a);c.timestamp=cb();var d=new Date;
c.hour=d.getHours();c.dow=d.getDay();c.av=a.app_version;c.method="sc";b(ia,a).call(a,"server_config",a.url+b(Na,a),c,function(g,h,m){if(!g)try{var l=JSON.parse(m);b(e,a).call(a,f.INFO,"server_config, Config fetched successfully:["+JSON.stringify(l)+"]");l&&b(bc,a).call(a,l);b(z,a).call(a,"cly_config",JSON.stringify(l))}catch(r){b(e,a).call(a,f.ERROR,"server_config, Had an issue while parsing the response: "+r)}},!0,!0);setTimeout(function(){b(ac,a).call(a)},36E5*b(Pb,a))}});p(this,bc,function(c){c&&
c.c&&"object"===T(c.c)&&(c=c.c,c.hasOwnProperty("networking")&&k(Ob,a,c.networking),c.hasOwnProperty("tracking")&&k(ob,a,c.tracking),c.hasOwnProperty("rqs")&&k(sa,a,c.rqs),c.hasOwnProperty("eqs")&&k(Ha,a,c.eqs),c.hasOwnProperty("sui")&&k(Wa,a,c.sui),c.hasOwnProperty("czi")&&14<c.czi&&k(nb,a,1E3*c.czi),c.hasOwnProperty("ecz")&&(k(qb,a,c.ecz),!b(Yb,a)&&b(qb,a)&&b(Ja,a).call(a)),c.hasOwnProperty("cr")&&k(Xa,a,c.cr),c.hasOwnProperty("st")&&k(pb,a,c.st),c.hasOwnProperty("crt")&&k(Bb,a,c.crt),c.hasOwnProperty("vt")&&
k(Ab,a,c.vt),c.hasOwnProperty("cet")&&k(Qb,a,c.cet),c.hasOwnProperty("lkl")&&k(K,a,c.lkl),c.hasOwnProperty("lvs")&&k(H,a,c.lvs),c.hasOwnProperty("lsv")&&k(ca,a,c.lsv),c.hasOwnProperty("lbc")&&k(Ya,a,c.lbc),c.hasOwnProperty("ltlpt")&&k(Ba,a,c.ltlpt),c.hasOwnProperty("ltl")&&k(Ca,a,c.ltl),c.hasOwnProperty("scui")&&k(Pb,a,Math.max(c.scui,4)),c.hasOwnProperty("lt")&&k(Rb,a,c.lt),c.hasOwnProperty("rcz")&&k(Sb,a,c.rcz),c.hasOwnProperty("bom")&&k(Tb,a,c.bom),c.hasOwnProperty("bom_at")&&k(Ub,a,c.bom_at),
c.hasOwnProperty("bom_rqp")&&k(Vb,a,c.bom_rqp),c.hasOwnProperty("bom_ra")&&k(Wb,a,c.bom_ra),c.hasOwnProperty("bom_d")&&k(Xb,a,c.bom_d))});p(this,$c,function(c){k(ka,a,x("ignore_referrers",c,[]));k(gb,a,x("fail_timeout",c,60));k(Ra,a,x("inactivity_time",c,20));k(pa,a,x("use_session_cookie",c,!0));k(Sa,a,x("session_cookie_timeout",c,30));k(N,a,x("offline_mode",c,!1));k(za,a,x("sdk_name",c,"javascript_native_web"));k(ra,a,x("sdk_version",c,"25.4.2"));k(fb,a,x("interval",c,500));a.getViewName=x("getViewName",
c,t.getViewName);a.getViewUrl=x("getViewUrl",c,t.getViewUrl);a.getSearchQuery=x("getSearchQuery",c,t.getSearchQuery);a.DeviceIdType=t.DeviceIdType;a.namespace=x("namespace",c,"");a.clearStoredId=x("clear_stored_id",c,!1);a.onload=x("onload",c,[]);a.utm=x("utm",c,{source:!0,medium:!0,campaign:!0,term:!0,content:!0});a.ignore_prefetch=x("ignore_prefetch",c,!0);a.rcAutoOptinAb=x("rc_automatic_optin_for_ab",c,!0);a.useExplicitRcApi=x("use_explicit_rc_api",c,!1);a.debug=x("debug",c,!1);a.test_mode=x("test_mode",
c,!1);a.test_mode_eq=x("test_mode_eq",c,!1);a.metrics=x("metrics",c,{});a.headers=x("headers",c,{});a.app_version=x("app_version",c,"0.0");a.country_code=x("country_code",c,null);a.city=x("city",c,null);a.ip_address=x("ip_address",c,null);a.ignore_bots=x("ignore_bots",c,!0);a.force_post=x("force_post",c,!0);a.remote_config=x("remote_config",c,!1);a.ignore_visitor=x("ignore_visitor",c,!1);a.track_domains=A?x("track_domains",c,!0):void 0;a.storage=x("storage",c,"default");a.enableOrientationTracking=
A?x("enable_orientation_tracking",c,!0):void 0;a.heatmapWhitelist=x("heatmap_whitelist",c,[]);a.contentWhitelist=x("content_whitelist",c,[]);a.salt=x("salt",c,null);a.hcErrorCount=b(B,a).call(a,S.errorCount)||0;a.hcWarningCount=b(B,a).call(a,S.warningCount)||0;a.hcStatusCode=b(B,a).call(a,S.statusCode)||-1;a.hcErrorMessage=b(B,a).call(a,S.errorMessage)||"";a.hcBackoffCount=b(B,a).call(a,S.backoffCount)||0;a.hcConsecutiveBackoffCount=b(B,a).call(a,S.consecutiveBackoffCount)||0;k(Db,a,!1);k(mb,a,x("crash_filter_callback",
c,null));"cookie"===a.storage&&k(xa,a,!1);a.rcAutoOptinAb||a.useExplicitRcApi||(b(e,a).call(a,f.WARNING,"initialize, Auto opting is disabled, switching to explicit RC API"),a.useExplicitRcApi=!0);Array.isArray(b(ka,a))||k(ka,a,[]);""===a.url&&(b(e,a).call(a,f.ERROR,"initialize, Please provide server URL"),a.ignore_visitor=!0);b(B,a).call(a,"cly_ignore")&&(a.ignore_visitor=!0);b(Cc,a).call(a);if(A)if(window.name&&0===window.name.indexOf("cly:"))try{a.passed_data=JSON.parse(window.name.replace("cly:",
""))}catch(D){b(e,a).call(a,f.ERROR,"initialize, Could not parse name: "+window.name+", error: "+D)}else if(location.hash&&0===location.hash.indexOf("this.#cly:"))try{a.passed_data=JSON.parse(location.hash.replace("this.#cly:",""))}catch(D){b(e,a).call(a,f.ERROR,"initialize, Could not parse hash: "+location.hash+", error: "+D)}Array.isArray(a.contentWhitelist)&&(a.contentWhitelist.push(a.url),a.contentWhitelist=a.contentWhitelist.map(function(D){return Ma(D)}));if((a.passed_data&&a.passed_data.app_key&&
a.passed_data.app_key===a.app_key||a.passed_data&&!a.passed_data.app_key&&b(eb,a))&&a.passed_data.token&&a.passed_data.purpose){a.passed_data.token!==b(B,a).call(a,"cly_old_token")&&(b(Lc,a).call(a,a.passed_data.token),b(z,a).call(a,"cly_old_token",a.passed_data.token));var d=[];Array.isArray(a.heatmapWhitelist)?(a.heatmapWhitelist.push(a.url),d=a.heatmapWhitelist.map(function(D){return Ma(D)})):d=[a.url];d.includes(a.passed_data.url)&&"heatmap"===a.passed_data.purpose&&(a.ignore_visitor=!0,Vc(),
Uc(a.passed_data.url+"/views/heatmap.js",Wc))}if(a.ignore_visitor)b(e,a).call(a,f.WARNING,"initialize, ignore_visitor:["+a.ignore_visitor+"], this user will not be tracked");else{b(od,a).call(a);k(L,a,b(B,a).call(a,"cly_queue")||[]);k(R,a,b(B,a).call(a,"cly_event")||[]);k(Z,a,b(B,a).call(a,"cly_remote_configs")||{});d="[CLY]_temp_id"===b(B,a).call(a,"cly_id");a.clearStoredId&&(b(B,a).call(a,"cly_id")&&!d&&(a.device_id=b(B,a).call(a,"cly_id"),b(e,a).call(a,f.DEBUG,"initialize, temporarily using the previous device ID to flush existing events"),
k(J,a,b(B,a).call(a,"cly_id_type")),b(J,a)||(b(e,a).call(a,f.DEBUG,"initialize, No device ID type info from the previous session, falling back to DEVELOPER_SUPPLIED, for event flushing"),k(J,a,0)),b(Da,a).call(a),a.device_id=void 0,k(J,a,1)),b(e,a).call(a,f.INFO,"initialize, Clearing the device ID storage"),b(da,a).call(a,"cly_id"),b(da,a).call(a,"cly_id_type"),b(da,a).call(a,"cly_session"),d=!1);"javascript_native_web"===b(za,a)&&"25.4.2"===b(ra,a)?b(e,a).call(a,f.DEBUG,"initialize, SDK name:["+
b(za,a)+"], version:["+b(ra,a)+"]"):b(e,a).call(a,f.DEBUG,"initialize, SDK name:["+b(za,a)+"], version:["+b(ra,a)+"], default name:[javascript_native_web] and default version:[25.4.2]");b(e,a).call(a,f.DEBUG,"initialize, stored server config:["+JSON.stringify(b(Aa,a))+"]");b(e,a).call(a,f.DEBUG,"initialize, app_key:["+a.app_key+"], url:["+a.url+"]");b(e,a).call(a,f.DEBUG,"initialize, device_id:["+x("device_id",c,void 0)+"]");b(e,a).call(a,f.DEBUG,"initialize, require_consent is enabled:["+b(Xa,a)+
"]");try{b(e,a).call(a,f.DEBUG,"initialize, metric override:["+JSON.stringify(a.metrics)+"]"),b(e,a).call(a,f.DEBUG,"initialize, header override:["+JSON.stringify(a.headers)+"]"),b(e,a).call(a,f.DEBUG,"initialize, number of onload callbacks provided:["+a.onload.length+"]"),b(e,a).call(a,f.DEBUG,"initialize, utm tags:["+JSON.stringify(a.utm)+"]"),b(ka,a)&&b(e,a).call(a,f.DEBUG,"initialize, referrers to ignore :["+JSON.stringify(b(ka,a))+"]"),b(e,a).call(a,f.DEBUG,"initialize, salt given:["+!!a.salt+
"]")}catch(D){b(e,a).call(a,f.ERROR,"initialize, Could not stringify some config object values")}b(e,a).call(a,f.DEBUG,"initialize, app_version:["+a.app_version+"]");b(e,a).call(a,f.DEBUG,"initialize, provided location info; country_code:["+a.country_code+"], city:["+a.city+"], ip_address:["+a.ip_address+"]");""!==a.namespace&&b(e,a).call(a,f.DEBUG,"initialize, namespace given:["+a.namespace+"]");a.clearStoredId&&b(e,a).call(a,f.DEBUG,"initialize, clearStoredId flag set to:["+a.clearStoredId+"]");
a.ignore_prefetch&&b(e,a).call(a,f.DEBUG,"initialize, ignoring pre-fetching and pre-rendering from counting as real website visits :["+a.ignore_prefetch+"]");a.test_mode&&b(e,a).call(a,f.WARNING,"initialize, test_mode:["+a.test_mode+"], request queue won't be processed");a.test_mode_eq&&b(e,a).call(a,f.WARNING,"initialize, test_mode_eq:["+a.test_mode_eq+"], event queue won't be processed");a.heatmapWhitelist&&b(e,a).call(a,f.DEBUG,"initialize, heatmap whitelist:["+JSON.stringify(a.heatmapWhitelist)+
"], these domains will be whitelisted");"default"!==a.storage&&b(e,a).call(a,f.DEBUG,"initialize, storage is set to:["+a.storage+"]");a.ignore_bots&&b(e,a).call(a,f.DEBUG,"initialize, ignore traffic from bots :["+a.ignore_bots+"]");a.force_post&&b(e,a).call(a,f.DEBUG,"initialize, forced post method for all requests:["+a.force_post+"]");a.remote_config&&b(e,a).call(a,f.DEBUG,"initialize, remote_config callback provided:["+!!a.remote_config+"]");"boolean"===typeof a.rcAutoOptinAb&&b(e,a).call(a,f.DEBUG,
"initialize, automatic RC optin is enabled:["+a.rcAutoOptinAb+"]");a.useExplicitRcApi||b(e,a).call(a,f.WARNING,"initialize, will use legacy RC API. Consider enabling new API during init with use_explicit_rc_api flag");a.track_domains&&b(e,a).call(a,f.DEBUG,"initialize, tracking domain info:["+a.track_domains+"]");a.enableOrientationTracking&&b(e,a).call(a,f.DEBUG,"initialize, enableOrientationTracking:["+a.enableOrientationTracking+"]");b(pa,a)||b(e,a).call(a,f.WARNING,"initialize, use_session_cookie is enabled:["+
b(pa,a)+"]");b(N,a)&&b(e,a).call(a,f.DEBUG,"initialize, offline_mode:["+b(N,a)+"], user info won't be send to the servers");b(Z,a)&&b(e,a).call(a,f.DEBUG,"initialize, stored remote configs:["+JSON.stringify(b(Z,a))+"]");b(nb,a)&&b(e,a).call(a,f.DEBUG,"initialize, content_zone_timer_interval:["+b(nb,a)+"]");b(e,a).call(a,f.DEBUG,"initialize, 'getViewName' callback override provided:["+(a.getViewName!==t.getViewName)+"]");b(e,a).call(a,f.DEBUG,"initialize, 'getSearchQuery' callback override provided:["+
(a.getSearchQuery!==t.getSearchQuery)+"]");128!==b(K,a)&&b(e,a).call(a,f.DEBUG,"initialize, maxKeyLength set to:["+b(K,a)+"] characters");256!==b(H,a)&&b(e,a).call(a,f.DEBUG,"initialize, maxValueSize set to:["+b(H,a)+"] characters");100!==b(ca,a)&&b(e,a).call(a,f.DEBUG,"initialize, maxSegmentationValues set to:["+b(ca,a)+"] key/value pairs");100!==b(Ya,a)&&b(e,a).call(a,f.DEBUG,"initialize, maxBreadcrumbCount for custom logs set to:["+b(Ya,a)+"] entries");30!==b(Ba,a)&&b(e,a).call(a,f.DEBUG,"initialize, maxStackTraceLinesPerThread set to:["+
b(Ba,a)+"] lines");200!==b(Ca,a)&&b(e,a).call(a,f.DEBUG,"initialize, maxStackTraceLineLength set to:["+b(Ca,a)+"] characters");500!==b(fb,a)&&b(e,a).call(a,f.DEBUG,"initialize, interval for heartbeats set to:["+b(fb,a)+"] milliseconds");1E3!==b(sa,a)&&b(e,a).call(a,f.DEBUG,"initialize, queue_size set to:["+b(sa,a)+"] items max");60!==b(gb,a)&&b(e,a).call(a,f.DEBUG,"initialize, fail_timeout set to:["+b(gb,a)+"] seconds of wait time after a failed connection to server");20!==b(Ra,a)&&b(e,a).call(a,
f.DEBUG,"initialize, inactivity_time set to:["+b(Ra,a)+"] minutes to consider a user as inactive after no observable action");60!==b(Wa,a)&&b(e,a).call(a,f.DEBUG,"initialize, session_update set to:["+b(Wa,a)+"] seconds to check if extending a session is needed while the user is active");100!==b(Ha,a)&&b(e,a).call(a,f.DEBUG,"initialize, max_events set to:["+b(Ha,a)+"] events to send in one batch");30!==b(Sa,a)&&b(e,a).call(a,f.DEBUG,"initialize, session_cookie_timeout set to:["+b(Sa,a)+"] minutes to expire a cookies session");
var g=null,h=a.getSearchQuery(),m=!1,l={};if(h){0===h.indexOf("?")&&(h=h.substring(1));h=h.split("&");for(var r=0;r<h.length;r++){var u=h[r].split("=");"cly_id"===u[0]?b(z,a).call(a,"cly_cmp_id",u[1]):"cly_uid"===u[0]?b(z,a).call(a,"cly_cmp_uid",u[1]):"cly_device_id"===u[0]?g=u[1]:0===(u[0]+"").indexOf("utm_")&&a.utm[u[0].replace("utm_","")]&&(l[u[0].replace("utm_","")]=u[1],m=!0)}}h=x("device_id",c,void 0);"number"===typeof h&&(h=h.toString());b(B,a).call(a,"cly_id")&&!d?(a.device_id=b(B,a).call(a,
"cly_id"),b(e,a).call(a,f.INFO,"initialize, Set the stored device ID"),k(J,a,b(B,a).call(a,"cly_id_type")),b(J,a)||(b(e,a).call(a,f.INFO,"initialize, No device ID type info from the previous session, falling back to DEVELOPER_SUPPLIED"),k(J,a,0)),k(N,a,!1)):null!==g?(b(e,a).call(a,f.INFO,"initialize, Device ID set by URL"),a.device_id=g,k(J,a,3),k(N,a,!1)):h?(b(e,a).call(a,f.INFO,"initialize, Device ID set by developer"),a.device_id=h,c&&Object.keys(c).length?void 0!==c.device_id&&k(J,a,0):void 0!==
t.device_id&&k(J,a,0),k(N,a,!1)):b(N,a)||d?(a.device_id="[CLY]_temp_id",k(J,a,2),b(N,a)&&d?b(e,a).call(a,f.INFO,"initialize, Temp ID set, continuing offline mode from previous app session"):b(N,a)&&!d?b(e,a).call(a,f.INFO,"initialize, Temp ID set, entering offline mode"):(k(N,a,!0),b(e,a).call(a,f.INFO,"initialize, Temp ID set, enabling offline mode"))):(b(e,a).call(a,f.INFO,"initialize, Generating the device ID"),a.device_id=x("device_id",c,b(ic,a).call(a)),c&&Object.keys(c).length?void 0!==c.device_id&&
k(J,a,0):void 0!==t.device_id&&k(J,a,0));b(z,a).call(a,"cly_id",a.device_id);b(z,a).call(a,"cly_id_type",b(J,a));if(m){k(qa,a,{});for(var y in a.utm)l[y]?(a.userData.set("utm_"+y,l[y]),b(qa,a)[y]=l[y]):a.userData.unset("utm_"+y);a.userData.save()}b(ac,a).call(a)}});p(this,yc,function(){b(sb,a)&&(clearTimeout(b(sb,a)),k(sb,a,null));k(sb,a,setTimeout(function(){for(var c={},d=0;d<t.features.length;d++)!0===b(M,a)[t.features[d]].optin?c[t.features[d]]=!0:c[t.features[d]]=!1;b(V,a).call(a,{consent:JSON.stringify(c)});
b(e,a).call(a,f.DEBUG,"Consent update request has been sent to the queue.")},1E3))});w(this,"halt",function(){b(e,a).call(a,f.WARNING,"halt, Resetting Countly");t.i=void 0;t.q=[];t.noHeartBeat=void 0;k(eb,a,!t.i);k(fa,a,!1);k(tb,a,"/i");k(Na,a,"/o/sdk");k(fb,a,500);k(sa,a,1E3);k(L,a,[]);k(R,a,[]);k(Z,a,{});k(va,a,[]);k(ja,a,{});k(ka,a,[]);k(ub,a,null);k(Oa,a,!0);k(vb,a,0);k(ba,a,null);k(Pa,a,0);k(Qa,a,0);k(wb,a,0);k(gb,a,60);k(Ra,a,20);k(Fa,a,0);k(Wa,a,60);k(Ha,a,100);k(pa,a,!0);k(Sa,a,30);k(hb,a,
!0);k(ib,a,!1);k(N,a,!1);k(la,a,{});k(wa,a,!0);k(Nb,a,I());k(xa,a,!0);k(Ga,a,null);k(J,a,1);k(Ta,a,!1);k(Ua,a,0);k(xb,a,!1);k(ya,a,null);k(jb,a,null);k(qa,a,null);k(zb,a,[]);try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal"),localStorage.removeItem("cly_old_token"),localStorage.removeItem("cly_cmp_id"),localStorage.removeItem("cly_cmp_uid"),localStorage.removeItem("cly_id"),localStorage.removeItem("cly_id_type"),localStorage.removeItem("cly_queue"),localStorage.removeItem("cly_session"),
localStorage.removeItem("cly_remote_configs"),localStorage.removeItem("cly_event"),localStorage.removeItem("cly_ignore"),localStorage.removeItem("cly_fb_widgets"),localStorage.removeItem("cly_token"),localStorage.removeItem("cly_hc_error_count"),localStorage.removeItem("cly_hc_warning_count"),localStorage.removeItem("cly_hc_status_code"),localStorage.removeItem("cly_hc_error_message"),localStorage.removeItem("cly_hc_backoff_count"),localStorage.removeItem("cly_hc_consecutive_backoff_count")}catch(d){b(e,
a).call(a,f.ERROR,"halt, Local storage test failed, will fallback to cookies"),k(xa,a,!1)}t.features="sessions events views scrolls clicks forms crashes attribution users star-rating location apm feedback remote-config".split(" ");k(M,a,{});for(var c=0;c<t.features.length;c++)b(M,a)[t.features[c]]={};a.app_key=void 0;a.device_id=void 0;a.onload=void 0;a.utm=void 0;a.ignore_prefetch=void 0;a.debug=void 0;a.test_mode=void 0;a.test_mode_eq=void 0;a.metrics=void 0;a.headers=void 0;a.url=void 0;a.app_version=
void 0;a.country_code=void 0;a.city=void 0;a.ip_address=void 0;a.ignore_bots=void 0;a.force_post=void 0;a.rcAutoOptinAb=void 0;a.useExplicitRcApi=void 0;a.remote_config=void 0;a.ignore_visitor=void 0;k(Xa,a,void 0);a.track_domains=void 0;a.storage=void 0;a.enableOrientationTracking=void 0;a.salt=void 0;k(K,a,void 0);k(H,a,void 0);k(ca,a,void 0);k(Ya,a,void 0);k(Ba,a,void 0);k(Ca,a,void 0)});w(this,"group_features",function(c){b(e,a).call(a,f.INFO,"group_features, Grouping features");if(c)for(var d in c)b(M,
a)[d]?b(e,a).call(a,f.WARNING,"group_features, Feature name ["+d+"] is already reserved"):"string"===typeof c[d]?b(M,a)[d]={features:[c[d]]}:c[d]&&Array.isArray(c[d])&&c[d].length?b(M,a)[d]={features:c[d]}:b(e,a).call(a,f.ERROR,"group_features, Incorrect feature list for ["+d+"] value: ["+c[d]+"]");else b(e,a).call(a,f.ERROR,"group_features, Incorrect features:["+c+"]")});w(this,"check_consent",function(c){b(e,a).call(a,f.INFO,"check_consent, Checking if consent is given for specific feature:["+c+
"]");if(!b(Xa,a))return b(e,a).call(a,f.INFO,"check_consent, require_consent is off, no consent is necessary"),!0;if(b(M,a)[c])return!(!b(M,a)[c]||!b(M,a)[c].optin);b(e,a).call(a,f.ERROR,"check_consent, No feature available for ["+c+"]");return!1});w(this,"get_device_id_type",function(){b(e,a).call(a,f.INFO,"check_device_id_type, Retrieving the current device id type.["+b(J,a)+"]");switch(b(J,a)){case 1:var c=a.DeviceIdType.SDK_GENERATED;break;case 3:case 0:c=a.DeviceIdType.DEVELOPER_SUPPLIED;break;
case 2:c=a.DeviceIdType.TEMPORARY_ID;break;default:c=-1}return c});w(this,"get_device_id",function(){b(e,a).call(a,f.INFO,"get_device_id, Retrieving the device id: ["+a.device_id+"]");return a.device_id});w(this,"check_any_consent",function(){b(e,a).call(a,f.INFO,"check_any_consent, Checking if any consent is given");if(!b(Xa,a))return b(e,a).call(a,f.INFO,"check_any_consent, require_consent is off, no consent is necessary"),!0;for(var c in b(M,a))if(b(M,a)[c]&&b(M,a)[c].optin)return!0;b(e,a).call(a,
f.INFO,"check_any_consent, No consents given");return!1});w(this,"add_consent",function(c){b(e,a).call(a,f.INFO,"add_consent, Adding consent for ["+c+"]");if(Array.isArray(c))for(var d=0;d<c.length;d++)a.add_consent(c[d]);else b(M,a)[c]?b(M,a)[c].features?(b(M,a)[c].optin=!0,a.add_consent(b(M,a)[c].features)):!0!==b(M,a)[c].optin&&(b(M,a)[c].optin=!0,b(yc,a).call(a),setTimeout(function(){"sessions"===c&&b(la,a).begin_session?(a.begin_session.apply(a,b(la,a).begin_session),b(la,a).begin_session=null):
"views"===c&&b(la,a).track_pageview&&(k(ba,a,null),a.track_pageview.apply(a,b(la,a).track_pageview),b(la,a).track_pageview=null)},1)):b(e,a).call(a,f.ERROR,"add_consent, No feature available for ["+c+"]")});w(this,"remove_consent",function(c){b(e,a).call(a,f.INFO,"remove_consent, Removing consent for ["+c+"]");a.remove_consent_internal(c,!0)});w(this,"remove_consent_internal",function(c,d){d=d||!1;if(Array.isArray(c))for(var g=0;g<c.length;g++)a.remove_consent_internal(c[g],d);else b(M,a)[c]?b(M,
a)[c].features?a.remove_consent_internal(b(M,a)[c].features,d):(b(M,a)[c].optin=!1,d&&!1!==b(M,a)[c].optin&&b(yc,a).call(a)):b(e,a).call(a,f.WARNING,"remove_consent, No feature available for ["+c+"]")});w(this,"enable_offline_mode",function(){b(N,a)?b(e,a).call(a,f.WARNING,"enable_offline_mode, Countly is already in offline mode."):(b(e,a).call(a,f.INFO,"enable_offline_mode, Enabling offline mode"),a.remove_consent_internal(t.features,!1),k(N,a,!0),b(ec,a).call(a),a.device_id="[CLY]_temp_id",k(J,
a,2))});w(this,"disable_offline_mode",function(c){if(b(N,a)){b(e,a).call(a,f.INFO,"disable_offline_mode, Disabling offline mode");k(N,a,!1);c&&a.device_id!==c?(a.device_id=c,k(J,a,0),b(z,a).call(a,"cly_id",a.device_id),b(z,a).call(a,"cly_id_type",0),b(e,a).call(a,f.INFO,"disable_offline_mode, Changing id to: "+a.device_id)):(a.device_id=b(ic,a).call(a),"[CLY]_temp_id"===a.device_id&&(a.device_id=pc()),a.device_id!==b(B,a).call(a,"cly_id")&&(b(z,a).call(a,"cly_id",a.device_id),b(z,a).call(a,"cly_id_type",
1)));c=!1;if(0<b(L,a).length)for(var d=0;d<b(L,a).length;d++)"[CLY]_temp_id"===b(L,a)[d].device_id&&(b(L,a)[d].device_id=a.device_id,b(L,a)[d].t=b(J,a),c=!0);c&&b(z,a).call(a,"cly_queue",b(L,a),!0);b(yb,a)&&(b(na,a).sendInstantHCRequest(),k(yb,a,!1));b(ac,a).call(a);b(qb,a)&&(b(Ja,a).call(a),k(Yb,a,!0))}else b(e,a).call(a,f.WARNING,"disable_offline_mode, Countly was not in offline mode.")});w(this,"begin_session",function(c,d){if(b(pb,a))if(b(e,a).call(a,f.INFO,"begin_session, Starting the session. There was an ongoing session: ["+
b(fa,a)+"]"),c&&b(e,a).call(a,f.INFO,"begin_session, Heartbeats are disabled"),d&&b(e,a).call(a,f.INFO,"begin_session, Session starts irrespective of session cookie"),a.check_consent("sessions")){if(!b(fa,a)){if(a.enableOrientationTracking){b(zc,a).call(a);var g;F(window,"resize",function(){clearTimeout(g);g=setTimeout(function(){b(zc,a).call(a)},200)})}k(oa,a,I());k(fa,a,!0);k(Oa,a,!c);c=b(B,a).call(a,"cly_session");b(e,a).call(a,f.VERBOSE,"begin_session, Session state, forced: ["+d+"], useSessionCookie: ["+
b(pa,a)+"], seconds to expire: ["+(c-b(oa,a))+"], expired: ["+(parseInt(c)<=I())+"] ");if(d||!b(pa,a)||!c||parseInt(c)<=I())b(e,a).call(a,f.INFO,"begin_session, Session started"),null===b(Ga,a)&&k(Ga,a,!0),d={begin_session:1},d.metrics=JSON.stringify(b(Gb,a).call(a)),b(V,a).call(a,d);b(z,a).call(a,"cly_session",I()+60*b(Sa,a))}}else b(la,a).begin_session=[c,d];else b(e,a).call(a,f.INFO,"begin_session, Session tracking is disabled by server config")});w(this,"session_duration",function(c){b(pb,a)?
(b(e,a).call(a,f.INFO,"session_duration, Reporting session duration: ["+c+"]"),a.check_consent("sessions")&&(b(fa,a)?(b(e,a).call(a,f.INFO,"session_duration, Session extended: ["+c+"]"),b(V,a).call(a,{session_duration:c}),b(Fc,a).call(a)):b(e,a).call(a,f.DEBUG,"session_duration, No session was started"))):b(e,a).call(a,f.INFO,"session_duration, Session tracking is disabled by server config")});w(this,"end_session",function(c,d){b(pb,a)||d?(b(e,a).call(a,f.INFO,"end_session, Ending the current session. There was an on going session:["+
b(fa,a)+"]"),a.check_consent("sessions")&&b(fa,a)&&(c=c||I()-b(oa,a),b(hc,a).call(a),!b(pa,a)||d?(b(e,a).call(a,f.INFO,"end_session, Session ended"),b(V,a).call(a,{end_session:1,session_duration:c})):a.session_duration(c),k(fa,a,!1))):b(e,a).call(a,f.INFO,"end_session, Session tracking is disabled by server config")});w(this,"set_id",function(c){b(e,a).call(a,f.INFO,"set_id, Changing the device ID to:["+c+"]");null==c||""===c?b(e,a).call(a,f.WARNING,"set_id, The provided device is not a valid ID"):
0===b(J,a)?a.change_id(c,!1):a.change_id(c,!0)});w(this,"change_id",function(c,d){b(e,a).call(a,f.INFO,"change_id, Changing the device ID to: ["+c+"] with merge:["+d+"]");if(c&&"string"===typeof c&&0!==c.length)if(b(N,a))b(e,a).call(a,f.WARNING,"change_id, Offline mode was on, initiating disabling sequence instead."),a.disable_offline_mode(c);else if(a.device_id==c)b(e,a).call(a,f.DEBUG,"change_id, Provided device ID is equal to the current device ID. Aborting.");else{d||(b(Ea,a).call(a),b(Da,a).call(a),
a.end_session(null,!0),k(ja,a,{}),a.remove_consent_internal(t.features,!1));var g=a.device_id;a.device_id=c;a.device_id=a.device_id;k(J,a,0);b(z,a).call(a,"cly_id",a.device_id);b(z,a).call(a,"cly_id_type",0);b(e,a).call(a,f.INFO,"change_id, Changing ID from:["+g+"] to ["+c+"]");d?b(V,a).call(a,{old_device_id:g}):a.begin_session(!b(Oa,a),!0);a.remote_config&&(k(Z,a,{}),b(z,a).call(a,"cly_remote_configs",b(Z,a)),a.fetch_remote_config(a.remote_config))}else b(e,a).call(a,f.WARNING,"change_id, The provided device ID is not a valid ID")});
w(this,"add_event",function(c){b(e,a).call(a,f.INFO,"add_event, Adding event: ",c);switch(c.key){case U.NPS:var d=a.check_consent("feedback");break;case U.SURVEY:d=a.check_consent("feedback");break;case U.STAR_RATING:d=a.check_consent("star-rating");break;case U.VIEW:d=a.check_consent("views");break;case U.ORIENTATION:d=a.check_consent("users");break;case U.ACTION:d=a.check_consent("clicks")||a.check_consent("scrolls");break;default:d=b(Qb,a)?a.check_consent("events"):!1}d&&b(ha,a).call(a,c)});w(this,
"attempt_to_send_stored_requests",function(){b(e,a).call(a,f.INFO,"attemptToSendStoredRequests, Attempting to send stored requests");b(Ea,a).call(a);b(Da,a).call(a)});w(this,"test_mode_rq",function(c){b(e,a).call(a,f.INFO,"test_mode_rq, Setting test mode to: ["+c+"]");a.test_mode=c});p(this,ha,function(c,d){if(a.ignore_visitor||!b(ob,a))b(e,a).call(a,f.WARNING,"Not adding the event. Tracking is disabled by the server config:["+!b(ob,a)+"] or ignore_visitor is:["+a.ignore_visitor+"]");else if(c.key){c.count||
(c.count=1);vd.includes(c.key)||(c.key=C(c.key,b(K,a),"add_cly_event",b(e,a)));c.segmentation=ua(c.segmentation,b(K,a),b(H,a),b(ca,a),"add_cly_event",b(e,a));c=rb(c,["key","count","sum","dur","segmentation"]);c.timestamp=cb();var g=new Date;c.hour=g.getHours();c.dow=g.getDay();c.id=d||oc();c.key===U.VIEW?c.pvid=b(jb,a)||"":c.cvid=b(ya,a)||"";b(R,a).push(c);b(z,a).call(a,"cly_event",b(R,a));b(e,a).call(a,f.INFO,"With event ID: ["+c.id+"], successfully adding the last event:",c)}else b(e,a).call(a,
f.ERROR,"Adding event failed. Event must have a key property")});w(this,"start_event",function(c){c&&"string"===typeof c?(b(e,a).call(a,f.INFO,"start_event, Starting timed event with key: ["+c+"]"),c=C(c,b(K,a),"start_event",b(e,a)),b(ja,a)[c]?b(e,a).call(a,f.WARNING,"start_event, Timed event with key: ["+c+"] already started"):b(ja,a)[c]=I()):b(e,a).call(a,f.WARNING,"start_event, you have to provide a valid string key instead of: ["+c+"]")});w(this,"cancel_event",function(c){if(!c||"string"!==typeof c)return b(e,
a).call(a,f.WARNING,"cancel_event, you have to provide a valid string key instead of: ["+c+"]"),!1;b(e,a).call(a,f.INFO,"cancel_event, Canceling timed event with key: ["+c+"]");c=C(c,b(K,a),"cancel_event",b(e,a));if(b(ja,a)[c])return delete b(ja,a)[c],b(e,a).call(a,f.INFO,"cancel_event, Timed event with key: ["+c+"] is canceled"),!0;b(e,a).call(a,f.WARNING,"cancel_event, Timed event with key: ["+c+"] was not found");return!1});w(this,"end_event",function(c){c?(b(e,a).call(a,f.INFO,"end_event, Ending timed event"),
"string"===typeof c&&(c=C(c,b(K,a),"end_event",b(e,a)),c={key:c}),c.key?b(ja,a)[c.key]?(c.dur=I()-b(ja,a)[c.key],a.add_event(c),delete b(ja,a)[c.key]):b(e,a).call(a,f.ERROR,"end_event, Timed event with key: ["+c.key+"] was not started"):b(e,a).call(a,f.ERROR,"end_event, Timed event must have a key property")):b(e,a).call(a,f.WARNING,"end_event, you have to provide a valid string key or event object instead of: ["+c+"]")});p(this,zc,function(c){b(e,a).call(a,f.INFO,"report_orientation, Reporting orientation");
a.check_consent("users")&&b(ha,a).call(a,{key:U.ORIENTATION,segmentation:{mode:c||(window.innerWidth>window.innerHeight?"landscape":"portrait")}})});w(this,"report_conversion",function(c,d){b(e,a).call(a,f.WARNING,"report_conversion, Deprecated function call! Use 'recordDirectAttribution' in place of this call. Call will be redirected now!");a.recordDirectAttribution(c,d)});w(this,"recordDirectAttribution",function(c,d){b(e,a).call(a,f.INFO,"recordDirectAttribution, Recording the attribution for campaign ID: ["+
c+"] and the user ID: ["+d+"]");a.check_consent("attribution")&&(c=c||b(B,a).call(a,"cly_cmp_id")||"cly_organic",(d=d||b(B,a).call(a,"cly_cmp_uid"))?b(V,a).call(a,{campaign_id:c,campaign_user:d}):b(V,a).call(a,{campaign_id:c}))});w(this,"user_details",function(c){b(e,a).call(a,f.INFO,"user_details, Trying to add user details: ",c);a.check_consent("users")&&(b(Ea,a).call(a),b(Da,a).call(a),b(e,a).call(a,f.INFO,"user_details, flushed the event queue"),c.name=C(c.name,b(H,a),"user_details",b(e,a)),c.username=
C(c.username,b(H,a),"user_details",b(e,a)),c.email=C(c.email,b(H,a),"user_details",b(e,a)),c.organization=C(c.organization,b(H,a),"user_details",b(e,a)),c.phone=C(c.phone,b(H,a),"user_details",b(e,a)),c.picture=C(c.picture,4096,"user_details",b(e,a)),c.gender=C(c.gender,b(H,a),"user_details",b(e,a)),c.byear=C(c.byear,b(H,a),"user_details",b(e,a)),c.custom=ua(c.custom,b(K,a),b(H,a),b(ca,a),"user_details",b(e,a)),b(V,a).call(a,{user_details:JSON.stringify(rb(c,"name username email organization phone picture gender byear custom".split(" ")))}))});
p(this,ma,{});p(this,ta,function(c,d,g){a.check_consent("users")&&(b(ma,a)[c]||(b(ma,a)[c]={}),"$push"===g||"$pull"===g||"$addToSet"===g?(b(ma,a)[c][g]||(b(ma,a)[c][g]=[]),b(ma,a)[c][g].push(d)):b(ma,a)[c][g]=d)});w(this,"userData",{set:function(c,d){b(e,a).call(a,f.INFO,"[userData] set, Setting user's custom property value: ["+d+"] under the key: ["+c+"]");c=C(c,b(K,a),"userData set",b(e,a));d=C(d,b(H,a),"userData set",b(e,a));b(ma,a)[c]=d},unset:function(c){b(e,a).call(a,f.INFO,"[userData] unset, Resetting user's custom property with key: ["+
c+"] ");b(ma,a)[c]=""},set_once:function(c,d){b(e,a).call(a,f.INFO,"[userData] set_once, Setting user's unique custom property value: ["+d+"] under the key: ["+c+"] ");c=C(c,b(K,a),"userData set_once",b(e,a));d=C(d,b(H,a),"userData set_once",b(e,a));b(ta,a).call(a,c,d,"$setOnce")},increment:function(c){b(e,a).call(a,f.INFO,"[userData] increment, Increasing user's custom property value under the key: ["+c+"] by one");c=C(c,b(K,a),"userData increment",b(e,a));b(ta,a).call(a,c,1,"$inc")},increment_by:function(c,
d){b(e,a).call(a,f.INFO,"[userData] increment_by, Increasing user's custom property value under the key: ["+c+"] by: ["+d+"]");c=C(c,b(K,a),"userData increment_by",b(e,a));d=C(d,b(H,a),"userData increment_by",b(e,a));b(ta,a).call(a,c,d,"$inc")},multiply:function(c,d){b(e,a).call(a,f.INFO,"[userData] multiply, Multiplying user's custom property value under the key: ["+c+"] by: ["+d+"]");c=C(c,b(K,a),"userData multiply",b(e,a));d=C(d,b(H,a),"userData multiply",b(e,a));b(ta,a).call(a,c,d,"$mul")},max:function(c,
d){b(e,a).call(a,f.INFO,"[userData] max, Saving user's maximum custom property value compared to the value: ["+d+"] under the key: ["+c+"]");c=C(c,b(K,a),"userData max",b(e,a));d=C(d,b(H,a),"userData max",b(e,a));b(ta,a).call(a,c,d,"$max")},min:function(c,d){b(e,a).call(a,f.INFO,"[userData] min, Saving user's minimum custom property value compared to the value: ["+d+"] under the key: ["+c+"]");c=C(c,b(K,a),"userData min",b(e,a));d=C(d,b(H,a),"userData min",b(e,a));b(ta,a).call(a,c,d,"$min")},push:function(c,
d){b(e,a).call(a,f.INFO,"[userData] push, Pushing a value: ["+d+"] under the key: ["+c+"] to user's custom property array");c=C(c,b(K,a),"userData push",b(e,a));d=C(d,b(H,a),"userData push",b(e,a));b(ta,a).call(a,c,d,"$push")},push_unique:function(c,d){b(e,a).call(a,f.INFO,"[userData] push_unique, Pushing a unique value: ["+d+"] under the key: ["+c+"] to user's custom property array");c=C(c,b(K,a),"userData push_unique",b(e,a));d=C(d,b(H,a),"userData push_unique",b(e,a));b(ta,a).call(a,c,d,"$addToSet")},
pull:function(c,d){b(e,a).call(a,f.INFO,"[userData] pull, Removing the value: ["+d+"] under the key: ["+c+"] from user's custom property array");b(ta,a).call(a,c,d,"$pull")},save:function(){b(e,a).call(a,f.INFO,"[userData] save, Saving changes to user's custom property");a.check_consent("users")&&(b(Ea,a).call(a),b(Da,a).call(a),b(e,a).call(a,f.INFO,"user_details, flushed the event queue"),b(V,a).call(a,{user_details:JSON.stringify({custom:b(ma,a)})}));k(ma,a,{})}});w(this,"report_trace",function(c){b(e,
a).call(a,f.INFO,"report_trace, Reporting performance trace");if(a.check_consent("apm")){for(var d="type name stz etz apm_metrics apm_attr".split(" "),g=0;g<d.length;g++)if("apm_attr"!==d[g]&&"undefined"===typeof c[d[g]]){b(e,a).call(a,f.WARNING,"report_trace, APM trace don't have the property: "+d[g]);return}c.name=C(c.name,b(K,a),"report_trace",b(e,a));c.app_metrics=ua(c.app_metrics,b(K,a),b(H,a),b(ca,a),"report_trace",b(e,a));d=rb(c,d);d.timestamp=c.stz;c=new Date;d.hour=c.getHours();d.dow=c.getDay();
b(V,a).call(a,{apm:JSON.stringify(d)});b(e,a).call(a,f.INFO,"report_trace, Successfully adding APM trace: ",d)}});w(this,"track_errors",function(c){A?b(Bb,a)?(b(e,a).call(a,f.INFO,"track_errors, Started tracking errors"),t.i[a.app_key].tracking_crashes=!0,window.cly_crashes||(window.cly_crashes=!0,k(ub,a,c),window.addEventListener("error",function(d){if(d.error)qc(d.error,!1);else{var g=d.filename||"",h=d.lineno||0,m=d.colno||0;d=(d.message||"Unknown error")+"\n";g&&(d+="at "+g);h&&(d+=":"+h);m&&
(d+=":"+m);d+="\n";qc(d+"",!1)}}),window.addEventListener("unhandledrejection",function(d){qc(Error("Unhandled rejection (reason: "+(d.reason&&d.reason.stack?d.reason.stack:d.reason)+")."),!0)}))):b(e,a).call(a,f.WARNING,"track_errors, Crash tracking is disabled by the server config. Not tracking errors."):b(e,a).call(a,f.WARNING,"track_errors, window object is not available. Not tracking errors.")});w(this,"log_error",function(c,d){b(e,a).call(a,f.INFO,"log_error, Logging errors");a.recordError(c,
!0,d)});w(this,"add_log",function(c){b(e,a).call(a,f.INFO,"add_log, Adding a new log of breadcrumbs: [ "+c+" ]");if(a.check_consent("crashes")){for(c=C(c,b(H,a),"add_log",b(e,a));b(va,a).length>=b(Ya,a);)b(va,a).shift(),b(e,a).call(a,f.WARNING,"add_log, Reached maximum crashLogs size. Will erase the oldest one.");b(va,a).push(c)}});w(this,"fetch_remote_config",function(c,d,g){var h=null,m=null,l=null;c&&(g||"function"!==typeof c?Array.isArray(c)&&(h=c):l=c);d&&(g||"function"!==typeof d?Array.isArray(d)&&
(m=d):l=d);l||"function"!==typeof g||(l=g);a.useExplicitRcApi?(b(e,a).call(a,f.INFO,"fetch_remote_config, Fetching remote config"),c=a.rcAutoOptinAb?1:0,b(Ac,a).call(a,h,m,c,null,l)):(b(e,a).call(a,f.WARNING,"fetch_remote_config, Fetching remote config, with legacy API"),b(Ac,a).call(a,h,m,null,"legacy",l))});p(this,Ac,function(c,d,g,h,m){b(e,a).call(a,f.INFO,"fetch_remote_config_explicit, Fetching sequence initiated");var l={method:"rc",av:a.app_version};c&&(l.keys=JSON.stringify(c));d&&(l.omit_keys=
JSON.stringify(d));var r;"legacy"===h&&(l.method="fetch_remote_config");0===g&&(l.oi=0);1===g&&(l.oi=1);"function"===typeof m&&(r=m);a.check_consent("sessions")&&(l.metrics=JSON.stringify(b(Gb,a).call(a)));a.check_consent("remote-config")?(b(ab,a).call(a,l),b(ia,a).call(a,"fetch_remote_config_explicit",a.url+b(Na,a),l,function(u,y,D){if(!u){try{var O=JSON.parse(D);if(l.keys||l.omit_keys)for(var P in O)b(Z,a)[P]=O[P];else k(Z,a,O);b(z,a).call(a,"cly_remote_configs",b(Z,a))}catch(Q){b(e,a).call(a,f.ERROR,
"fetch_remote_config_explicit, Had an issue while parsing the response: "+Q)}r&&(b(e,a).call(a,f.INFO,"fetch_remote_config_explicit, Callback function is provided"),r(u,b(Z,a)))}},!0)):(b(e,a).call(a,f.ERROR,"fetch_remote_config_explicit, Remote config requires explicit consent"),r&&r(Error("Remote config requires explicit consent"),b(Z,a)))});w(this,"enrollUserToAb",function(c){b(e,a).call(a,f.INFO,"enrollUserToAb, Providing AB test keys to opt in for");c&&Array.isArray(c)&&0!==c.length?(c={method:"ab",
keys:JSON.stringify(c),av:a.app_version},b(ab,a).call(a,c),b(ia,a).call(a,"enrollUserToAb",a.url+b(Na,a),c,function(d,g,h){if(!d)try{var m=JSON.parse(h);b(e,a).call(a,f.DEBUG,"enrollUserToAb, Parsed the response's result: ["+m.result+"]")}catch(l){b(e,a).call(a,f.ERROR,"enrollUserToAb, Had an issue while parsing the response: "+l)}},!0)):b(e,a).call(a,f.ERROR,"enrollUserToAb, No keys provided")});w(this,"get_remote_config",function(c){b(e,a).call(a,f.INFO,"get_remote_config, Getting remote config from storage");
return"undefined"!==typeof c?b(Z,a)[c]:b(Z,a)});p(this,Bc,function(){b(e,a).call(a,f.INFO,"stop_time, Stopping tracking duration");b(wa,a)&&(k(wa,a,!1),k(vb,a,I()-b(oa,a)),k(Qa,a,I()-b(Pa,a)))});p(this,cc,function(){b(e,a).call(a,f.INFO,"start_time, Starting tracking duration");b(wa,a)||(k(wa,a,!0),k(oa,a,I()-b(vb,a)),k(Pa,a,I()-b(Qa,a)),k(Qa,a,0),b(Fc,a).call(a))});w(this,"track_sessions",function(){if(A){b(e,a).call(a,f.INFO,"track_session, Starting tracking user session");a.begin_session();b(cc,
a).call(a);F(window,"beforeunload",function(){b(Ea,a).call(a);b(Da,a).call(a);a.end_session()});var c="hidden",d=function(){document[c]||!document.hasFocus()?b(Bc,a).call(a):b(cc,a).call(a)};F(window,"focus",d);F(window,"blur",d);F(window,"pageshow",d);F(window,"pagehide",d);"onfocusin"in document&&(F(window,"focusin",d),F(window,"focusout",d));c in document?document.addEventListener("visibilitychange",d):"mozHidden"in document?(c="mozHidden",document.addEventListener("mozvisibilitychange",d)):"webkitHidden"in
document?(c="webkitHidden",document.addEventListener("webkitvisibilitychange",d)):"msHidden"in document&&(c="msHidden",document.addEventListener("msvisibilitychange",d));d=function(){b(Fa,a)>=b(Ra,a)&&b(cc,a).call(a);k(Fa,a,0)};F(window,"mousemove",d);F(window,"click",d);F(window,"keydown",d);F(window,"scroll",d);setInterval(function(){var g;k(Fa,a,(g=b(Fa,a),g++,g));b(Fa,a)>=b(Ra,a)&&b(Bc,a).call(a)},6E4)}else b(e,a).call(a,f.WARNING,"track_sessions, window object is not available. Not tracking sessions.")});
w(this,"track_pageview",function(c,d,g){if(A||c)if(b(Ab,a))if(b(e,a).call(a,f.INFO,"track_pageview, Tracking page views"),b(e,a).call(a,f.VERBOSE,"track_pageview, last view is:["+b(ba,a)+"], current view ID is:["+b(ya,a)+"], previous view ID is:["+b(jb,a)+"]"),b(ba,a)&&b(xb,a)&&(b(e,a).call(a,f.DEBUG,"track_pageview, Scroll registry triggered"),b(mc,a).call(a),k(Ta,a,!0),k(Ua,a,0)),b(hc,a).call(a),k(jb,a,b(ya,a)),k(ya,a,oc()),(c=C(c,b(K,a),"track_pageview",b(e,a)))&&Array.isArray(c)&&(d=c,c=null),
c||(c=a.getViewName()),void 0===c||""===c)b(e,a).call(a,f.ERROR,"track_pageview, No page name to track (it is either undefined or empty string). No page view can be tracked.");else if(null===c)b(e,a).call(a,f.ERROR,"track_pageview, View name returned as null. Page view will be ignored.");else{if(d&&d.length)for(var h=0;h<d.length;h++)try{if((new RegExp(d[h])).test(c)){b(e,a).call(a,f.INFO,"track_pageview, Ignoring the page: "+c);return}}catch(u){b(e,a).call(a,f.ERROR,"track_pageview, Problem with finding ignore list item: "+
d[h]+", error: "+u)}h={name:c,visit:1,view:a.getViewUrl()};h=ua(h,b(K,a),b(H,a),b(ca,a),"track_pageview",b(e,a));a.track_domains&&(h.domain=window.location.hostname);if(b(pa,a))if(b(fa,a))b(Ga,a)&&(k(Ga,a,!1),h.start=1);else{var m=b(B,a).call(a,"cly_session");if(!m||parseInt(m)<=I())k(Ga,a,!1),h.start=1}else A&&"undefined"!==typeof document.referrer&&document.referrer.length&&(m=Yc.exec(document.referrer))&&m[11]&&m[11]!==window.location.hostname&&(h.start=1);if(b(qa,a)&&Object.keys(b(qa,a)).length){b(e,
a).call(a,f.INFO,"track_pageview, Adding fresh utm tags to segmentation:["+JSON.stringify(b(qa,a))+"]");for(var l in b(qa,a))"undefined"===typeof h["utm_"+l]&&(h["utm_"+l]=b(qa,a)[l])}A&&b(jc,a).call(a)&&(b(e,a).call(a,f.INFO,"track_pageview, Adding referrer to segmentation:["+document.referrer+"]"),h.referrer=document.referrer);if(g){g=ua(g,b(K,a),b(H,a),b(ca,a),"track_pageview",b(e,a));for(var r in g)"undefined"===typeof h[r]&&(h[r]=g[r])}a.check_consent("views")?(b(ha,a).call(a,{key:U.VIEW,segmentation:h},
b(ya,a)),k(ba,a,c),k(Pa,a,I()),b(e,a).call(a,f.VERBOSE,"track_pageview, last view is assigned:["+b(ba,a)+"]")):b(la,a).track_pageview=[c,d,g]}else b(e,a).call(a,f.WARNING,"track_pageview, View tracking is disabled by the server config. Not tracking page views.");else b(e,a).call(a,f.WARNING,"track_pageview, window object is not available. Not tracking page views as page name is not provided.")});w(this,"track_view",function(c,d,g){b(e,a).call(a,f.INFO,"track_view, Initiating tracking page views");
a.track_pageview(c,d,g)});w(this,"track_clicks",function(c){if(A){b(e,a).call(a,f.INFO,"track_clicks, Starting to track clicks");c&&b(e,a).call(a,f.INFO,"track_clicks, Tracking the specified children:["+c+"]");c=c||document;var d=!0;F(c,"click",function(g){if(d){d=!1;uc(g);if("undefined"!==typeof g.pageX&&"undefined"!==typeof g.pageY){var h=Lb(),m=vc();a.check_consent("clicks")&&(g={type:"click",x:g.pageX,y:g.pageY,width:m,height:h,view:a.getViewUrl()},g=ua(g,b(K,a),b(H,a),b(ca,a),"processClick",
b(e,a)),a.track_domains&&(g.domain=window.location.hostname),b(ha,a).call(a,{key:U.ACTION,segmentation:g}))}setTimeout(function(){d=!0},1E3)}})}else b(e,a).call(a,f.WARNING,"track_clicks, window object is not available. Not tracking clicks.")});w(this,"track_scrolls",function(c){A?(b(e,a).call(a,f.INFO,"track_scrolls, Starting to track scrolls"),c&&b(e,a).call(a,f.INFO,"track_scrolls, Tracking the specified children"),c=c||window,k(Ta,a,!0),k(xb,a,!0),F(c,"scroll",b(Kc,a)),F(c,"beforeunload",b(mc,
a))):b(e,a).call(a,f.WARNING,"track_scrolls, window object is not available. Not tracking scrolls.")});w(this,"track_links",function(c){A?(b(e,a).call(a,f.INFO,"track_links, Starting to track clicks to links"),c&&b(e,a).call(a,f.INFO,"track_links, Tracking the specified children"),c=c||document,F(c,"click",function(d){a:{var g=Kb(d);var h;for(h="A";g;){if(g.nodeName.toUpperCase()===h)break a;g=g.parentElement}g=void 0}g&&(uc(d),a.check_consent("clicks")&&b(ha,a).call(a,{key:"linkClick",segmentation:{href:g.href,
text:g.innerText,id:g.id,view:a.getViewUrl()}}))})):b(e,a).call(a,f.WARNING,"track_links, window object is not available. Not tracking links.")});w(this,"uploadUserProfilePicture",function(c){if(A)if(c&&"object"===T(c)&&c.type&&0===c.type.indexOf("image"))if("undefined"===typeof FileReader)b(e,a).call(a,f.ERROR,"uploadUserProfilePicture: FileReader is not available in this environment.");else{var d=new FileReader;d.onerror=function(){b(e,a).call(a,f.ERROR,"uploadUserProfilePicture: Failed to read the provided image file.")};
d.onload=function(){var g=d.result;if("string"!==typeof g)b(e,a).call(a,f.ERROR,"uploadUserProfilePicture: Unable to process the selected image.");else{var h=g.indexOf(",");(g=-1===h?g:g.substring(h+1))?(b(V,a).call(a,{__imageUpload:!0,imageData:g,imageName:c.name||"avatar",imageType:c.type||"application/octet-stream",user_details:"{}"}),b(e,a).call(a,f.INFO,"uploadUserProfilePicture: Image upload request queued.")):b(e,a).call(a,f.ERROR,"uploadUserProfilePicture: Invalid image data received.")}};
d.readAsDataURL(c)}else b(e,a).call(a,f.ERROR,"uploadUserProfilePicture: Provided file is not an image.");else b(e,a).call(a,f.ERROR,"uploadUserProfilePicture: Browser environment required.")});w(this,"track_forms",function(c,d){if(A){b(e,a).call(a,f.INFO,"track_forms, Starting to track form submissions. DOM object provided:["+!!c+"] Tracking hidden inputs :["+!!d+"]");c=c||document;var g=function(h){return h.name||h.id||h.type||h.nodeName};F(c,"submit",function(h){h=Kb(h);var m={id:h.attributes.id&&
h.attributes.id.nodeValue,name:h.attributes.name&&h.attributes.name.nodeValue,action:h.attributes.action&&h.attributes.action.nodeValue,method:h.attributes.method&&h.attributes.method.nodeValue,view:a.getViewUrl()},l;if("undefined"!==typeof h.elements){for(var r=0;r<h.elements.length;r++)(l=h.elements[r])&&"password"!==l.type&&-1===l.className.indexOf("cly_user_ignore")&&("undefined"===typeof m["input:"+g(l)]&&(m["input:"+g(l)]=[]),"select"===l.nodeName.toLowerCase()?"undefined"!==typeof l.multiple?
m["input:"+g(l)].push(Oc(l)):m["input:"+g(l)].push(l.options[l.selectedIndex].value):"input"===l.nodeName.toLowerCase()?"undefined"!==typeof l.type?"checkbox"===l.type.toLowerCase()||"radio"===l.type.toLowerCase()?l.checked&&m["input:"+g(l)].push(l.value):("hidden"!==l.type.toLowerCase()||d)&&m["input:"+g(l)].push(l.value):m["input:"+g(l)].push(l.value):"textarea"===l.nodeName.toLowerCase()?m["input:"+g(l)].push(l.value):"undefined"!==typeof l.value&&m["input:"+g(l)].push(l.value));for(var u in m)m[u]&&
"function"===typeof m[u].join&&(m[u]=m[u].join(", "))}a.check_consent("forms")&&b(ha,a).call(a,{key:"formSubmit",segmentation:m})})}else b(e,a).call(a,f.WARNING,"track_forms, window object is not available. Not tracking forms.")});w(this,"collect_from_forms",function(c,d){A?(b(e,a).call(a,f.INFO,"collect_from_forms, Starting to collect possible user data. DOM object provided:["+!!c+"] Submitting custom user property:["+!!d+"]"),c=c||document,F(c,"submit",function(g){g=Kb(g);var h={},m=!1,l;if("undefined"!==
typeof g.elements){var r={},u=c.getElementsByTagName("LABEL"),y;for(y=0;y<u.length;y++)u[y].htmlFor&&""!==u[y].htmlFor&&(r[u[y].htmlFor]=u[y].innerText||u[y].textContent||u[y].innerHTML);for(y=0;y<g.elements.length;y++)if((l=g.elements[y])&&"password"!==l.type&&-1===l.className.indexOf("cly_user_ignore"))if(u="","select"===l.nodeName.toLowerCase()?u="undefined"!==typeof l.multiple?Oc(l):l.options[l.selectedIndex].value:"input"===l.nodeName.toLowerCase()?"undefined"!==typeof l.type?"checkbox"===l.type.toLowerCase()||
"radio"===l.type.toLowerCase()?l.checked&&(u=l.value):u=l.value:u=l.value:"textarea"===l.nodeName.toLowerCase()?u=l.value:"undefined"!==typeof l.value&&(u=l.value),l.className&&-1!==l.className.indexOf("cly_user_")){var D=l.className.split(" ");for(l=0;l<D.length;l++)if(0===D[l].indexOf("cly_user_")){h[D[l].replace("cly_user_","")]=u;m=!0;break}}else if(l.type&&"email"===l.type.toLowerCase()||l.name&&-1!==l.name.toLowerCase().indexOf("email")||l.id&&-1!==l.id.toLowerCase().indexOf("email")||l.id&&
r[l.id]&&-1!==r[l.id].toLowerCase().indexOf("email")||/[^@\s]+@[^@\s]+\.[^@\s]+/.test(u))h.email||(h.email=u),m=!0;else if(l.name&&-1!==l.name.toLowerCase().indexOf("username")||l.id&&-1!==l.id.toLowerCase().indexOf("username")||l.id&&r[l.id]&&-1!==r[l.id].toLowerCase().indexOf("username"))h.username||(h.username=u),m=!0;else if(l.name&&(-1!==l.name.toLowerCase().indexOf("tel")||-1!==l.name.toLowerCase().indexOf("phone")||-1!==l.name.toLowerCase().indexOf("number"))||l.id&&(-1!==l.id.toLowerCase().indexOf("tel")||
-1!==l.id.toLowerCase().indexOf("phone")||-1!==l.id.toLowerCase().indexOf("number"))||l.id&&r[l.id]&&(-1!==r[l.id].toLowerCase().indexOf("tel")||-1!==r[l.id].toLowerCase().indexOf("phone")||-1!==r[l.id].toLowerCase().indexOf("number")))h.phone||(h.phone=u),m=!0;else if(l.name&&(-1!==l.name.toLowerCase().indexOf("org")||-1!==l.name.toLowerCase().indexOf("company"))||l.id&&(-1!==l.id.toLowerCase().indexOf("org")||-1!==l.id.toLowerCase().indexOf("company"))||l.id&&r[l.id]&&(-1!==r[l.id].toLowerCase().indexOf("org")||
-1!==r[l.id].toLowerCase().indexOf("company")))h.organization||(h.organization=u),m=!0;else if(l.name&&-1!==l.name.toLowerCase().indexOf("name")||l.id&&-1!==l.id.toLowerCase().indexOf("name")||l.id&&r[l.id]&&-1!==r[l.id].toLowerCase().indexOf("name"))h.name||(h.name=""),h.name+=u+" ",m=!0}m&&(b(e,a).call(a,f.INFO,"collect_from_forms, Gathered user data",h),d?a.user_details({custom:h}):a.user_details(h))})):b(e,a).call(a,f.WARNING,"collect_from_forms, window object is not available. Not collecting from forms.")});
w(this,"collect_from_facebook",function(c){A?"undefined"!==typeof FB&&FB&&FB.api?(b(e,a).call(a,f.INFO,"collect_from_facebook, Starting to collect possible user data"),FB.api("/me",function(d){var g={};d.name&&(g.name=d.name);d.email&&(g.email=d.email);"male"===d.gender?g.gender="M":"female"===d.gender&&(g.gender="F");if(d.birthday){var h=d.birthday.split("/").pop();h&&4===h.length&&(g.byear=h)}d.work&&d.work[0]&&d.work[0].employer&&d.work[0].employer.name&&(g.organization=d.work[0].employer.name);
if(c){g.custom={};for(var m in c){h=c[m].split(".");for(var l=d,r=0;r<h.length&&(l=l[h[r]],"undefined"!==typeof l);r++);"undefined"!==typeof l&&(g.custom[m]=l)}}a.user_details(g)})):b(e,a).call(a,f.ERROR,"collect_from_facebook, Facebook SDK is not available"):b(e,a).call(a,f.WARNING,"collect_from_facebook, window object is not available. Not collecting from Facebook.")});w(this,"opt_out",function(){b(e,a).call(a,f.WARNING,"opt_out, Opting out the user. Deprecated function call! Use 'consent' in place of this call.");
a.ignore_visitor=!0;b(z,a).call(a,"cly_ignore",!0)});w(this,"opt_in",function(){b(e,a).call(a,f.WARNING,"opt_in, Opting in the user. Deprecated function call! Use 'consent' in place of this call.");b(z,a).call(a,"cly_ignore",!1);a.ignore_visitor=!1;b(Cc,a).call(a);a.ignore_visitor||b(ib,a)||b(Fb,a).call(a)});w(this,"report_feedback",function(c){b(e,a).call(a,f.WARNING,"report_feedback, Deprecated function call! Use 'recordRatingWidgetWithID' or 'reportFeedbackWidgetManually' in place of this call. Call will be redirected to 'recordRatingWidgetWithID' now!");
a.recordRatingWidgetWithID(c)});w(this,"recordRatingWidgetWithID",function(c){b(e,a).call(a,f.INFO,"recordRatingWidgetWithID, Providing information about user with ID: [ "+c.widget_id+" ]");if(a.check_consent("star-rating"))if(c.widget_id)if(c.rating){var d={key:U.STAR_RATING,count:1,segmentation:{}};d.segmentation=rb(c,"widget_id contactMe platform app_version rating email comment".split(" "));d.segmentation.app_version||(d.segmentation.app_version=a.metrics._app_version||a.app_version);5<d.segmentation.rating?
(b(e,a).call(a,f.WARNING,"recordRatingWidgetWithID, You have entered a rating higher than 5. Changing it back to 5 now."),d.segmentation.rating=5):1>d.segmentation.rating&&(b(e,a).call(a,f.WARNING,"recordRatingWidgetWithID, You have entered a rating lower than 1. Changing it back to 1 now."),d.segmentation.rating=1);b(e,a).call(a,f.INFO,"recordRatingWidgetWithID, Reporting Rating Widget: ",d);b(ha,a).call(a,d)}else b(e,a).call(a,f.ERROR,"recordRatingWidgetWithID, Rating Widget must contain rating property");
else b(e,a).call(a,f.ERROR,"recordRatingWidgetWithID, Rating Widget must contain widget_id property")});w(this,"reportFeedbackWidgetManually",function(c,d,g){if(a.check_consent("feedback"))if(c&&d)if(c._id)if(b(N,a))b(e,a).call(a,f.ERROR,"reportFeedbackWidgetManually, Feedback Widgets can not be reported in offline mode");else{b(e,a).call(a,f.INFO,"reportFeedbackWidgetManually, Providing information about user with, provided result of the widget with  ID: [ "+c._id+" ] and type: ["+c.type+"]");var h=
[];d=c.type;if("nps"===d){if(g){if(!g.rating){b(e,a).call(a,f.ERROR,"reportFeedbackWidgetManually, Widget must contain rating property");return}g.rating=Math.round(g.rating);10<g.rating?(b(e,a).call(a,f.WARNING,"reportFeedbackWidgetManually, You have entered a rating higher than 10. Changing it back to 10 now."),g.rating=10):0>g.rating&&(b(e,a).call(a,f.WARNING,"reportFeedbackWidgetManually, You have entered a rating lower than 0. Changing it back to 0 now."),g.rating=0);h=["rating","comment"]}var m=
U.NPS}else if("survey"===d){if(g){if(1>Object.keys(g).length){b(e,a).call(a,f.ERROR,"reportFeedbackWidgetManually, Widget should have answers to be reported");return}h=Object.keys(g)}m=U.SURVEY}else if("rating"===d){if(g){if(!g.rating){b(e,a).call(a,f.ERROR,"reportFeedbackWidgetManually, Widget must contain rating property");return}g.rating=Math.round(g.rating);5<g.rating?(b(e,a).call(a,f.WARNING,"reportFeedbackWidgetManually, You have entered a rating higher than 5. Changing it back to 5 now."),
g.rating=5):1>g.rating&&(b(e,a).call(a,f.WARNING,"reportFeedbackWidgetManually, You have entered a rating lower than 1. Changing it back to 1 now."),g.rating=1);h=["rating","comment","email","contactMe"]}m=U.STAR_RATING}else{b(e,a).call(a,f.ERROR,"reportFeedbackWidgetManually, Widget has an unacceptable type");return}c={key:m,count:1,segmentation:{widget_id:c._id,platform:a.platform,app_version:a.metrics._app_version||a.app_version}};if(null===g)c.segmentation.closed=1;else{m=c.segmentation;if(h){for(var l,
r=0,u=h.length;r<u;r++)l=h[r],"undefined"!==typeof g[l]&&(m[l]=g[l]);g=m}else g=void 0;c.segmentation=g}b(e,a).call(a,f.INFO,"reportFeedbackWidgetManually, Reporting "+d+": ",c);b(ha,a).call(a,c)}else b(e,a).call(a,f.ERROR,"reportFeedbackWidgetManually, Feedback Widgets must contain _id property");else b(e,a).call(a,f.ERROR,"reportFeedbackWidgetManually, Widget data and/or Widget object not provided. Aborting.")});w(this,"show_feedback_popup",function(c){A?(b(e,a).call(a,f.WARNING,"show_feedback_popup, Deprecated function call! Use 'presentRatingWidgetWithID' in place of this call. Call will be redirected now!"),
presentRatingWidgetWithID(c)):b(e,a).call(a,f.WARNING,"show_feedback_popup, window object is not available. Not showing feedback popup.")});w(this,"presentRatingWidgetWithID",function(c){A?(b(e,a).call(a,f.INFO,"presentRatingWidgetWithID, Showing rating widget popup for the widget with ID: [ "+c+" ]"),a.check_consent("star-rating")&&(b(N,a)?b(e,a).call(a,f.ERROR,"presentRatingWidgetWithID, Cannot show ratingWidget popup in offline mode"):b(ia,a).call(a,"presentRatingWidgetWithID,",a.url+"/o/feedback/widget",
{widget_id:c,av:a.app_version},function(d,g,h){if(!d)try{var m=JSON.parse(h);b(gc,a).call(a,m,!1)}catch(l){b(e,a).call(a,f.ERROR,"presentRatingWidgetWithID, JSON parse failed: "+l)}},!0))):b(e,a).call(a,f.WARNING,"presentRatingWidgetWithID, window object is not available. Not showing rating widget popup.")});w(this,"initialize_feedback_popups",function(c){A?(b(e,a).call(a,f.WARNING,"initialize_feedback_popups, Deprecated function call! Use 'initializeRatingWidgets' in place of this call. Call will be redirected now!"),
a.initializeRatingWidgets(c)):b(e,a).call(a,f.WARNING,"initialize_feedback_popups, window object is not available. Not initializing feedback popups.")});w(this,"initializeRatingWidgets",function(c){if(A){if(b(e,a).call(a,f.INFO,"initializeRatingWidgets, Initializing rating widget with provided widget IDs:[ "+c+"]"),a.check_consent("star-rating")){c||(c=b(B,a).call(a,"cly_fb_widgets"));for(var d=document.getElementsByClassName("countly-feedback-sticker");0<d.length;)d[0].remove();b(ia,a).call(a,"initializeRatingWidgets,",
a.url+"/o/feedback/multiple-widgets-by-id",{widgets:JSON.stringify(c),av:a.app_version},function(g,h,m){if(!g)try{var l=JSON.parse(m);for(g=0;g<l.length;g++)if("true"===l[g].is_active){var r=l[g].target_devices,u=tc();if(r[u])if("string"===typeof l[g].hide_sticker&&(l[g].hide_sticker="true"===l[g].hide_sticker),"all"!==l[g].target_page||l[g].hide_sticker){var y=l[g].target_pages;for(h=0;h<y.length;h++){var D=y[h].substr(0,y[h].length-1)===window.location.pathname.substr(0,y[h].length-1),O=y[h]===
window.location.pathname;(y[h].includes("*")&&D||O)&&!l[g].hide_sticker&&b(gc,a).call(a,l[g],!0)}}else b(gc,a).call(a,l[g],!0)}}catch(P){b(e,a).call(a,f.ERROR,"initializeRatingWidgets, JSON parse error: "+P)}},!0)}}else b(e,a).call(a,f.WARNING,"initializeRatingWidgets, window object is not available. Not initializing rating widgets.")});w(this,"enable_feedback",function(c){A?(b(e,a).call(a,f.WARNING,"enable_feedback, Deprecated function call! Use 'enableRatingWidgets' in place of this call. Call will be redirected now!"),
a.enableRatingWidgets(c)):b(e,a).call(a,f.WARNING,"enable_feedback, window object is not available. Not enabling feedback.")});w(this,"enableRatingWidgets",function(c){A?(b(e,a).call(a,f.INFO,"enableRatingWidgets, Enabling rating widget with params:",c),a.check_consent("star-rating")&&(b(N,a)?b(e,a).call(a,f.ERROR,"enableRatingWidgets, Cannot enable rating widgets in offline mode"):(b(z,a).call(a,"cly_fb_widgets",c.popups||c.widgets),Mb(a.url+"/star-rating/stylesheets/countly-feedback-web.css"),c=
c.popups||c.widgets,0<c.length?(document.body.insertAdjacentHTML("beforeend",'<div id="cfbg"></div>'),a.initializeRatingWidgets(c)):b(e,a).call(a,f.ERROR,"enableRatingWidgets, You should provide at least one widget id as param. Read documentation for more detail. https://resources.count.ly/plugins/feedback")))):b(e,a).call(a,f.WARNING,"enableRatingWidgets, window object is not available. Not enabling rating widgets.")});p(this,dc,function(c,d){b(e,a).call(a,f.INFO,"showWidget, Showing ".concat(c,
" widget, nameIDorTag:[").concat(d,"]"));a.get_available_feedback_widgets(function(g,h){h?b(e,a).call(a,f.ERROR,"showWidget, Error while getting feedback widgets list: ".concat(h)):(h=g.find(function(m){return m.type===c}),d&&"string"===typeof d&&(g=g.find(function(m){return m.type===c&&(m.name===d||m._id===d||m.tg.includes(d))}))&&(h=g,b(e,a).call(a,f.VERBOSE,"showWidget, Found ".concat(c," widget by name, id, or tag: [").concat(JSON.stringify(g),"]"))),h?a.present_feedback_widget(h,null,null,null):
b(e,a).call(a,f.ERROR,"showWidget, No ".concat(c," widget found.")))})});w(this,"feedback",{showNPS:function(c){return b(dc,a).call(a,"nps",c)},showSurvey:function(c){return b(dc,a).call(a,"survey",c)},showRating:function(c){return b(dc,a).call(a,"rating",c)}});w(this,"get_available_feedback_widgets",function(c){b(e,a).call(a,f.INFO,"get_available_feedback_widgets, Getting the feedback list, callback function is provided:["+!!c+"]");if(a.check_consent("feedback"))if(b(N,a))b(e,a).call(a,f.ERROR,"get_available_feedback_widgets, Cannot enable feedback widgets in offline mode.");
else{var d=a.url+b(Na,a),g={method:"feedback",device_id:a.device_id,app_key:a.app_key,av:a.app_version};b(ia,a).call(a,"get_available_feedback_widgets,",d,g,function(h,m,l){if(h)c&&c(null,h);else try{var r=JSON.parse(l).result||[];c&&c(r,null)}catch(u){b(e,a).call(a,f.ERROR,"get_available_feedback_widgets, Error while parsing feedback widgets list: "+u),c&&c(null,u)}},!1)}else c&&c(null,Error("Consent for feedback not provided."))});w(this,"getFeedbackWidgetData",function(c,d){if(c.type)if(b(e,a).call(a,
f.INFO,"getFeedbackWidgetData, Retrieving data for: ["+JSON.stringify(c)+"], callback function is provided:["+!!d+"]"),a.check_consent("feedback"))if(b(N,a))b(e,a).call(a,f.ERROR,"getFeedbackWidgetData, Cannot enable feedback widgets in offline mode.");else{var g=a.url,h={widget_id:c._id,shown:1,sdk_version:b(ra,a),sdk_name:b(za,a),platform:a.platform,app_version:a.app_version};if("nps"===c.type)g+="/o/surveys/nps/widget";else if("survey"===c.type)g+="/o/surveys/survey/widget";else if("rating"===
c.type)g+="/o/surveys/rating/widget";else{b(e,a).call(a,f.ERROR,"getFeedbackWidgetData, Unknown type info: ["+c.type+"]");return}b(ia,a).call(a,"getFeedbackWidgetData,",g,h,function(m,l,r){if(m)d&&d(null,m);else try{var u=JSON.parse(r);d&&d(u,null)}catch(y){b(e,a).call(a,f.ERROR,"getFeedbackWidgetData, Error while parsing feedback widgets list: "+y),d&&d(null,y)}},!0)}else d&&d(null,Error("Consent for feedback not provided."));else b(e,a).call(a,f.ERROR,"getFeedbackWidgetData, Expected the provided widget object to have a type but got: ["+
JSON.stringify(c)+"], aborting.")});w(this,"present_feedback_widget",function(c,d,g,h){if(A){if(b(e,a).call(a,f.INFO,"present_feedback_widget, Presenting the feedback widget by appending to the element with ID: [ "+d+" ] and className: [ "+g+" ]"),a.check_consent("feedback"))if(!c||"object"!==T(c)||Array.isArray(c))b(e,a).call(a,f.ERROR,"present_feedback_widget, Please provide at least one feedback widget object.");else{b(e,a).call(a,f.INFO,"present_feedback_widget, Adding segmentation to feedback widgets:["+
JSON.stringify(h)+"]");h&&"object"===T(h)&&0!==Object.keys(h).length||(b(e,a).call(a,f.DEBUG,"present_feedback_widget, Segmentation is not an object or empty"),h=null);try{var m=a.url;if("nps"===c.type)b(e,a).call(a,f.DEBUG,"present_feedback_widget, Widget type: nps."),m+="/feedback/nps";else if("survey"===c.type)b(e,a).call(a,f.DEBUG,"present_feedback_widget, Widget type: survey."),m+="/feedback/survey";else if("rating"===c.type)b(e,a).call(a,f.DEBUG,"present_feedback_widget, Widget type: rating."),
m+="/feedback/rating";else{b(e,a).call(a,f.ERROR,"present_feedback_widget, Feedback widget only accepts nps, rating and survey types.");return}var l=window.origin||window.location.origin;if("rating"===c.type){b(e,a).call(a,f.DEBUG,"present_feedback_widget, Loading css for rating widget.");var r="ratings";Mb(a.url+"/star-rating/stylesheets/countly-feedback-web.css")}else b(e,a).call(a,f.DEBUG,"present_feedback_widget, Loading css for survey or nps."),Mb(a.url+"/surveys/stylesheets/countly-surveys.css"),
r="surveys";m+="?widget_id="+c._id;m+="&app_key="+a.app_key;m+="&device_id="+a.device_id;m+="&sdk_name="+b(za,a);m+="&platform="+a.platform;m+="&app_version="+a.app_version;m+="&sdk_version="+b(ra,a);var u={tc:1};h&&(u.sg=h);m+="&custom="+JSON.stringify(u);m+="&origin="+l;m+="&widget_v=web";var y=document.createElement("iframe");y.src=m;y.name="countly-"+r+"-iframe";y.id="countly-"+r+"-iframe";var D=!1;y.onload=function(){D&&(document.getElementById("countly-"+r+"-wrapper-"+c._id).style.display="none",
document.getElementById("csbg").style.display="none");D=!0;b(e,a).call(a,f.DEBUG,"present_feedback_widget, Loaded iframe.")};for(var O=document.getElementById("csbg");O;)O.remove(),O=document.getElementById("csbg"),b(e,a).call(a,f.DEBUG,"present_feedback_widget, Removing past overlay.");var P=document.getElementsByClassName("countly-"+r+"-wrapper");for(h=0;h<P.length;h++)P[h].remove(),b(e,a).call(a,f.DEBUG,"present_feedback_widget, Removed a wrapper.");P=document.createElement("div");h="countly-"+
r+"-wrapper";P.className=h+" "+h+"--"+c.type;P.id="countly-"+r+"-wrapper-"+c._id;"survey"===c.type&&(P.className=P.className+" "+c.appearance.position);var Q=document.body;h=!1;d&&(document.getElementById(d)?(Q=document.getElementById(d),h=!0):b(e,a).call(a,f.ERROR,"present_feedback_widget, Provided ID not found."));h||g&&(document.getElementsByClassName(g)[0]?Q=document.getElementsByClassName(g)[0]:b(e,a).call(a,f.ERROR,"present_feedback_widget, Provided class not found."));Q.insertAdjacentHTML("beforeend",
'<div id="csbg"></div>');Q.appendChild(P);if("rating"===c.type){var aa=document.createElement("div");aa.className="countly-ratings-overlay";aa.id="countly-ratings-overlay-"+c._id;P.appendChild(aa);b(e,a).call(a,f.DEBUG,"present_feedback_widget, appended the rating overlay to wrapper");F(document.getElementById("countly-ratings-overlay-"+c._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+c._id).style.display="none"})}P.appendChild(y);b(e,a).call(a,f.DEBUG,"present_feedback_widget, Appended the iframe");
F(window,"message",function(E){var W={};try{W=JSON.parse(E.data)}catch(ea){b(e,a).call(a,f.ERROR,"present_feedback_widget, Error while parsing message body "+ea)}!0===W.close&&(b(e,a).call(a,f.DEBUG,"present_feedback_widget, Received message from widget with origin: ["+E.origin+"] and data: ["+E.data+"]"),document.getElementById("countly-"+r+"-wrapper-"+c._id).style.display="none",document.getElementById("csbg").style.display="none",b(e,a).call(a,f.DEBUG,"present_feedback_widget, Closed the widget"))});
var X=function(E){document.getElementById("countly-surveys-wrapper-"+E._id).style.display="block";document.getElementById("csbg").style.display="block"},nc=function(E){for(var W=document.getElementsByClassName("countly-feedback-sticker");0<W.length;)b(e,a).call(a,f.VERBOSE,"present_feedback_widget, Removing old stickers"),W[0].remove();E.appearance.hideS||(b(e,a).call(a,f.DEBUG,"present_feedback_widget, handling the sticker as it was not set to hidden"),W=document.createElement("div"),W.innerText=
E.appearance.text,W.style.color=7>E.appearance.text_color.length?"#"+E.appearance.text_color:E.appearance.text_color,W.style.backgroundColor=7>E.appearance.bg_color.length?"#"+E.appearance.bg_color:E.appearance.bg_color,W.className="countly-feedback-sticker  "+E.appearance.position+"-"+E.appearance.size,W.id="countly-feedback-sticker-"+E._id,document.body.appendChild(W),F(document.getElementById("countly-feedback-sticker-"+E._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+
E._id).style.display="flex";document.getElementById("csbg").style.display="block"}));F(document.getElementById("countly-feedback-close-icon-"+E._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+E._id).style.display="none";document.getElementById("csbg").style.display="none"})};if("survey"===c.type){var Y=!1;switch(c.showPolicy){case "afterPageLoad":"complete"===document.readyState?Y||(Y=!0,X(c)):F(document,"readystatechange",function(E){"complete"!==E.target.readyState||Y||
(Y=!0,X(c))});break;case "afterConstantDelay":setTimeout(function(){Y||(Y=!0,X(c))},1E4);break;case "onAbandon":"complete"===document.readyState?F(document,"mouseleave",function(){Y||(Y=!0,X(c))}):F(document,"readystatechange",function(E){"complete"===E.target.readyState&&F(document,"mouseleave",function(){Y||(Y=!0,X(c))})});break;case "onScrollHalfwayDown":F(window,"scroll",function(){if(!Y){var E=Math.max(window.scrollY,document.body.scrollTop,document.documentElement.scrollTop),W=Lb();E>=W/2&&
(Y=!0,X(c))}});break;default:Y||(Y=!0,X(c))}}else if("nps"===c.type)document.getElementById("countly-"+r+"-wrapper-"+c._id).style.display="block",document.getElementById("csbg").style.display="block";else if("rating"===c.type){var Ka=!1;"complete"===document.readyState?Ka||(Ka=!0,nc(c)):F(document,"readystatechange",function(E){"complete"!==E.target.readyState||Ka||(Ka=!0,nc(c))})}}catch(E){b(e,a).call(a,f.ERROR,"present_feedback_widget, Something went wrong while presenting the widget: "+E)}}}else b(e,
a).call(a,f.WARNING,"present_feedback_widget, window object is not available. Not presenting feedback widget.")});w(this,"recordError",function(c,d,g){if(b(Bb,a)){if(b(e,a).call(a,f.INFO,"recordError, Recording error"),a.check_consent("crashes")&&c){g=g||b(ub,a);var h="";"object"===T(c)?"undefined"!==typeof c.stack?h=c.stack:("undefined"!==typeof c.name&&(h+=c.name+":"),"undefined"!==typeof c.message&&(h+=c.message+"\n"),"undefined"!==typeof c.fileName&&(h+="in "+c.fileName+"\n"),"undefined"!==typeof c.lineNumber&&
(h+="on "+c.lineNumber),"undefined"!==typeof c.columnNumber&&(h+=":"+c.columnNumber)):h=c+"";if(h.length>b(Ca,a)*b(Ba,a)){b(e,a).call(a,f.DEBUG,"record_error, Error stack is too long will be truncated");c=h.split("\n");c.length>b(Ba,a)&&(c=c.splice(0,b(Ba,a)));h=0;for(var m=c.length;h<m;h++)c[h].length>b(Ca,a)&&(c[h]=c[h].substring(0,b(Ca,a)));h=c.join("\n")}d=!!d;c=b(Gb,a).call(a);h={_resolution:c._resolution,_error:h,_app_version:c._app_version,_run:I()-b(Nb,a),_not_os_specific:!0,_javascript:!0};
if(m=navigator.battery||navigator.webkitBattery||navigator.mozBattery||navigator.msBattery)h._bat=Math.floor(100*m.level);"undefined"!==typeof navigator.onLine&&(h._online=!!navigator.onLine);A&&(h._background=!document.hasFocus());0<b(va,a).length&&(h._logs=b(va,a).join("\n"));k(va,a,[]);h._nonfatal=d;h._view=a.getViewName();"undefined"!==typeof g&&(g=ua(g,b(K,a),b(H,a),b(ca,a),"record_error",b(e,a)),h._custom=g);try{var l=document.createElement("canvas").getContext("experimental-webgl");h._opengl=
l.getParameter(l.VERSION)}catch(r){b(e,a).call(a,f.ERROR,"Could not get the experimental-webgl context: "+r)}d={};d.metrics=JSON.stringify({_ua:c._ua});b(mb,a)&&"function"===typeof b(mb,a)&&(b(e,a).call(a,f.VERBOSE,"recordError, Applying crash filter to:["+JSON.stringify(h)+"]"),h=b(mb,a).call(a,h),b(e,a).call(a,f.VERBOSE,"recordError, Filtered crash object:["+JSON.stringify(h)+"]"));h?(d.crash=JSON.stringify(h),b(V,a).call(a,d)):b(e,a).call(a,f.DEBUG,"recordError, Crash object was filtered out")}}else b(e,
a).call(a,f.WARNING,"recordError, Crash tracking is disabled by the server config. Not tracking errors.")});p(this,Cc,function(){b(e,a).call(a,f.INFO,"checkIgnore, Checking if user or visit should be ignored");a.ignore_prefetch&&A&&"undefined"!==typeof document.visibilityState&&"prerender"===document.visibilityState&&(a.ignore_visitor=!0,b(e,a).call(a,f.DEBUG,"checkIgnore, Ignoring visit due to prerendering"));a.ignore_bots&&Rc()&&(a.ignore_visitor=!0,b(e,a).call(a,f.DEBUG,"checkIgnore, Ignoring visit due to bot"))});
w(this,"content",{enterContentZone:function(){b(Ja,a).call(a)},refreshContentZone:function(){b(ad,a).call(a)},exitContentZone:function(){b(ec,a).call(a)}});p(this,Ja,function(c){A?b(Va,a)&&!c?b(e,a).call(a,f.DEBUG,"content.enterContentZone, Already in content zone"):!b(Zb,a)||4E3>cb()-b(Zb,a)?(b(e,a).call(a,f.DEBUG,"content.enterContentZone, Not enough time passed since initialization"),setTimeout(function(){b(Ja,a).call(a)},4001)):(b(e,a).call(a,f.INFO,"content.enterContentZone, Entering content zone"),
k(Va,a,!0),c||b(Dc,a).call(a),k(kb,a,setInterval(function(){b(Dc,a).call(a)},b(nb,a)))):b(e,a).call(a,f.WARNING,"content.enterContentZone, window object is not available. Not entering content zone.")});p(this,ad,function(){b(Sb,a)?(b(e,a).call(a,f.INFO,"content.refreshContentZone, Refreshing content zone"),b(ec,a).call(a),b(Ea,a).call(a),b(Da,a).call(a),setTimeout(function(){b(Ja,a).call(a)},1E3)):b(e,a).call(a,f.DEBUG,"content.refreshContentZone, Refresh content zone is disabled")});p(this,ec,function(){b(Va,
a)?(b(e,a).call(a,f.INFO,"content.exitContentZone, Exiting content zone"),k(Va,a,!1),b(kb,a)&&(clearInterval(b(kb,a)),b(e,a).call(a,f.DEBUG,"content.exitContentZone, content zone exited"))):b(e,a).call(a,f.DEBUG,"content.exitContentZone, Not in content zone")});p(this,bd,function(){b(e,a).call(a,f.DEBUG,"prepareContentRequest, forming content request");var c=b(Hb,a).call(a,!0),d={l:{},p:{}},g=Math.max(c.width,c.height);c=Math.min(c.width,c.height);d.l.w=g;d.l.h=c;d.p.w=c;d.p.h=g;d={method:"queue",
la:(navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage).split("-")[0],resolution:JSON.stringify(d),cly_ws:1,cly_origin:window.location.origin,dt:tc()};b(ab,a).call(a,d);return d});p(this,Dc,function(){b(e,a).call(a,f.DEBUG,"sendContentRequest, sending content request");var c=b(bd,a).call(a);b(ia,a).call(a,"sendContentRequest,",a.url+b(wc,a),c,function(d,g,h){if(!d)if(h){try{var m=JSON.parse(h)}catch(r){b(e,a).call(a,f.VERBOSE,"sendContentRequest, No content to display or an error while parsing content: "+
r);return}if(m.html&&m.geo){b(cd,a).call(a,m);clearInterval(b(kb,a));window.addEventListener("message",function(r){b(dd,a).call(a,r)});var l;window.addEventListener("resize",function(){clearTimeout(l);l=setTimeout(function(){var r=window.innerWidth,u=window.innerHeight,y=document.getElementById(b(lb,a));y&&y.contentWindow.postMessage({type:"resize",width:r,height:u},"*")},200)})}else b(e,a).call(a,f.VERBOSE,"sendContentRequest, no html content or orientation to display")}else b(e,a).call(a,f.VERBOSE,
"sendContentRequest, no content to display")},!0)});p(this,cd,function(c){try{var d=document.createElement("iframe");d.id=b(lb,a);d.src=c.html;d.style.position="absolute";var g=c.geo.p,h=b(Hb,a).call(a,!0);h.width>=h.height&&(g=c.geo.l);d.style.left=g.x+"px";d.style.top=g.y+"px";d.style.width=g.w+"px";d.style.height=g.h+"px";d.style.border="none";d.style.zIndex="999999";document.body.appendChild(d)}catch(m){b(e,a).call(a,f.ERROR,"displayContent, Error while creating iframe for the content: "+m)}});
p(this,dd,function(c){if(-1!==a.contentWhitelist.indexOf(c.origin)){b(e,a).call(a,f.DEBUG,"interpretContentMessage, Received message from: ["+c.origin+"] with data: ["+JSON.stringify(c.data)+"]");var d=c.data;c=d.close;var g=d.link,h=d.event;d=d.resize_me;if(h){b(e,a).call(a,f.DEBUG,"interpretContentMessage, Received event");1===c&&(b(e,a).call(a,f.DEBUG,"interpretContentMessage, Closing content frame for event"),b(fc,a).call(a));if(!Array.isArray(h)){if("object"===T(h))throw new TypeError('"event" is read-only');
b(e,a).call(a,f.ERROR,"interpretContentMessage, Invalid event type: ["+T(h)+"]");return}for(var m=0;m<h.length;m++)b(ha,a).call(a,h[m])}g&&(1===c&&(b(e,a).call(a,f.DEBUG,"interpretContentMessage, Closing content frame for link"),b(fc,a).call(a)),window.open(g,"_blank"),b(e,a).call(a,f.DEBUG,"interpretContentMessage, Opened link in new tab: [".concat(g,"]")));if(d){b(e,a).call(a,f.DEBUG,"interpretContentMessage, Resizing iframe");h=b(Hb,a).call(a,!0);if(!d.l||!d.p){b(e,a).call(a,f.ERROR,"interpretContentMessage, Invalid resize object");
return}g=d.p;h.width>=h.height&&(g=d.l);d=document.getElementById(b(lb,a));d.style.left=g.x+"px";d.style.top=g.y+"px";d.style.width=g.w+"px";d.style.height=g.h+"px"}1===c&&b(fc,a).call(a)}});p(this,fc,function(){var c=document.getElementById(b(lb,a));c&&(c.remove(),b(e,a).call(a,f.DEBUG,"interpretContentMessage, removed iframe"),b(Va,a)&&b(Ja,a).call(a,!0))});p(this,Da,function(){0<b(R,a).length&&(b(e,a).call(a,f.DEBUG,"Flushing events"),b(V,a).call(a,{events:JSON.stringify(b(R,a))}),k(R,a,[]),b(z,
a).call(a,"cly_event",b(R,a)))});p(this,gc,function(c,d){if(A)if(document.getElementById("countly-feedback-sticker-"+c._id))b(e,a).call(a,f.ERROR,"Widget with same ID exists");else try{var g=document.createElement("div");g.className="countly-iframe-wrapper";g.id="countly-iframe-wrapper-"+c._id;var h=document.createElement("span");h.className="countly-feedback-close-icon";h.id="countly-feedback-close-icon-"+c._id;h.innerText="x";var m=document.createElement("iframe");m.name="countly-feedback-iframe";
m.id="countly-feedback-iframe";m.src=a.url+"/feedback?widget_id="+c._id+"&app_key="+a.app_key+"&device_id="+a.device_id+"&sdk_version="+b(ra,a);document.body.appendChild(g);g.appendChild(h);g.appendChild(m);F(document.getElementById("countly-feedback-close-icon-"+c._id),"click",function(){document.getElementById("countly-iframe-wrapper-"+c._id).style.display="none";document.getElementById("cfbg").style.display="none"});if(d){var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.id=
"feedback-sticker-svg";l.setAttribute("aria-hidden","true");l.setAttribute("data-prefix","far");l.setAttribute("data-icon","grin");l.setAttribute("class","svg-inline--fa fa-grin fa-w-16");l.setAttribute("role","img");l.setAttribute("xmlns","http://www.w3.org/2000/svg");l.setAttribute("viewBox","0 0 496 512");var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.id="smileyPathInStickerSvg";r.setAttribute("fill","white");r.setAttribute("d","M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm105.6-151.4c-25.9 8.3-64.4 13.1-105.6 13.1s-79.6-4.8-105.6-13.1c-9.9-3.1-19.4 5.4-17.7 15.3 7.9 47.1 71.3 80 123.3 80s115.3-32.9 123.3-80c1.6-9.8-7.7-18.4-17.7-15.3zM168 240c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32z");
var u=document.createElement("span");u.innerText=c.trigger_button_text;var y=document.createElement("div");y.style.color=7>c.trigger_font_color.length?"#"+c.trigger_font_color:c.trigger_font_color;y.style.backgroundColor=7>c.trigger_bg_color.length?"#"+c.trigger_bg_color:c.trigger_bg_color;y.className="countly-feedback-sticker  "+c.trigger_position+"-"+c.trigger_size;y.id="countly-feedback-sticker-"+c._id;l.appendChild(r);y.appendChild(l);y.appendChild(u);document.body.appendChild(y);var D=document.getElementById("smileyPathInStickerSvg");
D&&(D.style.fill=7>c.trigger_font_color.length?"#"+c.trigger_font_color:c.trigger_font_color);F(document.getElementById("countly-feedback-sticker-"+c._id),"click",function(){document.getElementById("countly-iframe-wrapper-"+c._id).style.display="block";document.getElementById("cfbg").style.display="block"})}else document.getElementById("countly-iframe-wrapper-"+c._id).style.display="block",document.getElementById("cfbg").style.display="block"}catch(O){b(e,a).call(a,f.ERROR,"Somethings went wrong while element injecting process: "+
O)}else b(e,a).call(a,f.WARNING,"processWidget, window object is not available. Not processing widget.")});p(this,Ec,function(){var c;if("undefined"!==typeof a.onload&&0<a.onload.length){for(c=0;c<a.onload.length;c++)if("function"===typeof a.onload[c])a.onload[c](a);a.onload=[]}});p(this,hc,function(){if(b(ba,a))if(b(Ab,a)){b(e,a).call(a,f.INFO,"reportViewDuration, Reporting view duration for: ["+b(ba,a)+"]");var c={name:b(ba,a)};a.check_consent("views")&&(b(ha,a).call(a,{key:U.VIEW,dur:b(wa,a)?I()-
b(Pa,a):b(Qa,a),segmentation:c},b(ya,a)),k(ba,a,null))}else b(e,a).call(a,f.INFO,"reportViewDuration, View tracking is disabled by the server config. Not tracking view duration");else b(e,a).call(a,f.INFO,"reportViewDuration, No last view, will not report view duration")});p(this,ed,function(){b(e,a).call(a,f.INFO,"getLastView, Getting last view: ["+b(ba,a)+"]");return b(ba,a)});p(this,Fc,function(){if(b(pa,a)){b(e,a).call(a,f.DEBUG,"Extending session");var c=b(B,a).call(a,"cly_session");if(!c||parseInt(c)<=
I())k(fa,a,!1),a.begin_session(!b(Oa,a));b(z,a).call(a,"cly_session",I()+60*b(Sa,a))}else b(e,a).call(a,f.DEBUG,"Will not extend the session as session cookie is disabled")});p(this,ab,function(c){c.app_key=a.app_key;c.device_id=a.device_id;c.sdk_name=b(za,a);c.sdk_version=b(ra,a);c.t=b(J,a);c.av=a.app_version;var d=b(Gc,a).call(a);if(c.metrics){var g=JSON.parse(c.metrics);g._ua||(g._ua=d,c.metrics=JSON.stringify(g))}else c.metrics=JSON.stringify({_ua:d});a.check_consent("location")&&b(Rb,a)?(a.country_code&&
(c.country_code=a.country_code),a.city&&(c.city=a.city),null!==a.ip_address&&(c.ip_address=a.ip_address)):c.location="";c.timestamp=cb();b(Eb,a)&&(b(e,a).call(a,f.DEBUG,"prepareRequest, testing timestamp is set to: "+b(Eb,a)),c.timestamp=b(Eb,a));d=new Date;c.hour=d.getHours();c.dow=d.getDay();c.tz=-d.getTimezoneOffset()});p(this,V,function(c){a.ignore_visitor?b(e,a).call(a,f.DEBUG,"User is opt_out will ignore the request: "+c):b(ob,a)?a.app_key&&a.device_id?(b(ab,a).call(a,c),b(L,a).length>b(sa,
a)&&b(L,a).shift(),b(L,a).push(c),b(z,a).call(a,"cly_queue",b(L,a),!0)):b(e,a).call(a,f.ERROR,"app_key or device_id is missing ",a.app_key,a.device_id):b(e,a).call(a,f.DEBUG,"Tracking is disabled by server config, will not track the request: "+JSON.stringify(c))});p(this,Fb,function(){b(Ec,a).call(a);if(a.ignore_visitor)k(ib,a,!1),b(e,a).call(a,f.WARNING,"User opt_out:["+a.ignore_visitor+"], no heartbeat");else{k(ib,a,!0);b(eb,a)&&"undefined"!==typeof t.q&&0<t.q.length&&b(Ea,a).call(a);if(b(fa,a)&&
b(Oa,a)&&b(wa,a)){var c=I();c-b(oa,a)>b(Wa,a)&&(a.session_duration(c-b(oa,a)),k(oa,a,c),0<a.hcErrorCount&&b(z,a).call(a,S.errorCount,a.hcErrorCount),0<a.hcWarningCount&&b(z,a).call(a,S.warningCount,a.hcWarningCount))}0<b(R,a).length&&!a.test_mode_eq&&(b(R,a).length<=b(Ha,a)?(b(V,a).call(a,{events:JSON.stringify(b(R,a))}),k(R,a,[])):(c=b(R,a).splice(0,b(Ha,a)),b(V,a).call(a,{events:JSON.stringify(c)})),b(z,a).call(a,"cly_event",b(R,a)));c=I();var d=!1;b($a,a)&&c<b(Ia,a)?(d=!0,b(Cb,a)||(b(e,a).call(a,
f.VERBOSE,"Request back-off active, suspending requests until: "+b(Ia,a)+", current time: "+c),k(Cb,a,!0))):b($a,a)&&c>=b(Ia,a)&&(b(e,a).call(a,f.INFO,"Request back-off period ended, resuming normal request processing"),k($a,a,!1),k(Ia,a,0),d=!1,k(Cb,a,!1));!d&&!b(N,a)&&0<b(L,a).length&&b(hb,a)&&I()>b(wb,a)&&(k(hb,a,!1),c=b(L,a)[0],c.rr=b(L,a).length,b(e,a).call(a,f.DEBUG,"Processing request",c),b(z,a).call(a,"cly_queue",b(L,a),!0),a.test_mode||b(ia,a).call(a,"send_request_queue",a.url+b(tb,a),c,
function(g,h){g?k(wb,a,I()+b(gb,a)):(b(L,a).shift(),b(fd,a).call(a,h));b(z,a).call(a,"cly_queue",b(L,a),!0);k(hb,a,!0)},!1));setTimeout(function(){b(Fb,a).call(a)},b(fb,a))}});p(this,fd,function(c){if(b(Tb,a)&&!b($a,a)){var d=b(Za,a)>b(Ub,a);if(d){var g=b(L,a).length<b(sa,a)*b(Vb,a),h=I();c=h-(c&&c.timestamp?c.timestamp:h);var m=c<3600*b(Wb,a);d&&g&&m?(b(e,a).call(a,f.INFO,"Activating request back-off: response time ["+b(Za,a)+"s], queue size ["+b(L,a).length+"/"+b(sa,a)+"], request age ["+c+"s]"),
k($a,a,!0),k(Ia,a,h+b(Xb,a)),b(na,a).incrementBackoffCount(),b(e,a).call(a,f.INFO,"Request back-off activated until: "+b(Ia,a))):(b(e,a).call(a,f.DEBUG,"No back-off conditions met: response time ["+b(Za,a)+"s], queue size ["+b(L,a).length+"/"+b(sa,a)+"], request age ["+c+"s]"),b(na,a).resetLastRequestBackoffStatus())}}});p(this,gd,function(){return b(zb,a)});p(this,Ea,function(){if("undefined"===typeof t||"undefined"===typeof t.i)b(e,a).call(a,f.DEBUG,"Countly is not finished initialization yet, will process the queue after initialization is done");
else{var c=t.q;t.q=[];for(var d=0;d<c.length;d++){var g=c[d];b(e,a).call(a,f.DEBUG,"Processing queued calls:"+g);if("function"===typeof g)g();else if(Array.isArray(g)&&0<g.length){var h=a,m=0;try{t.i[g[m]]&&(h=t.i[g[m]],m++)}catch(r){b(e,a).call(a,f.DEBUG,"No instance found for the provided key while processing async queue");t.q.push(g);continue}if("function"===typeof h[g[m]])h[g[m]].apply(h,g.slice(m+1));else if(0===g[m].indexOf("userData.")){var l=g[m].replace("userData.","");"function"===typeof h.userData[l]&&
h.userData[l].apply(h,g.slice(m+1))}else 0===g[m].indexOf("content.")?(l=g[m].replace("content.",""),"function"===typeof h.content[l]&&h.content[l].apply(h,g.slice(m+1))):0===g[m].indexOf("feedback.")?(l=g[m].replace("feedback.",""),"function"===typeof h.feedback[l]&&h.feedback[l].apply(h,g.slice(m+1))):"function"===typeof t[g[m]]&&t[g[m]].apply(t,g.slice(m+1))}}}});p(this,ic,function(){var c=b(B,a).call(a,"cly_id");return c?(k(J,a,b(B,a).call(a,"cly_id_type")),c):pc()});p(this,hd,function(c){return/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-4[0-9a-fA-F]{3}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/.test(c)});
p(this,Gc,function(){return a.metrics&&a.metrics._ua?a.metrics._ua:db()});p(this,Gb,function(){var c=JSON.parse(JSON.stringify(a.metrics||{}));c._app_version=c._app_version||a.app_version;c._ua=c._ua||db();var d=b(Hb,a).call(a);d&&(d=""+d.width+"x"+d.height,c._resolution=c._resolution||d);A&&window.devicePixelRatio&&(c._density=c._density||window.devicePixelRatio);d=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;"undefined"!==typeof d&&(c._locale=c._locale||
d);b(jc,a).call(a)&&(c._store=c._store||document.referrer);b(e,a).call(a,f.DEBUG,"Got metrics",c);return c});p(this,Hb,function(c){b(e,a).call(a,f.DEBUG,"Getting the resolution of the device");if(!A||!screen)return b(e,a).call(a,f.DEBUG,"No screen available"),null;var d=screen.width?parseInt(screen.width):0,g=screen.height?parseInt(screen.height):0;if(c){c=Math.min(window.innerWidth,document.documentElement.clientWidth);var h=Math.min(window.innerHeight,document.documentElement.clientHeight);d=c?
parseInt(c):d;g=h?parseInt(h):g}if(0===d||0===g)return b(e,a).call(a,f.DEBUG,"Screen width or height is non existent"),null;navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&window.devicePixelRatio&&(b(e,a).call(a,f.VERBOSE,"Mobile Mac device detected, adjusting resolution"),d=Math.round(d*window.devicePixelRatio),g=Math.round(g*window.devicePixelRatio));return{width:d,height:g}});p(this,jc,function(c){if(!A)return!1;c=c||document.referrer;var d=!1;if("undefined"===typeof c||0===c.length)b(e,
a).call(a,f.DEBUG,"Invalid referrer:["+c+"], ignoring.");else{var g=Yc.exec(c);if(g)if(g[11])if(g[11]===window.location.hostname)b(e,a).call(a,f.DEBUG,"Referrer is current host:["+c+"], ignoring.");else if(b(ka,a)&&b(ka,a).length)for(d=!0,g=0;g<b(ka,a).length;g++){if(0<=c.indexOf(b(ka,a)[g])){b(e,a).call(a,f.DEBUG,"Referrer in ignore list:["+c+"], ignoring.");d=!1;break}}else b(e,a).call(a,f.DEBUG,"Valid referrer:["+c+"]"),d=!0;else b(e,a).call(a,f.DEBUG,"No path found in referrer:["+c+"], ignoring.");
else b(e,a).call(a,f.DEBUG,"Referrer is corrupt:["+c+"], ignoring.")}return d});p(this,e,function(c,d,g){if(a.debug&&"undefined"!==typeof console){g&&"object"===T(g)&&(g=JSON.stringify(g));b(eb,a)||(d="["+a.app_key+"] "+d);c||(c=f.DEBUG);var h="";g&&(h=" "+g);d=c+"[Countly] "+d+h;c===f.ERROR?(console.error(d),b(na,a).incrementErrorCount()):c===f.WARNING?(console.warn(d),b(na,a).incrementWarningCount()):c===f.INFO?console.info(d):c===f.VERBOSE?console.log(d):console.debug(d)}});p(this,ia,function(c,
d,g,h,m,l){b(Ob,a)||l?(b(zb,a).push({functionName:c,url:d,params:g}),A?b(Hc,a).call(a,c,d,g,h,m):b(Jc,a).call(a,c,d,g,h,m)):b(e,a).call(a,f.DEBUG,"Network request is disabled by the SCNetwork")});p(this,Hc,function(c,d,g,h,m){m=m||!1;try{b(e,a).call(a,f.DEBUG,"Sending XML HTTP request");var l=new XMLHttpRequest;l.ontimeout=function(){b(e,a).call(a,f.ERROR,c+" timed out after 30 seconds");"function"===typeof h&&h(!0,g,"timeout")};g=g||{};var r=g._forceImageUpload||!0===g.__imageUpload||g.imageData&&
(g.imageName||g.imageType),u=g;if(r){var y={},D;for(D in g)Object.prototype.hasOwnProperty.call(g,D)&&"__imageUpload"!==D&&"imageData"!==D&&"imageName"!==D&&"imageType"!==D&&"type"!==D&&(y[D]=g[D]);u=y}rc(u,a.salt).then(function(O){var P="POST";if(a.force_post||2E3<=O.length)P="POST";r?l.open("POST",d,!0):"GET"===P?l.open("GET",d+"?"+O,!0):(l.open("POST",d,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"));try{"timeout"in l&&(l.timeout=b($b,a))}catch(X){b(e,a).call(a,f.DEBUG,
c+" could not set xhr.timeout: "+X)}for(var Q in a.headers)Object.prototype.hasOwnProperty.call(a.headers,Q)&&(r&&"content-type"===Q.toLowerCase()||l.setRequestHeader(Q,a.headers[Q]));var aa=I();l.onreadystatechange=function(){if(4===l.readyState){var X=I()-aa;k(Za,a,X);b(e,a).call(a,f.DEBUG,c+" HTTP request completed with status code: ["+l.status+"] and response: ["+l.responseText+"], duration: ["+X+"] seconds");(m?b(lc,a).call(a,l.status,l.responseText):b(kc,a).call(a,l.status,l.responseText))?
"function"===typeof h&&h(!1,g,l.responseText):(b(e,a).call(a,f.ERROR,c+" Invalid response from server"),"send_request_queue"===c&&b(na,a).saveRequestCounters(l.status,l.responseText),"function"===typeof h&&h(!0,g,l.status,l.responseText))}};r?(O=b(Ic,a).call(a,g,O))?l.send(O):"function"===typeof h&&h(!0,g,"invalid_formdata"):"GET"===P?l.send():l.send(O)})}catch(O){b(e,a).call(a,f.ERROR,c+" Something went wrong while making an XML HTTP request: "+O),"function"===typeof h&&h(!0,g)}});p(this,id,function(c,
d){if(!c)return null;try{if("function"===typeof atob){var g=atob(c),h=g.length,m=new Uint8Array(h);for(c=0;c<h;c++)m[c]=g.charCodeAt(c);if("undefined"!==typeof Blob)return new Blob([m],{type:d||"application/octet-stream"});if("undefined"!==typeof File)try{return new File([m],"avatar",{type:d||"application/octet-stream"})}catch(r){b(e,a).call(a,f.DEBUG,"createBlobFromBase64: Unable to create File instance: "+r)}}else if("undefined"!==typeof Buffer){var l=Buffer.from(c,"base64");if("undefined"!==typeof Blob)return new Blob([l],
{type:d||"application/octet-stream"});if("undefined"!==typeof File)try{return new File([l],"avatar",{type:d||"application/octet-stream"})}catch(r){b(e,a).call(a,f.DEBUG,"createBlobFromBase64: Unable to create File instance from buffer: "+r)}}}catch(r){b(e,a).call(a,f.ERROR,"createBlobFromBase64 failed: "+r)}return null});p(this,Ic,function(c,d){if(!c||!c.imageData)return null;var g=b(id,a).call(a,c.imageData,c.imageType);if(!g||"undefined"===typeof FormData)return null;var h=new FormData;h.append("user_details[picture]",
g,c.imageName||"avatar");if(d&&"string"===typeof d)for(c=d.split("&"),d=0;d<c.length;d++){var m=c[d];if(m){var l=m.indexOf("=");g=0<=l?m.substring(0,l):m;m=0<=l?m.substring(l+1):"";h.append(g,m)}}return h});p(this,Jc,function(c,d,g,h,m){m=m||!1;var l;try{b(e,a).call(a,f.DEBUG,"Sending Fetch request");var r="POST",u={"Content-type":"application/x-www-form-urlencoded"},y=null;g=g||{};var D=g._forceImageUpload||!0===g.__imageUpload||g.imageData&&(g.imageName||g.imageType),O=g;if(D){var P={},Q;for(Q in g)Object.prototype.hasOwnProperty.call(g,
Q)&&"__imageUpload"!==Q&&"imageData"!==Q&&"imageName"!==Q&&"imageType"!==Q&&"type"!==Q&&(P[Q]=g[Q]);O=P}rc(O,a.salt).then(function(aa){a.force_post||2E3<=aa.length?(r="POST",y=aa):d+="?"+aa;for(var X in a.headers)u[X]=a.headers[X];var nc=I(),Y=new AbortController;X=Y.signal;var Ka=setTimeout(function(){return Y.abort()},b($b,a)),E=y,W=d;if(D){aa=b(Ic,a).call(a,g,aa);if(!aa){clearTimeout(Ka);"function"===typeof h&&h(!0,g,"invalid_formdata");return}u["Content-type"]&&delete u["Content-type"];E=aa;W=
d.split("?")[0]}fetch(W,{method:r,headers:u,body:E,signal:X}).then(function(ea){clearTimeout(Ka);l=ea;return l.text()}).then(function(ea){var Nc=I()-nc;k(Za,a,Nc);D?b(e,a).call(a,f.DEBUG,c+" image Fetch upload completed with status code: ["+l.status+"] and response: ["+ea+"], duration: ["+Nc+"] seconds"):b(e,a).call(a,f.DEBUG,c+" Fetch request completed wit status code: ["+l.status+"] and response: ["+ea+"], duration: ["+Nc+"] seconds");(m?b(lc,a).call(a,l.status,ea):b(kc,a).call(a,l.status,ea))?
"function"===typeof h&&h(!1,g,ea):(b(e,a).call(a,f.ERROR,c+" Invalid response from server"),"send_request_queue"===c&&b(na,a).saveRequestCounters(l.status,ea),"function"===typeof h&&h(!0,g,l.status,ea))})["catch"](function(ea){clearTimeout(Ka);"AbortError"===ea.name?(b(e,a).call(a,f.ERROR,c+" timed out after 30 seconds"),"function"===typeof h&&h(!0,g,"timeout")):(b(e,a).call(a,f.ERROR,c+" Failed Fetch request: "+ea),"function"===typeof h&&h(!0,g))})})}catch(aa){b(e,a).call(a,f.ERROR,c+" Something went wrong with the Fetch request attempt: "+
aa),"function"===typeof h&&h(!0,g)}});p(this,kc,function(c,d){if(!(200<=c&&300>c))return b(e,a).call(a,f.ERROR,"Http response status code:["+c+"] is not within the expected range"),!1;try{var g=JSON.parse(d);return"[object Object]"!==Object.prototype.toString.call(g)?(b(e,a).call(a,f.ERROR,"Http response is not JSON Object"),!1):!!g.result}catch(h){return b(e,a).call(a,f.ERROR,"Http response is not JSON: "+h),!1}});p(this,lc,function(c,d){if(!(200<=c&&300>c))return b(e,a).call(a,f.ERROR,"Http response status code:["+
c+"] is not within the expected range"),!1;try{var g=JSON.parse(d);return"[object Object]"===Object.prototype.toString.call(g)||Array.isArray(g)||"No content block found!"===g?!0:(b(e,a).call(a,f.ERROR,"Http response is not JSON Object nor JSON Array"),!1)}catch(h){return b(e,a).call(a,f.ERROR,"Http response is not JSON: "+h),!1}});p(this,Kc,function(){A?k(Ua,a,Math.max(b(Ua,a),window.scrollY,document.body.scrollTop,document.documentElement.scrollTop)):b(e,a).call(a,f.WARNING,"processScroll, window object is not available. Not processing scroll.")});
p(this,mc,function(){if(!A)b(e,a).call(a,f.WARNING,"processScrollView, window object is not available. Not processing scroll view.");else if(b(Ta,a)){k(Ta,a,!1);var c=Lb(),d=vc(),g=Sc();a.check_consent("scrolls")&&(c={type:"scroll",y:b(Ua,a)+g,width:d,height:c,view:a.getViewUrl()},c=ua(c,b(K,a),b(H,a),b(ca,a),"processScrollView",b(e,a)),a.track_domains&&(c.domain=window.location.hostname),b(ha,a).call(a,{key:U.ACTION,segmentation:c}))}});p(this,jd,function(){return b(J,a)});p(this,Lc,function(c){b(z,
a).call(a,"cly_token",c)});p(this,kd,function(){var c=b(B,a).call(a,"cly_token");b(da,a).call(a,"cly_token");return c});p(this,ld,function(){return b(R,a)});p(this,md,function(){return b(L,a)});p(this,nd,function(c){c+="=";for(var d=document.cookie.split(";"),g=0,h=d.length;g<h;g++){for(var m=d[g];" "===m.charAt(0);)m=m.substring(1,m.length);if(0===m.indexOf(c))return m.substring(c.length,m.length)}return null});p(this,Mc,function(c,d,g){var h=new Date;h.setTime(h.getTime()+864E5*g);g="; expires="+
h.toGMTString();document.cookie=c+"="+d+g+"; path=/"});p(this,B,function(c,d,g){if("none"===a.storage||"object"!==T(a.storage)&&!A)b(e,a).call(a,f.DEBUG,"Storage is disabled. Value with key: ["+c+"] won't be retrieved");else{g||(c=a.app_key+"/"+c,a.namespace&&(c=Ma(a.namespace)+"/"+c));if(a.storage&&"object"===T(a.storage)&&"function"===typeof a.storage.getItem){var h=a.storage.getItem(c);return c.endsWith("cly_id")?h:a.deserialize(h)}void 0===d&&(d=b(xa,a));try{return d?h=localStorage.getItem(c):
"localstorage"!==a.storage&&(h=b(nd,a).call(a,c)),c.endsWith("cly_id")?h:a.deserialize(h)}catch(m){}}});p(this,z,function(c,d,g,h){if("none"===a.storage||"object"!==T(a.storage)&&!A)b(e,a).call(a,f.DEBUG,"Storage is disabled. Value with key: "+c+" won't be stored");else{h||(c=a.app_key+"/"+c,a.namespace&&(c=Ma(a.namespace)+"/"+c));try{"undefined"!==typeof d&&null!==d&&("object"===T(a.storage)&&"function"===typeof a.storage.setItem?a.storage.setItem(c,d):(void 0===g&&(g=b(xa,a)),d=a.serialize(d),g?
localStorage.setItem(c,d):"localstorage"!==a.storage&&b(Mc,a).call(a,c,d,30)))}catch(m){}}});p(this,da,function(c,d,g){if("none"===a.storage||"object"!==T(a.storage)&&!A)b(e,a).call(a,f.DEBUG,"Storage is disabled. Value with key: "+c+" won't be removed");else{g||(c=a.app_key+"/"+c,a.namespace&&(c=Ma(a.namespace)+"/"+c));try{"object"===T(a.storage)&&"function"===typeof a.storage.removeItem?a.storage.removeItem(c):(void 0===d&&(d=b(xa,a)),d?localStorage.removeItem(c):"localstorage"!==a.storage&&b(Mc,
a).call(a,c,"",-1))}catch(h){}}});p(this,od,function(){if(b(B,a).call(a,a.namespace+"cly_id",!1,!0)){b(z,a).call(a,"cly_id",b(B,a).call(a,a.namespace+"cly_id",!1,!0));b(z,a).call(a,"cly_id_type",b(B,a).call(a,a.namespace+"cly_id_type",!1,!0));b(z,a).call(a,"cly_event",b(B,a).call(a,a.namespace+"cly_event",!1,!0));b(z,a).call(a,"cly_session",b(B,a).call(a,a.namespace+"cly_session",!1,!0));var c=b(B,a).call(a,a.namespace+"cly_queue",!1,!0);Array.isArray(c)&&(c=c.filter(function(d){return d.app_key===
a.app_key}),b(z,a).call(a,"cly_queue",c));b(B,a).call(a,a.namespace+"cly_cmp_id",!1,!0)&&(b(z,a).call(a,"cly_cmp_id",b(B,a).call(a,a.namespace+"cly_cmp_id",!1,!0)),b(z,a).call(a,"cly_cmp_uid",b(B,a).call(a,a.namespace+"cly_cmp_uid",!1,!0)));b(B,a).call(a,a.namespace+"cly_ignore",!1,!0)&&b(z,a).call(a,"cly_ignore",b(B,a).call(a,a.namespace+"cly_ignore",!1,!0));b(da,a).call(a,"cly_id",!1,!0);b(da,a).call(a,"cly_id_type",!1,!0);b(da,a).call(a,"cly_event",!1,!0);b(da,a).call(a,"cly_session",!1,!0);b(da,
a).call(a,"cly_queue",!1,!0);b(da,a).call(a,"cly_cmp_id",!1,!0);b(da,a).call(a,"cly_cmp_uid",!1,!0);b(da,a).call(a,"cly_ignore",!1,!0)}});p(this,pd,function(c,d){b(e,a).call(a,f.DEBUG,"onStorageChange, Applying storage changes for key:",c);b(e,a).call(a,f.DEBUG,"onStorageChange, Applying storage changes for value:",d);switch(c){case "cly_queue":k(L,a,a.deserialize(d||"[]"));break;case "cly_event":k(R,a,a.deserialize(d||"[]"));break;case "cly_remote_configs":k(Z,a,a.deserialize(d||"{}"));break;case "cly_ignore":a.ignore_visitor=
a.deserialize(d);break;case "cly_config":k(Aa,a,a.deserialize(d||"{}"));b(bc,a).call(a,b(Aa,a));break;case "cly_id":a.device_id=d;break;case "cly_id_type":k(J,a,a.deserialize(d))}});p(this,qd,function(){k(L,a,[]);b(z,a).call(a,"cly_queue",[]);k(R,a,[]);b(z,a).call(a,"cly_event",[])});p(this,rd,function(){return{eventQ:b(R,a),requestQ:b(L,a)}});w(this,"_internals",{store:b(z,this),getDocWidth:vc,getDocHeight:Lb,getViewportHeight:Sc,get_page_coord:uc,get_event_target:Kb,add_event_listener:F,createNewObjectFromProperties:rb,
truncateObject:ua,truncateSingleValue:C,stripTrailingSlash:Ma,prepareParams:rc,sendXmlHttpRequest:b(Hc,this),isResponseValid:b(kc,this),getInternalDeviceIdType:b(jd,this),getMsTimestamp:cb,getTimestamp:I,isResponseValidBroad:b(lc,this),secureRandom:oc,log:b(e,this),checkIfLoggingIsOn:Jb,getMetrics:b(Gb,this),getUA:b(Gc,this),prepareRequest:b(ab,this),generateUUID:pc,sendEventsForced:b(Da,this),isUUID:b(hd,this),calculateChecksum:Qc,isReferrerUsable:b(jc,this),getId:b(ic,this),heartBeat:b(Fb,this),
toRequestQueue:b(V,this),reportViewDuration:b(hc,this),loadJS:Uc,loadCSS:Mb,getLastView:b(ed,this),setToken:b(Lc,this),getToken:b(kd,this),showLoader:Vc,hideLoader:Wc,setValueInStorage:b(z,this),getValueFromStorage:b(B,this),removeValueFromStorage:b(da,this),add_cly_events:b(ha,this),processScrollView:b(mc,this),processScroll:b(Kc,this),currentUserAgentString:db,currentUserAgentDataString:sc,userAgentDeviceDetection:tc,userAgentSearchBotDetection:Rc,getRequestQueue:b(md,this),getEventQueue:b(ld,this),
sendFetchRequest:b(Jc,this),processAsyncQueue:b(Ea,this),makeNetworkRequest:b(ia,this),onStorageChange:b(pd,this),clearQueue:b(qd,this),getLocalQueues:b(rd,this),testingGetRequests:b(gd,this)});p(this,na,{sendInstantHCRequest:function(){if(b(N,a))b(e,a).call(a,f.DEBUG,"sendInstantHCRequest, Offline mode is active. Not sending health check request."),k(yb,a,!0);else{var c=C(a.hcErrorMessage,1E3,"healthCheck",b(e,a));""!==c&&(c=JSON.stringify(c));c={hc:JSON.stringify({el:a.hcErrorCount,wl:a.hcWarningCount,
sc:a.hcStatusCode,em:c,bom:a.hcBackoffCount,cbom:a.hcConsecutiveBackoffCount}),metrics:JSON.stringify({_app_version:a.app_version})};b(ab,a).call(a,c);b(ia,a).call(a,"[healthCheck]",a.url+b(tb,a),c,function(d){d||b(na,a).resetAndSaveCounters()},!0)}},resetAndSaveCounters:function(){b(na,a).resetCounters();b(z,a).call(a,S.errorCount,a.hcErrorCount);b(z,a).call(a,S.warningCount,a.hcWarningCount);b(z,a).call(a,S.statusCode,a.hcStatusCode);b(z,a).call(a,S.errorMessage,a.hcErrorMessage);b(z,a).call(a,
S.backoffCount,a.hcBackoffCount);b(z,a).call(a,S.consecutiveBackoffCount,a.hcConsecutiveBackoffCount)},incrementErrorCount:function(){a.hcErrorCount++},incrementWarningCount:function(){a.hcWarningCount++},incrementBackoffCount:function(){a.hcBackoffCount++;b(Db,a)&&a.hcConsecutiveBackoffCount++;k(Db,a,!0);b(z,a).call(a,S.backoffCount,a.hcBackoffCount);b(z,a).call(a,S.consecutiveBackoffCount,a.hcConsecutiveBackoffCount)},resetLastRequestBackoffStatus:function(){k(Db,a,!1)},resetCounters:function(){a.hcErrorCount=
0;a.hcWarningCount=0;a.hcStatusCode=-1;a.hcErrorMessage="";a.hcBackoffCount=0;a.hcConsecutiveBackoffCount=0},saveRequestCounters:function(c,d){a.hcStatusCode=c;a.hcErrorMessage=d;b(z,a).call(a,S.statusCode,a.hcStatusCode);b(z,a).call(a,S.errorMessage,a.hcErrorMessage)}});k(Zc,this,this);k(eb,this,!t.i);k(fa,this,!1);k(tb,this,"/i");k(Na,this,"/o/sdk");k(L,this,[]);k(R,this,[]);k(Z,this,{});k(va,this,[]);k(ja,this,{});k(ub,this,null);k(Oa,this,!0);b(oa,this);k(vb,this,0);k(ba,this,null);k(Pa,this,
0);k(Qa,this,0);k(wb,this,0);k(Fa,this,0);k(hb,this,!0);k(Za,this,0);k(Ia,this,0);k($a,this,!1);k(ib,this,!1);k(la,this,{});k(wa,this,!0);k(Nb,this,I());k(xa,this,!0);k(Ga,this,null);k(J,this,1);k(Ta,this,!1);k(Ua,this,0);k(xb,this,!1);k(ya,this,null);k(jb,this,null);k(qa,this,null);k(yb,this,!1);k(zb,this,[]);k(wc,this,"/o/sdk/content");k(Va,this,!1);k(kb,this,null);k(lb,this,"cly-content-iframe");k(mb,this,null);k(Ob,this,!0);k(sa,this,x("queue_size",q,1E3));k(Ha,this,x("max_events",q,100));k(Wa,
this,x("session_update",q,60));k(nb,this,1E3*Math.max(x("content_zone_timer_interval",q,30),15));k(Pb,this,4);k(ob,this,!0);k(pb,this,!0);k(Bb,this,!0);k(Ab,this,!0);k(Qb,this,!0);k(Rb,this,!0);k(qb,this,!1);k(Sb,this,!0);k(Xa,this,x("require_consent",q,!1));k(K,this,x("max_key_length",q,128));k(H,this,x("max_value_size",q,256));k(ca,this,x("max_segmentation_values",q,100));k(Ya,this,x("max_breadcrumb_count",q,100));k(Ba,this,x("max_stack_trace_lines_per_thread",q,30));k(Ca,this,x("max_stack_trace_line_length",
q,200));k(Tb,this,!x("disable_backoff_mechanism",q,!1));k(Ub,this,10);k(Vb,this,.5);k(Wb,this,24);k(Xb,this,60);k($b,this,3E4);this.app_key=x("app_key",q,null);this.url=Ma(x("url",q,""));this.serialize=x("serialize",q,t.serialize);this.deserialize=x("deserialize",q,t.deserialize);k(xc,this,x("disable_sdk_behavior_settings_updates",q,!1));k(Cb,this,!1);k(Eb,this,x("test_mode_time",q,0));try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal")}catch(c){b(e,this).call(this,
f.ERROR,"Local storage test failed, Halting local storage support: "+c),k(xa,this,!1)}k(Aa,this,b(B,this).call(this,"cly_config"));b(Aa,this)||(k(Aa,this,x("behavior_settings",q,{})),b(z,this).call(this,"cly_config",JSON.stringify(b(Aa,this))));b(bc,this).call(this,b(Aa,this));k(M,this,{});for(var G=0;G<t.features.length;G++)b(M,this)[t.features[G]]={};b($c,this).call(this,q);b(Ec,this).call(this);setTimeout(function(){t.noHeartBeat?b(e,a).call(a,f.WARNING,"initialize, Heartbeat disabled. This is for testing purposes only!"):
b(Fb,a).call(a);a.remote_config&&a.fetch_remote_config(a.remote_config)},1);A&&document.documentElement.setAttribute("data-countly-useragent",db());k(Zb,this,cb());b(na,this).sendInstantHCRequest();b(qb,this)&&(b(Ja,this).call(this),k(Yb,this,!0));b(e,this).call(this,f.INFO,"initialize, Countly initialized")}),td=!0;t.features="apm attribution clicks crashes events feedback forms location remote-config scrolls sessions star-rating users views".split(" ");t.q=t.q||[];t.onload=t.onload||[];t.CountlyClass=
sd;t.init=function(q){q=q||{};if(t.loadAPMScriptsAsync&&td)td=!1,ud(q);else{var v=q.app_key||t.app_key;if(!t.i||!t.i[v]){q=new sd(q);if(!t.i){t.i={};for(var a in q)t[a]=q[a]}t.i[v]=q}return t.i[v]}};t.serialize=function(q){try{"object"===T(q)&&(q=JSON.stringify(q))}catch(v){}return q};t.deserialize=function(q){if(""===q)return q;try{q=JSON.parse(q)}catch(v){}return q};t.getViewName=function(){return A?window.location.pathname:"web_worker"};t.getViewUrl=function(){return A?window.location.pathname:
"web_worker"};t.getSearchQuery=function(){if(A)return window.location.search};t.DeviceIdType={DEVELOPER_SUPPLIED:0,SDK_GENERATED:1,TEMPORARY_ID:2};A&&window.addEventListener("storage",function(q){var v=(q.key+"").split("/"),a=v.pop();v=v.pop();if(t.i&&t.i[v])t.i[v]._internals.onStorageChange(a,q.newValue)});La.default=t;Object.defineProperty(La,"__esModule",{value:!0})});
