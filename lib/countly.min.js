var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(l){var r=0;return function(){return r<l.length?{done:!1,value:l[r++]}:{done:!0}}};$jscomp.arrayIterator=function(l){return{next:$jscomp.arrayIteratorImpl(l)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(l,r,v){if(l==Array.prototype||l==Object.prototype)return l;l[r]=v.value;return l};$jscomp.getGlobal=function(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var r=0;r<l.length;++r){var v=l[r];if(v&&v.Math==Math)return v}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(l,r){var v=$jscomp.propertyToPolyfillSymbol[r];if(null==v)return l[r];v=l[v];return void 0!==v?v:l[r]};
$jscomp.polyfill=function(l,r,v,q){r&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(l,r,v,q):$jscomp.polyfillUnisolated(l,r,v,q))};$jscomp.polyfillUnisolated=function(l,r,v,q){v=$jscomp.global;l=l.split(".");for(q=0;q<l.length-1;q++){var z=l[q];if(!(z in v))return;v=v[z]}l=l[l.length-1];q=v[l];r=r(q);r!=q&&null!=r&&$jscomp.defineProperty(v,l,{configurable:!0,writable:!0,value:r})};
$jscomp.polyfillIsolated=function(l,r,v,q){var z=l.split(".");l=1===z.length;q=z[0];q=!l&&q in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var w=0;w<z.length-1;w++){var ha=z[w];if(!(ha in q))return;q=q[ha]}z=z[z.length-1];v=$jscomp.IS_SYMBOL_NATIVE&&"es6"===v?q[z]:null;r=r(v);null!=r&&(l?$jscomp.defineProperty($jscomp.polyfills,z,{configurable:!0,writable:!0,value:r}):r!==v&&($jscomp.propertyToPolyfillSymbol[z]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(z):$jscomp.POLYFILL_PREFIX+z,
z=$jscomp.propertyToPolyfillSymbol[z],$jscomp.defineProperty(q,z,{configurable:!0,writable:!0,value:r})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(l){if(l)return l;var r=function(z,w){this.$jscomp$symbol$id_=z;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:w})};r.prototype.toString=function(){return this.$jscomp$symbol$id_};var v=0,q=function(z){if(this instanceof q)throw new TypeError("Symbol is not a constructor");return new r("jscomp_symbol_"+(z||"")+"_"+v++,z)};return q},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(l){if(l)return l;l=Symbol("Symbol.iterator");for(var r="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),v=0;v<r.length;v++){var q=$jscomp.global[r[v]];"function"===typeof q&&"function"!=typeof q.prototype[l]&&$jscomp.defineProperty(q.prototype,l,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return l},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(l){l={next:l};l[Symbol.iterator]=function(){return this};return l};$jscomp.iteratorFromArray=function(l,r){l instanceof String&&(l+="");var v=0,q={next:function(){if(v<l.length){var z=v++;return{value:r(z,l[z]),done:!1}}q.next=function(){return{done:!0,value:void 0}};return q.next()}};q[Symbol.iterator]=function(){return q};return q};
$jscomp.polyfill("Array.prototype.keys",function(l){return l?l:function(){return $jscomp.iteratorFromArray(this,function(r){return r})}},"es6","es3");$jscomp.polyfill("Object.is",function(l){return l?l:function(r,v){return r===v?0!==r||1/r===1/v:r!==r&&v!==v}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(l){return l?l:function(r,v){var q=this;q instanceof String&&(q=String(q));var z=q.length;v=v||0;for(0>v&&(v=Math.max(v+z,0));v<z;v++){var w=q[v];if(w===r||Object.is(w,r))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(l,r,v){if(null==l)throw new TypeError("The 'this' value for String.prototype."+v+" must not be null or undefined");if(r instanceof RegExp)throw new TypeError("First argument to String.prototype."+v+" must not be a regular expression");return l+""};$jscomp.polyfill("String.prototype.includes",function(l){return l?l:function(r,v){return-1!==$jscomp.checkStringArgs(this,r,"includes").indexOf(r,v||0)}},"es6","es3");
(function(l,r){"function"===typeof define&&define.amd?define([],function(){return r(l.Countly)}):"object"===typeof module&&module.exports?module.exports=r(l.Countly):l.Countly=r(l.Countly)})("undefined"!==typeof window?window:this,function(l){function r(g){var u=[];if("undefined"!==typeof g.options)for(var x=0;x<g.options.length;x++)g.options[x].selected&&u.push(g.options[x].value);return u.join(", ")}function v(){var g=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
function(u){var x=(g+16*Math.random())%16|0;g=Math.floor(g/16);return("x"===u?x:x&3|8).toString(16)})}function q(){return Math.floor((new Date).getTime()/1E3)}function z(){var g=(new Date).getTime();ra>=g?ra++:ra=g;return ra}function w(g,u,x){if(u&&Object.keys(u).length){if("undefined"!==typeof u[g])return u[g]}else if("undefined"!==typeof l[g])return l[g];return x}function ha(g,u,x){for(var D in l.i)l.i[D].tracking_crashes&&l.i[D].recordError(g,u,x)}function Pa(g){var u=[],x;for(x in g)u.push(x+
"="+encodeURIComponent(g[x]));return u.join("&")}function Da(g){return"/"===g.substr(g.length-1)?g.substr(0,g.length-1):g}function la(g,u){for(var x={},D,K=0;K<u.length;K++)D=u[K],"undefined"!==typeof g[D]&&(x[D]=g[D]);return x}function S(g,u,x,D,K,T){var N={};if(g){if(Object.keys(g).length>D){var Q={},H=0,Y;for(Y in g)H<D&&(Q[Y]=g[Y],H++);g=Q}for(var ia in g)D=A(ia,u,K,T),Q=A(g[ia],x,K,T),N[D]=Q}return N}function A(g,u,x,D){var K=g;"number"===typeof g&&(g=g.toString());"string"===typeof g&&g.length>
u&&(K=g.substring(0,u),D(k.DEBUG,x+", Key: [ "+g+" ] is longer than accepted length. It will be truncated."));return K}function Ea(g){"undefined"===typeof g.pageY&&"number"===typeof g.clientX&&document.documentElement&&(g.pageX=g.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,g.pageY=g.clientY+document.body.scrollTop+document.documentElement.scrollTop);return g}function sa(){var g=document;return Math.max(Math.max(g.body.scrollHeight,g.documentElement.scrollHeight),Math.max(g.body.offsetHeight,
g.documentElement.offsetHeight),Math.max(g.body.clientHeight,g.documentElement.clientHeight))}function Fa(){var g=document;return Math.max(Math.max(g.body.scrollWidth,g.documentElement.scrollWidth),Math.max(g.body.offsetWidth,g.documentElement.offsetWidth),Math.max(g.body.clientWidth,g.documentElement.clientWidth))}function Qa(){var g=document;return Math.min(Math.min(g.body.clientHeight,g.documentElement.clientHeight),Math.min(g.body.offsetHeight,g.documentElement.offsetHeight),window.innerHeight)}
function Ra(g,u,x,D,K,T){var N=document.createElement(g),Q;N.setAttribute(u,x);N.setAttribute(D,K);T&&(N.onreadystatechange=function(){N.onload=function(){Q||T();Q=!0}});document.getElementsByTagName("head")[0].appendChild(N)}function Sa(g,u){Ra("script","type","text/javascript","src",g,u)}function ta(g,u){Ra("link","rel","stylesheet","href",g,u)}function Ta(){var g=document.getElementById("cly-loader");if(!g){var u=document.head||document.getElementsByTagName("head")[0],x=document.createElement("style");
x.type="text/css";x.styleSheet?x.styleSheet.cssText="#cly-loader {height: 4px; width: 100%; position: absolute; z-index: 99999; overflow: hidden; background-color: #fff; top:0px; left:0px;}#cly-loader:before{display: block; position: absolute; content: ''; left: -200px; width: 200px; height: 4px; background-color: #2EB52B; animation: cly-loading 2s linear infinite;}@keyframes cly-loading { from {left: -200px; width: 30%;} 50% {width: 30%;} 70% {width: 70%;} 80% { left: 50%;} 95% {left: 120%;} to {left: 100%;}}":
x.appendChild(document.createTextNode("#cly-loader {height: 4px; width: 100%; position: absolute; z-index: 99999; overflow: hidden; background-color: #fff; top:0px; left:0px;}#cly-loader:before{display: block; position: absolute; content: ''; left: -200px; width: 200px; height: 4px; background-color: #2EB52B; animation: cly-loading 2s linear infinite;}@keyframes cly-loading { from {left: -200px; width: 30%;} 50% {width: 30%;} 70% {width: 70%;} 80% { left: 50%;} 95% {left: 120%;} to {left: 100%;}}"));
u.appendChild(x);g=document.createElement("div");g.setAttribute("id","cly-loader");document.body.onload=function(){if(!l.showLoaderProtection)try{document.body.appendChild(g)}catch(D){}}}g.style.display="block"}function Ua(){l.showLoaderProtection=!0;var g=document.getElementById("cly-loader");g&&(g.style.display="none")}if("undefined"!==typeof window){l=l||{};l.features="sessions events views scrolls clicks forms crashes attribution users star-rating location apm feedback remote-config".split(" ");
l.utm={source:!0,medium:!0,campaign:!0,term:!0,content:!0};var k={ERROR:"[ERROR] ",WARNING:"[WARNING] ",INFO:"[INFO] ",DEBUG:"[DEBUG] ",VERBOSE:"[VERBOSE] "};l.q=l.q||[];l.onload=l.onload||[];var Va=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?::([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?::([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,fb=/(CountlySiteBot|nuhk|Googlebot|GoogleSecurityScanner|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver|bingbot|Google Web Preview|Mediapartners-Google|AdsBot-Google|Baiduspider|Ezooms|YahooSeeker|AltaVista|AVSearch|Mercator|Scooter|InfoSeek|Ultraseek|Lycos|Wget|YandexBot|Yandex|YaDirectFetcher|SiteBot|Exabot|AhrefsBot|MJ12bot|TurnitinBot|magpie-crawler|Nutch Crawler|CMS Crawler|rogerbot|Domnutch|ssearch_bot|XoviBot|netseer|digincore|fr-crawler|wesee|AliasIO|contxbot|PingdomBot|BingPreview|HeadlessChrome)/;
l.CountlyClass=function(g){function u(a){if(!e.ignore_visitor)if(a.key){a.count||(a.count=1);a.key=A(a.key,e.maxKeyLength,"add_cly_event",f);a.segmentation=S(a.segmentation,e.maxKeyLength,e.maxValueSize,e.maxSegmentationValues,"add_cly_event",f);var b=la(a,["key","count","sum","dur","segmentation"]);b.timestamp=z();var c=new Date;b.hour=c.getHours();b.dow=c.getDay();J.push(b);p("cly_event",J);f(k.INFO,"Successfully adding event: ",a)}else f(k.ERROR,"Adding event failed. Event must have a key property")}
function x(){e.ignore_prefetch&&"undefined"!==typeof document.visibilityState&&"prerender"===document.visibilityState&&(e.ignore_visitor=!0);e.ignore_bots&&fb.test(navigator.userAgent)&&(e.ignore_visitor=!0)}function D(a,b){if(!document.getElementById("countly-feedback-sticker-"+a._id))try{var c=document.createElement("div");c.className="countly-iframe-wrapper";c.id="countly-iframe-wrapper-"+a._id;var h=document.createElement("span");h.className="countly-feedback-close-icon";h.id="countly-feedback-close-icon-"+
a._id;h.innerText="x";var m=document.createElement("iframe");m.name="countly-feedback-iframe";m.id="countly-feedback-iframe";m.src=e.url+"/feedback?widget_id="+a._id+"&app_key="+e.app_key+"&device_id="+e.device_id+"&sdk_version=21.11.1";document.body.appendChild(c);c.appendChild(h);c.appendChild(m);B(document.getElementById("countly-feedback-close-icon-"+a._id),"click",function(){document.getElementById("countly-iframe-wrapper-"+a._id).style.display="none";document.getElementById("cfbg").style.display=
"none"});if(b){var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.id="feedback-sticker-svg";d.setAttribute("aria-hidden","true");d.setAttribute("data-prefix","far");d.setAttribute("data-icon","grin");d.setAttribute("class","svg-inline--fa fa-grin fa-w-16");d.setAttribute("role","img");d.setAttribute("xmlns","http://www.w3.org/2000/svg");d.setAttribute("viewBox","0 0 496 512");var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.id="smileyPathInStickerSvg";n.setAttribute("fill",
"white");n.setAttribute("d","M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm105.6-151.4c-25.9 8.3-64.4 13.1-105.6 13.1s-79.6-4.8-105.6-13.1c-9.9-3.1-19.4 5.4-17.7 15.3 7.9 47.1 71.3 80 123.3 80s115.3-32.9 123.3-80c1.6-9.8-7.7-18.4-17.7-15.3zM168 240c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32z");var t=document.createElement("span");
t.innerText=a.trigger_button_text;var y=document.createElement("div");y.style.color=7>a.trigger_font_color?"#"+a.trigger_font_color:a.trigger_font_color;y.style.backgroundColor=7>a.trigger_bg_color.length?"#"+a.trigger_bg_color:a.trigger_bg_color;y.className="countly-feedback-sticker  "+a.trigger_position+"-"+a.trigger_size;y.id="countly-feedback-sticker-"+a._id;d.appendChild(n);y.appendChild(d);y.appendChild(t);document.body.appendChild(y);var F=document.getElementById("smileyPathInStickerSvg");
F&&(F.style.fill=7>a.trigger_font_color?"#"+a.trigger_font_color:a.trigger_font_color);B(document.getElementById("countly-feedback-sticker-"+a._id),"click",function(){document.getElementById("countly-iframe-wrapper-"+a._id).style.display="block";document.getElementById("cfbg").style.display="block"})}else document.getElementById("countly-iframe-wrapper-"+a._id).style.display="block",document.getElementById("cfbg").style.display="block"}catch(O){f(k.ERROR,"Somethings went wrong while element injecting process: "+
O)}}function K(){var a;if("undefined"!==typeof e.onload&&0<e.onload.length){for(a=0;a<e.onload.length;a++)if("function"===typeof e.onload[a])e.onload[a](e);e.onload=[]}}function T(){if(aa){var a={name:aa};e.check_consent("views")&&u({key:"[CLY]_view",dur:ba?q()-ma:na,segmentation:a});aa=null}}function N(){if(oa){var a=p("cly_session");if(!a||parseInt(a)<=q())U=!1,e.begin_session(!pa);p("cly_session",q()+60*Ga)}}function Q(a){a.app_key=e.app_key;a.device_id=e.device_id;a.sdk_name="javascript_native_web";
a.sdk_version="21.11.1";e.check_consent("location")?(e.country_code&&(a.country_code=e.country_code),e.city&&(a.city=e.city),null!==e.ip_address&&(a.ip_address=e.ip_address)):a.location="";a.timestamp=z();var b=new Date;a.hour=b.getHours();a.dow=b.getDay()}function H(a){e.ignore_visitor||(e.app_key&&e.device_id?(Q(a),G.length>Wa&&G.shift(),G.push(a),p("cly_queue",G,!0)):f(k.ERROR,"app_key or device_id is missing ",e.app_key,e.device_id))}function Y(){K();if(e.test_mode||e.ignore_visitor)ua=!1;else{ua=
!0;var a=0;if(va&&"undefined"!==typeof l.q&&0<l.q.length){var b=l.q;l.q=[];for(a=0;a<b.length;a++){var c=b[a];f(k.DEBUG,"Processing queued call",c);if("function"===typeof c)c();else if(Array.isArray(c)&&0<c.length){var h=e,m=0;l.i[c[m]]&&(h=l.i[c[m]],m++);if("function"===typeof h[c[m]])h[c[m]].apply(h,c.slice(m+1));else if(0===c[m].indexOf("userData.")){var d=c[m].replace("userData.","");"function"===typeof h.userData[d]&&h.userData[d].apply(h,c.slice(m+1))}else"function"===typeof l[c[m]]&&l[c[m]].apply(l,
c.slice(m+1))}}}U&&pa&&ba&&(a=q(),a-ca>Xa&&(e.session_duration(a-ca),ca=a));0<J.length&&(J.length<=Ha?(H({events:JSON.stringify(J)}),J=[]):(a=J.splice(0,Ha),H({events:JSON.stringify(a)})),p("cly_event",J));!V&&0<G.length&&wa&&q()>Ia&&(wa=!1,a=G[0],f(k.DEBUG,"Processing request",a),p("cly_queue",G,!0),e.tests||ja(e.url+Ya,a,function(n,t){f(k.DEBUG,"Request Finished",t,n);n?(Ia=q()+Za,f(k.ERROR,"Request error: ",n)):G.shift();p("cly_queue",G,!0);wa=!0}));setTimeout(Y,$a)}}function ia(){return p("cly_id")||
v()}function xa(){var a=JSON.parse(JSON.stringify(e.metrics||{}));a._app_version=a._app_version||e.app_version;a._ua=a._ua||navigator.userAgent;if(screen.width){var b=screen.width?parseInt(screen.width):0,c=screen.height?parseInt(screen.height):0;if(0!==b&&0!==c){if(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&window.devicePixelRatio)b=Math.round(b*window.devicePixelRatio),c=Math.round(c*window.devicePixelRatio);else if(90===Math.abs(window.orientation)){var h=b;b=c;c=h}a._resolution=
a._resolution||""+b+"x"+c}}window.devicePixelRatio&&(a._density=a._density||window.devicePixelRatio);b=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;"undefined"!==typeof b&&(a._locale=a._locale||b);if("undefined"!==typeof document.referrer&&document.referrer.length&&(b=Va.exec(document.referrer))&&b[11]&&b[11]!==window.location.hostname){b=!1;if(Z&&Z.length)for(c=0;c<Z.length;c++)try{if((new RegExp(Z[c])).test(document.referrer)){f(k.DEBUG,"Ignored:",
document.referrer);b=!0;break}}catch(m){f(k.ERROR,"Problem with regex",Z[c])}b||(a._store=a._store||document.referrer)}f(k.DEBUG,"Got metrics",a);return a}function f(a,b){if(e.debug&&"undefined"!==typeof console){arguments[2]&&"object"===typeof arguments[2]&&(arguments[2]=JSON.stringify(arguments[2]));va||(b="["+e.app_key+"] "+b);a||(a=k.DEBUG);for(var c="",h=2;h<arguments.length;h++)c+=arguments[h];c=a+b+c;a===k.ERROR?console.error(c):a===k.WARNING?console.warn(c):a===k.INFO?console.info(c):a===
k.VERBOSE?console.log(c):console.debug(c)}}function ja(a,b,c,h,m){m=m||!1;try{f(k.DEBUG,"Sending XML HTTP request");var d=null;window.XMLHttpRequest?d=new window.XMLHttpRequest:window.ActiveXObject&&(d=new window.ActiveXObject("Microsoft.XMLHTTP"));c=c||{};var n=Pa(c),t="GET";if(e.force_post||2E3<=n.length)t="POST";"GET"===t?d.open("GET",b+"?"+n,!0):(d.open("POST",b,!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"));for(var y in e.headers)d.setRequestHeader(y,e.headers[y]);
d.onreadystatechange=function(){4===this.readyState&&(f(k.DEBUG,a+" HTTP request completed ["+this.status+"]["+this.responseText+"]"),ab(this.status,this.responseText,m)?"function"===typeof h&&h(!1,c,this.responseText):(f(k.ERROR,a+" Failed Server XML HTTP request, ",this.status),"function"===typeof h&&h(!0,c)))};"GET"===t?d.send():d.send(n)}catch(F){f(k.ERROR,a+" Failed XML HTTP request",F),"function"===typeof h&&h(!0,c)}}function ab(a,b,c){if(!(200<=a&&300>a))return f(k.ERROR,"Http response status code is not within the expected range: ",
a),!1;try{var h=JSON.parse(b);return"[object Object]"!==Object.prototype.toString.call(h)?!1:c?!0:!!h.result}catch(m){return f(k.ERROR,"Http response is in the wrong format.",m),!1}}function bb(a){p("cly_token",a)}function p(a,b,c,h){function m(t,y,F){var O=new Date;O.setTime(O.getTime()+864E5*F);F="; expires="+O.toGMTString();document.cookie=t+"="+y+F+"; path=/"}function d(t){t+="=";for(var y=document.cookie.split(";"),F=0,O=y.length;F<O;F++){for(var I=y[F];" "===I.charAt(0);)I=I.substring(1,I.length);
if(0===I.indexOf(t))return I.substring(t.length,I.length)}return null}if("none"!==e.storage){h||(a=e.app_key+"/"+a,e.namespace&&(a=Da(e.namespace)+"/"+a));c=c||"localstorage"===e.storage;var n;"undefined"!==typeof b&&null!==b&&(b=e.serialize(b),da?localStorage.setItem(a,b):c||m(a,b,30));if("undefined"===typeof b)return da?n=localStorage.getItem(a):c||(n=d(a)),e.deserialize(n);null===b&&(da?localStorage.removeItem(a):c||m(a,"",-1))}}function gb(){if(p(e.namespace+"cly_id",void 0,!1,!0)){p("cly_id",
p(e.namespace+"cly_id",void 0,!1,!0));p("cly_event",p(e.namespace+"cly_event",void 0,!1,!0));p("cly_session",p(e.namespace+"cly_session",void 0,!1,!0));var a=p(e.namespace+"cly_queue",void 0,!1,!0);Array.isArray(a)&&(a=a.filter(function(b){return b.app_key===e.app_key}),p("cly_queue",a));p(e.namespace+"cly_cmp_id",void 0,!1,!0)&&(p("cly_cmp_id",p(e.namespace+"cly_cmp_id",void 0,!1,!0)),p("cly_cmp_uid",p(e.namespace+"cly_cmp_uid",void 0,!1,!0)));p(e.namespace+"cly_ignore",void 0,!1,!0)&&p("cly_ignore",
p(e.namespace+"cly_ignore",void 0,!1,!0));p("cly_id",null,!1,!0);p("cly_event",null,!1,!0);p("cly_session",null,!1,!0);p("cly_queue",null,!1,!0);p("cly_cmp_id",null,!1,!0);p("cly_cmp_uid",null,!1,!0);p("cly_ignore",null,!1,!0)}}var e=this,va=!l.i,U=!1,Ya="/i",Ja="/o/sdk",$a=w("interval",g,500),Wa=w("queue_size",g,1E3),G=[],J=[],M={},ea=[],fa={},Z=w("ignore_referrers",g,[]),Ka=null,pa=!0,ca,La=0,aa=null,ma=0,na=0,Ia=0,Za=w("fail_timeout",g,60),Ma=w("inactivity_time",g,20),qa=0,Xa=w("session_update",
g,60),Ha=w("max_events",g,100),ya=w("max_logs",g,null),oa=w("use_session_cookie",g,!0),Ga=w("session_cookie_timeout",g,30),wa=!0,ua=!1,V=w("offline_mode",g,!1),W={},ba=!0,cb=q(),da=!0,ka=null;try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal")}catch(a){da=!1}for(var E={},Na=0;Na<l.features.length;Na++)E[l.features[Na]]={};this.initialize=function(){this.serialize=g.serialize||l.serialize;this.deserialize=g.deserialize||l.deserialize;this.getViewName=g.getViewName||
l.getViewName;this.getViewUrl=g.getViewUrl||l.getViewUrl;this.namespace=w("namespace",g,"");this.app_key=w("app_key",g,null);this.onload=w("onload",g,[]);this.utm=w("utm",g,{source:!0,medium:!0,campaign:!0,term:!0,content:!0});this.ignore_prefetch=w("ignore_prefetch",g,!0);this.debug=w("debug",g,!1);this.test_mode=w("test_mode",g,!1);this.tests=w("tests",g,!1);this.metrics=w("metrics",g,{});this.headers=w("headers",g,{});this.url=Da(w("url",g,""));this.app_version=w("app_version",g,"0.0");this.country_code=
w("country_code",g,null);this.city=w("city",g,null);this.ip_address=w("ip_address",g,null);this.ignore_bots=w("ignore_bots",g,!0);this.force_post=w("force_post",g,!1);this.remote_config=w("remote_config",g,!1);this.ignore_visitor=w("ignore_visitor",g,!1);this.require_consent=w("require_consent",g,!1);this.track_domains=w("track_domains",g,!0);this.storage=w("storage",g,"default");this.enableOrientationTracking=w("enable_orientation_tracking",g,!0);this.maxKeyLength=w("max_key_length",g,128);this.maxValueSize=
w("max_value_size",g,256);this.maxSegmentationValues=w("max_segmentation_values",g,30);this.maxBreadcrumbCount=w("max_breadcrumb_count",g,null);this.maxStackTraceLinesPerThread=w("max_stack_trace_lines_per_thread",g,30);this.maxStackTraceLineLength=w("max_stack_trace_line_length",g,200);ya&&!this.maxBreadcrumbCount?(this.maxBreadcrumbCount=ya,f(k.WARNING,"initialize, 'maxCrashLogs' is deprecated. Use 'maxBreadcrumbCount' instead!")):ya||this.maxBreadcrumbCount||(this.maxBreadcrumbCount=100);"cookie"===
this.storage&&(da=!1);Array.isArray(Z)||(Z=[]);""===this.url&&(f(k.ERROR,"initialize, Please provide server URL"),this.ignore_visitor=!0);p("cly_ignore")&&(this.ignore_visitor=!0);gb();V?this.device_id||(this.device_id="[CLY]_temp_id"):this.device_id=w("device_id",g,ia());G=p("cly_queue")||[];J=p("cly_event")||[];M=p("cly_remote_configs")||{};x();if(window.name&&0===window.name.indexOf("cly:"))try{this.passed_data=JSON.parse(window.name.replace("cly:",""))}catch(n){f(k.ERROR,"initialize, Could not parse name",
window.name)}else if(location.hash&&0===location.hash.indexOf("#cly:"))try{this.passed_data=JSON.parse(location.hash.replace("#cly:",""))}catch(n){f(k.ERROR,"initialize, Could not parse hash",location.hash)}(this.passed_data&&this.passed_data.app_key&&this.passed_data.app_key===this.app_key||this.passed_data&&!this.passed_data.app_key&&va)&&this.passed_data.token&&this.passed_data.purpose&&(this.passed_data.token!==p("cly_old_token")&&(bb(this.passed_data.token),p("cly_old_token",this.passed_data.token)),
this.passed_data.url=this.passed_data.url||this.url,"heatmap"===this.passed_data.purpose&&(this.ignore_visitor=!0,Ta(),Sa(this.passed_data.url+"/views/heatmap.js",Ua)));if(!this.ignore_visitor){f(k.INFO,"initialize, Countly initialized");if(location.search){for(var a=location.search.substring(1).split("&"),b={},c=!1,h=0;h<a.length;h++){var m=a[h].split("=");"cly_id"===m[0]?p("cly_cmp_id",m[1]):"cly_uid"===m[0]?p("cly_cmp_uid",m[1]):"cly_device_id"===m[0]?this.device_id=m[1]:0===(m[0]+"").indexOf("utm_")&&
this.utm[m[0].replace("utm_","")]&&(b[m[0].replace("utm_","")]=m[1],c=!0)}if(c){for(var d in this.utm)b[d]?this.userData.set("utm_"+d,b[d]):this.userData.unset("utm_"+d);this.userData.save()}}V||this.device_id!==p("cly_id")&&p("cly_id",this.device_id);K();setTimeout(function(){Y();e.remote_config&&e.fetch_remote_config(e.remote_config)},1)}document.documentElement.setAttribute("data-countly-useragent",navigator.userAgent)};this.halt=function(){f(k.WARNING,"halt, Resetting Countly");l.i=void 0;va=
!l.i;U=!1;Ya="/i";Ja="/o/sdk";$a=500;Wa=1E3;G=[];J=[];M={};ea=[];fa={};Z=[];Ka=null;pa=!0;La=0;aa=null;Ia=na=ma=0;Za=60;Ma=20;qa=0;Xa=60;Ha=100;ya=null;oa=!0;Ga=30;wa=!0;V=ua=!1;W={};ba=!0;cb=q();da=!0;ka=null;try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal")}catch(b){da=!1}l.features="sessions events views scrolls clicks forms crashes attribution users star-rating location apm feedback remote-config".split(" ");E={};for(var a=0;a<l.features.length;a++)E[l.features[a]]=
{};e.app_key=void 0;e.device_id=void 0;e.onload=void 0;e.utm=void 0;e.ignore_prefetch=void 0;e.debug=void 0;e.test_mode=void 0;e.tests=void 0;e.metrics=void 0;e.headers=void 0;e.url=void 0;e.app_version=void 0;e.country_code=void 0;e.city=void 0;e.ip_address=void 0;e.ignore_bots=void 0;e.force_post=void 0;e.remote_config=void 0;e.ignore_visitor=void 0;e.require_consent=void 0;e.track_domains=void 0;e.storage=void 0;e.enableOrientationTracking=void 0;e.maxKeyLength=void 0;e.maxValueSize=void 0;e.maxSegmentationValues=
void 0;e.maxBreadcrumbCount=void 0;e.maxStackTraceLinesPerThread=void 0;e.maxStackTraceLineLength=void 0};this.group_features=function(a){f(k.INFO,"group_features, Grouping features");if(a)for(var b in a)E[b]?f(k.WARNING,"group_features, Feature name ["+b+"] is already reserved"):"string"===typeof a[b]?E[b]={features:[a[b]]}:a[b]&&Array.isArray(a[b])&&a[b].length?E[b]={features:a[b]}:f(k.ERROR,"group_features, Incorrect feature list for ["+b+"] value: ["+a[b]+"]");else f(k.ERROR,"group_features, Incorrect features:["+
a+"]")};this.check_consent=function(a){f(k.INFO,"check_consent, Checking if consent is given for specific feature");if(!this.require_consent)return f(k.INFO,"check_consent, require_consent is off, no consent is necessary"),!0;if(E[a])return!(!E[a]||!E[a].optin);f(k.ERROR,"check_consent, No feature available for ["+a+"]");return!1};this.check_any_consent=function(){f(k.INFO,"check_any_consent, Checking if any consent is given");if(!this.require_consent)return f(k.INFO,"check_any_consent, require_consent is off, no consent is necessary"),
!0;for(var a in E)if(E[a]&&E[a].optin)return!0;f(k.INFO,"check_any_consent, No consents given");return!1};this.add_consent=function(a){f(k.INFO,"add_consent, Adding consent for ["+a+"]");if(Array.isArray(a))for(var b=0;b<a.length;b++)this.add_consent(a[b]);else E[a]?E[a].features?(E[a].optin=!0,this.add_consent(E[a].features)):!0!==E[a].optin&&(E[a].optin=!0,db(),setTimeout(function(){"sessions"===a&&W.begin_session?(e.begin_session.apply(e,W.begin_session),W.begin_session=null):"views"===a&&W.track_pageview&&
(aa=null,e.track_pageview.apply(e,W.track_pageview),W.track_pageview=null)},1)):f(k.ERROR,"add_consent, No feature available for ["+a+"]")};this.remove_consent=function(a){f(k.INFO,"remove_consent, Removing consent for ["+a+"]");this.remove_consent_internal(a,!0)};this.remove_consent_internal=function(a,b){b=b||!1;if(Array.isArray(a))for(var c=0;c<a.length;c++)this.remove_consent_internal(a[c],b);else E[a]?E[a].features?this.remove_consent_internal(E[a].features,b):(E[a].optin=!1,b&&!1!==E[a].optin&&
db()):f(k.ERROR,"remove_consent, No feature available for ["+a+"]")};var za,db=function(){za&&(clearTimeout(za),za=null);za=setTimeout(function(){for(var a={},b=0;b<l.features.length;b++)a[l.features[b]]=!0===E[l.features[b]].optin?!0:!1;H({consent:JSON.stringify(a)});f(k.DEBUG,"Consent update request has been sent to the queue.")},1E3)};this.enable_offline_mode=function(){f(k.INFO,"enable_offline_mode, Enabling offline mode");this.remove_consent_internal(l.features,!1);V=!0;this.device_id="[CLY]_temp_id"};
this.disable_offline_mode=function(a){f(k.INFO,"disable_offline_mode, Disabling offline mode");V=!1;a&&this.device_id!==a?(this.device_id=a,p("cly_id",this.device_id),f(k.INFO,"disable_offline_mode, Changing id")):(this.device_id=ia(),this.device_id!==p("cly_id")&&p("cly_id",this.device_id));a=!1;if(0<G.length)for(var b=0;b<G.length;b++)"[CLY]_temp_id"===G[b].device_id&&(G[b].device_id=this.device_id,a=!0);a&&p("cly_queue",G,!0)};this.begin_session=function(a,b){f(k.INFO,"begin_session, Starting the session");
a&&f(k.INFO,"begin_session, Heartbeats are disabled");b&&f(k.INFO,"begin_session, Session starts irrespective of session cookie");if(this.check_consent("sessions")){if(!U){this.enableOrientationTracking&&(this.report_orientation(),B(window,"resize",function(){e.report_orientation()}));ca=q();U=!0;pa=!a;var c=p("cly_session");if(b||!oa||!c||parseInt(c)<=q())f(k.INFO,"begin_session, Session started"),null===ka&&(ka=!0),c={begin_session:1},c.metrics=JSON.stringify(xa()),H(c);p("cly_session",q()+60*Ga)}}else W.begin_session=
arguments};this.session_duration=function(a){f(k.INFO,"session_duration, Reporting session duration");this.check_consent("sessions")&&U&&(f(k.INFO,"session_duration, Session extended",a),H({session_duration:a}),N())};this.end_session=function(a,b){f(k.INFO,"end_session, Ending the current session");this.check_consent("sessions")&&U&&(a=a||q()-ca,T(),!oa||b?(f(k.INFO,"end_session, Session ended"),H({end_session:1,session_duration:a})):this.session_duration(a),U=!1)};this.change_id=function(a,b){f(k.INFO,
"change_id, Changing the ID");b&&f(k.INFO,"change_id, Will merge the IDs");if(!a||"string"!==typeof a||0===a.length)f(k.INFO,"change_id, The provided ID: ["+a+"] is not a valid ID");else if(this.device_id!==a){b||(0<J.length&&(H({events:JSON.stringify(J)}),J=[],p("cly_event",J)),this.end_session(null,!0),fa={},this.remove_consent_internal(l.features,!1));var c=this.device_id;this.device_id=a;p("cly_id",this.device_id);f(k.INFO,"change_id, Changing ID");b?H({old_device_id:c}):this.begin_session(!pa,
!0);this.remote_config&&(M={},p("cly_remote_configs",M),this.fetch_remote_config(this.remote_config))}};this.add_event=function(a){f(k.INFO,"add_event, Adding ["+a+"] event");switch(a.key){case "[CLY]_nps":var b=this.check_consent("feedback");break;case "[CLY]_survey":b=this.check_consent("feedback");break;case "[CLY]_star_rating":b=this.check_consent("star-rating");break;case "[CLY]_view":b=this.check_consent("views");break;case "[CLY]_orientation":b=this.check_consent("users");break;case "[CLY]_push_action":b=
this.check_consent("push");break;case "[CLY]_action":b=this.check_consent("clicks")||this.check_consent("scroll");break;default:b=this.check_consent("events")}b&&u(a)};this.start_event=function(a){f(k.INFO,"start_event, Starting timed event with key: ["+a+"]");a=A(a,e.maxKeyLength,"start_event",f);fa[a]?f(k.WARNING,"start_event, Timed event with key ["+a+"] already started"):fa[a]=q()};this.end_event=function(a){f(k.INFO,"end_event, Ending timed event");"string"===typeof a&&(a={key:a});a.key?fa[a.key]?
(a.dur=q()-fa[a.key],this.add_event(a),delete fa[a.key]):f(k.ERROR,"end_event, Timed event with key ["+a.key+"] was not started"):f(k.ERROR,"end_event, Timed event must have a key property")};this.report_orientation=function(a){f(k.INFO,"report_orientation, Reporting orientation");this.check_consent("users")&&u({key:"[CLY]_orientation",segmentation:{mode:a||(window.innerWidth>window.innerHeight?"landscape":"portrait")}})};this.report_conversion=function(a,b){f(k.WARNING,"report_conversion, Deprecated function call! Use 'recordDirectAttribution' in place of this call. Call will be redirected now!");
this.recordDirectAttribution(a,b)};this.recordDirectAttribution=function(a,b){f(k.INFO,"recordDirectAttribution, Recording the attribution for campaign ID: ["+a+"] and the user ID: ["+b+"]");this.check_consent("attribution")&&(a=a||p("cly_cmp_id")||"cly_organic",b=b||p("cly_cmp_uid"),a&&b?H({campaign_id:a,campaign_user:b}):a&&H({campaign_id:a}))};this.user_details=function(a){f(k.INFO,"user_details, Trying to add user details: ",a);this.check_consent("users")&&(a.name=A(a.name,e.maxValueSize,"user_details",
f),a.username=A(a.username,e.maxValueSize,"user_details",f),a.email=A(a.email,e.maxValueSize,"user_details",f),a.organization=A(a.organization,e.maxValueSize,"user_details",f),a.phone=A(a.phone,e.maxValueSize,"user_details",f),a.picture=A(a.picture,4096,"user_details",f),a.gender=A(a.gender,e.maxValueSize,"user_details",f),a.byear=A(a.byear,e.maxValueSize,"user_details",f),a.custom=S(a.custom,e.maxKeyLength,e.maxValueSize,e.maxSegmentationValues,"user_details",f),H({user_details:JSON.stringify(la(a,
"name username email organization phone picture gender byear custom".split(" ")))}))};var R={},X=function(a,b,c){e.check_consent("users")&&(R[a]||(R[a]={}),"$push"===c||"$pull"===c||"$addToSet"===c?(R[a][c]||(R[a][c]=[]),R[a][c].push(b)):R[a][c]=b)};this.userData={set:function(a,b){f(k.INFO,"set, Setting user's custom property value: ["+b+"] under the key: ["+a+"]");a=A(a,e.maxKeyLength,"userData set",f);b=A(b,e.maxValueSize,"userData set",f);R[a]=b},unset:function(a){f(k.INFO,"unset, Resetting user's custom property with key: ["+
a+"] ");R[a]=""},set_once:function(a,b){f(k.INFO,"set_once, Setting user's unique custom property value: ["+b+"] under the key: ["+a+"] ");a=A(a,e.maxKeyLength,"userData set_once",f);b=A(b,e.maxValueSize,"userData set_once",f);X(a,b,"$setOnce")},increment:function(a){f(k.INFO,"increment, Increasing user's custom property value under the key: ["+a+"] by one");a=A(a,e.maxKeyLength,"userData increment",f);X(a,1,"$inc")},increment_by:function(a,b){f(k.INFO,"increment_by, Increasing user's custom property value under the key: ["+
a+"] by: ["+b+"]");a=A(a,e.maxKeyLength,"userData increment_by",f);b=A(b,e.maxValueSize,"userData increment_by",f);X(a,b,"$inc")},multiply:function(a,b){f(k.INFO,"multiply, Multiplying user's custom property value under the key: ["+a+"] by: ["+b+"]");a=A(a,e.maxKeyLength,"userData multiply",f);b=A(b,e.maxValueSize,"userData multiply",f);X(a,b,"$mul")},max:function(a,b){f(k.INFO,"max, Saving user's maximum custom property value compared to the value: ["+b+"] under the key: ["+a+"]");a=A(a,e.maxKeyLength,
"userData max",f);b=A(b,e.maxValueSize,"userData max",f);X(a,b,"$max")},min:function(a,b){f(k.INFO,"min, Saving user's minimum custom property value compared to the value: ["+b+"] under the key: ["+a+"]");a=A(a,e.maxKeyLength,"userData min",f);b=A(b,e.maxValueSize,"userData min",f);X(a,b,"$min")},push:function(a,b){f(k.INFO,"push, Pushing a value: ["+b+"] under the key: ["+a+"] to user's custom property array");a=A(a,e.maxKeyLength,"userData push",f);b=A(b,e.maxValueSize,"userData push",f);X(a,b,
"$push")},push_unique:function(a,b){f(k.INFO,"push_unique, Pushing a unique value: ["+b+"] under the key: ["+a+"] to user's custom property array");a=A(a,e.maxKeyLength,"userData push_unique",f);b=A(b,e.maxValueSize,"userData push_unique",f);X(a,b,"$addToSet")},pull:function(a,b){f(k.INFO,"pull, Removing the value: ["+b+"] under the key: ["+a+"] from user's custom property array");X(a,b,"$pull")},save:function(){f(k.INFO,"save, Saving changes to user's custom property");e.check_consent("users")&&
H({user_details:JSON.stringify({custom:R})});R={}}};this.report_trace=function(a){f(k.INFO,"report_trace, Reporting performance trace");if(this.check_consent("apm")){for(var b="type name stz etz apm_metrics apm_attr".split(" "),c=0;c<b.length;c++)if("apm_attr"!==b[c]&&"undefined"===typeof a[b[c]]){f(k.ERROR,"report_trace, APM trace must have a",b[c]);return}a.name=A(a.name,e.maxKeyLength,"report_trace",f);a.app_metrics=S(a.app_metrics,e.maxKeyLength,e.maxValueSize,e.maxSegmentationValues,"report_trace",
f);b=la(a,b);b.timestamp=a.stz;a=new Date;b.hour=a.getHours();b.dow=a.getDay();H({apm:JSON.stringify(b)});f(k.INFO,"report_trace, Successfully adding APM trace: ",b)}};this.track_errors=function(a){f(k.INFO,"track_errors, Started tracking errors");l.i[this.app_key].tracking_crashes=!0;window.cly_crashes||(window.cly_crashes=!0,Ka=a,window.onerror=function t(c,h,m,d,n){if(void 0!==n&&null!==n)ha(n,!1);else{d=d||window.event&&window.event.errorCharacter;n="";"undefined"!==typeof c&&(n+=c+"\n");"undefined"!==
typeof h&&(n+="at "+h);"undefined"!==typeof m&&(n+=":"+m);"undefined"!==typeof d&&(n+=":"+d);n+="\n";try{c=[];for(var y=t.caller;y;)c.push(y.name),y=y.caller;n+=c.join("\n")}catch(F){}ha(n,!1)}},window.addEventListener("unhandledrejection",function(c){ha(Error("Unhandled rejection (reason: "+(c.reason&&c.reason.stack?c.reason.stack:c.reason)+")."),!0)}))};this.log_error=function(a,b){f(k.INFO,"log_error, Logging errors");this.recordError(a,!0,b)};this.add_log=function(a){f(k.INFO,"add_log, Adding a new log of breadcrumbs: [ "+
a+" ]");if(this.check_consent("crashes")){for(a=A(a,e.maxValueSize,"add_log",f);ea.length>=e.maxBreadcrumbCount;)ea.shift(),f(k.WARNING,"add_log, Reached maximum crashLogs size. Will erase the oldest one.");ea.push(a)}};this.fetch_remote_config=function(a,b,c){f(k.INFO,"fetch_remote_config, Fetching remote config");if(this.check_consent("remote-config")){var h={method:"fetch_remote_config"};this.check_consent("sessions")&&(h.metrics=JSON.stringify(xa()));a&&(c||"function"!==typeof a?Array.isArray(a)&&
a.length&&(f(k.INFO,"fetch_remote_config, Keys to fetch: [ "+a+" ]"),h.keys=JSON.stringify(a)):(c=a,a=null));b&&((f(k.INFO,"fetch_remote_config, Keys to omit: [ "+b+" ]"),c||"function"!==typeof b)?Array.isArray(b)&&b.length&&(h.omit_keys=JSON.stringify(b)):(c=b,b=null));Q(h);ja("fetch_remote_config",this.url+Ja,h,function(m,d,n){if(m)f(k.ERROR,"fetch_remote_config, Error occurred",m);else{try{var t=JSON.parse(n);if(h.keys||h.omit_keys)for(var y in t)M[y]=t[y];else M=t;p("cly_remote_configs",M)}catch(F){}"function"===
typeof c&&(f(k.INFO,"fetch_remote_config, Callback function is provided"),c(m,M))}},!0)}else f(k.ERROR,"fetch_remote_config, Remote config requires explicit consent"),"function"===typeof c&&c(Error("Remote config requires explicit consent"),M)};this.get_remote_config=function(a){f(k.INFO,"get_remote_config, Getting remote config");return"undefined"!==typeof a?M[a]:M};this.stop_time=function(){f(k.INFO,"stop_time, Stopping tracking duration");ba&&(ba=!1,La=q()-ca,na=q()-ma)};this.start_time=function(){f(k.INFO,
"start_time, Starting tracking duration");ba||(ba=!0,ca=q()-La,ma=q()-na,na=0,N())};this.track_sessions=function(){function a(){document[c]||!document.hasFocus()?e.stop_time():e.start_time()}function b(){qa>=Ma&&e.start_time();qa=0}f(k.INFO,"track_session, Starting tracking user session");this.begin_session();this.start_time();B(window,"beforeunload",function(){e.end_session()});var c="hidden";B(window,"focus",a);B(window,"blur",a);B(window,"pageshow",a);B(window,"pagehide",a);"onfocusin"in document&&
(B(window,"focusin",a),B(window,"focusout",a));c in document?document.addEventListener("visibilitychange",a):"mozHidden"in document?(c="mozHidden",document.addEventListener("mozvisibilitychange",a)):"webkitHidden"in document?(c="webkitHidden",document.addEventListener("webkitvisibilitychange",a)):"msHidden"in document&&(c="msHidden",document.addEventListener("msvisibilitychange",a));B(window,"mousemove",b);B(window,"click",b);B(window,"keydown",b);B(window,"scroll",b);setInterval(function(){qa++;
qa>=Ma&&e.stop_time()},6E4)};this.track_pageview=function(a,b,c){f(k.INFO,"track_pageview, Starting to track page views");T();a=A(a,e.maxKeyLength,"track_pageview",f);c=S(c,e.maxKeyLength,e.maxValueSize,e.maxSegmentationValues,"track_pageview",f);a&&Array.isArray(a)&&(b=a,a=null);a||(a=this.getViewName());if(void 0===a||""===a)f(k.ERROR,"track_pageview, No page name to track (it is either undefined or empty string). No page view can be tracked.");else if(null===a)f(k.ERROR,"track_pageview, View name returned as null. Page view will be ignored.");
else{if(b&&b.length)for(var h=0;h<b.length;h++)try{if((new RegExp(b[h])).test(a)){f(k.INFO,"track_pageview, Ignoring the page:",a);return}}catch(n){f(k.ERROR,"track_pageview, Problem with regex",b[h])}aa=a;ma=q();h={name:a,visit:1,view:e.getViewUrl()};h=S(h,e.maxKeyLength,e.maxValueSize,e.maxSegmentationValues,"track_pageview",f);this.track_domains&&(h.domain=window.location.hostname);if(oa)if(U)ka&&(ka=!1,h.start=1);else{var m=p("cly_session");if(!m||parseInt(m)<=q())ka=!1,h.start=1}else"undefined"!==
typeof document.referrer&&document.referrer.length&&(m=Va.exec(document.referrer))&&m[11]&&m[11]!==window.location.hostname&&(h.start=1);if(c)for(var d in c)"undefined"===typeof h[d]&&(h[d]=c[d]);this.check_consent("views")?u({key:"[CLY]_view",segmentation:h}):W.track_pageview=arguments}};this.track_view=function(a,b,c){f(k.INFO,"track_view, Initiating tracking page views");this.track_pageview(a,b,c)};this.track_clicks=function(a){f(k.INFO,"track_clicks, Starting to track clicks");a&&f(k.INFO,"track_clicks, Tracking the specified children");
a=a||document;var b=!0;B(a,"click",function(c){if(b){b=!1;Ea(c);if("undefined"!==typeof c.pageX&&"undefined"!==typeof c.pageY){var h=sa(),m=Fa();e.check_consent("clicks")&&(c={type:"click",x:c.pageX,y:c.pageY,width:m,height:h,view:e.getViewUrl()},c=S(c,e.maxKeyLength,e.maxValueSize,e.maxSegmentationValues,"processClick",f),e.track_domains&&(c.domain=window.location.hostname),u({key:"[CLY]_action",segmentation:c}))}setTimeout(function(){b=!0},1E3)}})};this.track_scrolls=function(a){f(k.INFO,"track_scrolls, Starting to track scrolls");
a&&f(k.INFO,"track_scrolls, Tracking the specified children");a=a||window;var b=!0,c=0;B(a,"scroll",function(){c=Math.max(c,window.scrollY,document.body.scrollTop,document.documentElement.scrollTop)});B(a,"beforeunload",function(){if(b){b=!1;var h=sa(),m=Fa(),d=Qa();e.check_consent("scrolls")&&(h={type:"scroll",y:c+d,width:m,height:h,view:e.getViewUrl()},h=S(h,e.maxKeyLength,e.maxValueSize,e.maxSegmentationValues,"processScrollView",f),e.track_domains&&(h.domain=window.location.hostname),u({key:"[CLY]_action",
segmentation:h}))}})};this.track_links=function(a){f(k.INFO,"track_links, Starting to track clicks to links");a&&f(k.INFO,"track_links, Tracking the specified children");a=a||document;B(a,"click",function(b){a:{var c=Aa(b);var h;for(h="A";c;){if(c.nodeName.toUpperCase()===h)break a;c=c.parentElement}c=void 0}c&&(Ea(b),e.check_consent("clicks")&&u({key:"linkClick",segmentation:{href:c.href,text:c.innerText,id:c.id,view:e.getViewUrl()}}))})};this.track_forms=function(a,b){function c(h){return h.name||
h.id||h.type||h.nodeName}f(k.INFO,"track_forms, Starting to track form submissions. DOM object provided:["+!!a+"] Tracking hidden inputs :["+!!b+"]");a=a||document;B(a,"submit",function(h){h=Aa(h);var m={id:h.attributes.id&&h.attributes.id.nodeValue,name:h.attributes.name&&h.attributes.name.nodeValue,action:h.attributes.action&&h.attributes.action.nodeValue,method:h.attributes.method&&h.attributes.method.nodeValue,view:e.getViewUrl()},d;if("undefined"!==typeof h.elements){for(var n=0;n<h.elements.length;n++)(d=
h.elements[n])&&"password"!==d.type&&-1===d.className.indexOf("cly_user_ignore")&&("undefined"===typeof m["input:"+c(d)]&&(m["input:"+c(d)]=[]),"select"===d.nodeName.toLowerCase()?"undefined"!==typeof d.multiple?m["input:"+c(d)].push(r(d)):m["input:"+c(d)].push(d.options[d.selectedIndex].value):"input"===d.nodeName.toLowerCase()?"undefined"!==typeof d.type?"checkbox"===d.type.toLowerCase()||"radio"===d.type.toLowerCase()?d.checked&&m["input:"+c(d)].push(d.value):("hidden"!==d.type.toLowerCase()||
b)&&m["input:"+c(d)].push(d.value):m["input:"+c(d)].push(d.value):"textarea"===d.nodeName.toLowerCase()?m["input:"+c(d)].push(d.value):"undefined"!==typeof d.value&&m["input:"+c(d)].push(d.value));for(var t in m)m[t]&&"function"===typeof m[t].join&&(m[t]=m[t].join(", "))}e.check_consent("forms")&&u({key:"formSubmit",segmentation:m})})};this.collect_from_forms=function(a,b){f(k.INFO,"collect_from_forms, Starting to collect possible user data. DOM object provided:["+!!a+"] Submitting custom user property:["+
!!b+"]");a=a||document;B(a,"submit",function(c){c=Aa(c);var h={},m=!1,d;if("undefined"!==typeof c.elements){var n={},t=a.getElementsByTagName("LABEL"),y;for(y=0;y<t.length;y++)t[y].htmlFor&&""!==t[y].htmlFor&&(n[t[y].htmlFor]=t[y].innerText||t[y].textContent||t[y].innerHTML);for(y=0;y<c.elements.length;y++)if((d=c.elements[y])&&"password"!==d.type&&-1===d.className.indexOf("cly_user_ignore"))if(t="","select"===d.nodeName.toLowerCase()?t="undefined"!==typeof d.multiple?r(d):d.options[d.selectedIndex].value:
"input"===d.nodeName.toLowerCase()?"undefined"!==typeof d.type?"checkbox"===d.type.toLowerCase()||"radio"===d.type.toLowerCase()?d.checked&&(t=d.value):t=d.value:t=d.value:"textarea"===d.nodeName.toLowerCase()?t=d.value:"undefined"!==typeof d.value&&(t=d.value),d.className&&-1!==d.className.indexOf("cly_user_")){var F=d.className.split(" ");for(d=0;d<F.length;d++)if(0===F[d].indexOf("cly_user_")){h[F[d].replace("cly_user_","")]=t;m=!0;break}}else if(d.type&&"email"===d.type.toLowerCase()||d.name&&
-1!==d.name.toLowerCase().indexOf("email")||d.id&&-1!==d.id.toLowerCase().indexOf("email")||d.id&&n[d.id]&&-1!==n[d.id].toLowerCase().indexOf("email")||/[^@\s]+@[^@\s]+\.[^@\s]+/.test(t))h.email||(h.email=t),m=!0;else if(d.name&&-1!==d.name.toLowerCase().indexOf("username")||d.id&&-1!==d.id.toLowerCase().indexOf("username")||d.id&&n[d.id]&&-1!==n[d.id].toLowerCase().indexOf("username"))h.username||(h.username=t),m=!0;else if(d.name&&(-1!==d.name.toLowerCase().indexOf("tel")||-1!==d.name.toLowerCase().indexOf("phone")||
-1!==d.name.toLowerCase().indexOf("number"))||d.id&&(-1!==d.id.toLowerCase().indexOf("tel")||-1!==d.id.toLowerCase().indexOf("phone")||-1!==d.id.toLowerCase().indexOf("number"))||d.id&&n[d.id]&&(-1!==n[d.id].toLowerCase().indexOf("tel")||-1!==n[d.id].toLowerCase().indexOf("phone")||-1!==n[d.id].toLowerCase().indexOf("number")))h.phone||(h.phone=t),m=!0;else if(d.name&&(-1!==d.name.toLowerCase().indexOf("org")||-1!==d.name.toLowerCase().indexOf("company"))||d.id&&(-1!==d.id.toLowerCase().indexOf("org")||
-1!==d.id.toLowerCase().indexOf("company"))||d.id&&n[d.id]&&(-1!==n[d.id].toLowerCase().indexOf("org")||-1!==n[d.id].toLowerCase().indexOf("company")))h.organization||(h.organization=t),m=!0;else if(d.name&&-1!==d.name.toLowerCase().indexOf("name")||d.id&&-1!==d.id.toLowerCase().indexOf("name")||d.id&&n[d.id]&&-1!==n[d.id].toLowerCase().indexOf("name"))h.name||(h.name=""),h.name+=t+" ",m=!0}m&&(f(k.INFO,"collect_from_forms, Gathered user data",h),b?e.user_details({custom:h}):e.user_details(h))})};
this.collect_from_facebook=function(a){f(k.INFO,"collect_from_facebook, Starting to collect possible user data");FB&&FB.api&&FB.api("/me",function(b){var c={};b.name&&(c.name=b.name);b.email&&(c.email=b.email);"male"===b.gender?c.gender="M":"female"===b.gender&&(c.gender="F");if(b.birthday){var h=b.birthday.split("/").pop();h&&4===h.length&&(c.byear=h)}b.work&&b.work[0]&&b.work[0].employer&&b.work[0].employer.name&&(c.organization=b.work[0].employer.name);if(a){c.custom={};for(var m in a){h=a[m].split(".");
for(var d=b,n=0;n<h.length&&(d=d[h[n]],"undefined"!==typeof d);n++);"undefined"!==typeof d&&(c.custom[m]=d)}}e.user_details(c)})};this.opt_out=function(){f(k.INFO,"opt_out, Opting out the user");this.ignore_visitor=!0;p("cly_ignore",!0)};this.opt_in=function(){f(k.INFO,"opt_in, Opting in the user");p("cly_ignore",!1);this.ignore_visitor=!1;x();this.ignore_visitor||ua||Y()};this.report_feedback=function(a){f(k.WARNING,"report_feedback, Deprecated function call! Use 'recordRatingWidgetWithID' in place of this call. Call will be redirected now!");
this.recordRatingWidgetWithID(a)};this.recordRatingWidgetWithID=function(a){f(k.INFO,"recordRatingWidgetWithID, Providing information about user with ID: [ "+a.widget_id+" ]");if(this.check_consent("star-rating"))if(a.widget_id)if(a.rating){var b={key:"[CLY]_star_rating",count:1,segmentation:{}};b.segmentation=la(a,"widget_id contactMe platform app_version rating email comment".split(" "));b.segmentation.app_version||(b.segmentation.app_version=this.metrics._app_version||this.app_version);f(k.ERROR,
"recordRatingWidgetWithID, Reporting Rating Widget: ",b);this.add_cly_event(b)}else f(k.ERROR,"recordRatingWidgetWithID, Rating Widget must contain rating property");else f(k.ERROR,"recordRatingWidgetWithID, Rating Widget must contain widget_id property")};this.show_feedback_popup=function(a){f(k.WARNING,"show_feedback_popup, Deprecated function call! Use 'presentRatingWidgetWithID' in place of this call. Call will be redirected now!");this.presentRatingWidgetWithID(a)};this.presentRatingWidgetWithID=
function(a){f(k.INFO,"presentRatingWidgetWithID, Showing rating widget popup for the widget with ID: [ "+a+" ]");this.check_consent("star-rating")&&(V?f(k.ERROR,"presentRatingWidgetWithID, Cannot show ratingWidget popup in offline mode"):ja("presentRatingWidgetWithID",this.url+"/o/feedback/widget",{widget_id:a},function(b,c,h){if(b)f(k.ERROR,"presentRatingWidgetWithID, Error occurred",b);else try{var m=JSON.parse(h);D(m,!1)}catch(d){f(k.ERROR,"presentRatingWidgetWithID, JSON parse failed: "+d)}}))};
this.initialize_feedback_popups=function(a){f(k.WARNING,"initialize_feedback_popups, Deprecated function call! Use 'initializeRatingWidgets' in place of this call. Call will be redirected now!");this.initializeRatingWidgets(a)};this.initializeRatingWidgets=function(a){f(k.INFO,"initializeRatingWidgets, Initializing rating widget with provided widget IDs:[ "+a+"]");if(this.check_consent("star-rating")){a||(a=p("cly_fb_widgets"));for(var b=document.getElementsByClassName("countly-feedback-sticker");0<
b.length;)b[0].remove();ja("initializeRatingWidgets",this.url+"/o/feedback/multiple-widgets-by-id",{widgets:JSON.stringify(a)},function(c,h,m){if(c)f(k.ERROR,"initializeRatingWidgets, Errors occurred:",c);else try{var d=JSON.parse(m);for(c=0;c<d.length;c++)if("true"===d[c].is_active&&d[c].target_devices[eb.device])if("string"===typeof d[c].hide_sticker&&(d[c].hide_sticker="true"===d[c].hide_sticker),"all"!==d[c].target_page||d[c].hide_sticker){var n=d[c].target_pages;for(h=0;h<n.length;h++){var t=
n[h].substr(0,n[h].length-1)===window.location.pathname.substr(0,n[h].length-1),y=n[h]===window.location.pathname;(n[h].includes("*")&&t||y)&&!d[c].hide_sticker&&D(d[c],!0)}}else D(d[c],!0)}catch(F){f(k.ERROR,"initializeRatingWidgets, JSON parse error: "+F)}})}};this.enable_feedback=function(a){f(k.WARNING,"enable_feedback, Deprecated function call! Use 'enableRatingWidgets' in place of this call. Call will be redirected now!");this.enableRatingWidgets(a)};this.enableRatingWidgets=function(a){f(k.INFO,
"enableRatingWidgets, Enabling rating widget with params:",a);this.check_consent("star-rating")&&(V?f(k.ERROR,"enableRatingWidgets, Cannot enable rating widgets in offline mode"):(p("cly_fb_widgets",a.popups||a.widgets),ta(this.url+"/star-rating/stylesheets/countly-feedback-web.css"),a=a.popups||a.widgets,0<a.length?(document.body.insertAdjacentHTML("beforeend",'<div id="cfbg"></div>'),this.initializeRatingWidgets(a)):f(k.ERROR,"enableRatingWidgets, You should provide at least one widget id as param. Read documentation for more detail. https://resources.count.ly/plugins/feedback")))};
this.get_available_feedback_widgets=function(a){f(k.INFO,"get_available_feedback_widgets, Initializing feedbacks, callback function is provided:["+!!a+"]");this.check_consent("feedback")?V?f(k.ERROR,"get_available_feedback_widgets, Cannot enable feedback in offline mode."):ja("get_available_feedback_widgets",this.url+Ja,{method:"feedback",device_id:this.device_id,app_key:this.app_key},function(b,c,h){if(b)f(k.ERROR,"get_available_feedback_widgets, Error occurred while fetching feedbacks",b),a&&a(null,
b);else try{var m=JSON.parse(h).result||[];a&&a(m,null)}catch(d){f(k.ERROR,"get_available_feedback_widgets, Error while processing feedbacks",d),a&&a(null,d)}}):a&&a(null,Error("Consent for feedback not provided."))};this.present_feedback_widget=function(a,b,c){function h(C){document.getElementById("countly-surveys-wrapper-"+C._id).style.display="block";document.getElementById("csbg").style.display="block"}function m(C){if(!C.appearance.hideS){var P=document.createElement("div");P.innerText=C.appearance.text;
P.style.color=7>C.appearance.text_color?"#"+C.appearance.text_color:C.appearance.text_color;P.style.backgroundColor=7>C.appearance.bg_color.length?"#"+C.appearance.bg_color:C.appearance.bg_color;P.className="countly-feedback-sticker  "+C.appearance.position+"-"+C.appearance.size;P.id="countly-feedback-sticker-"+C._id;document.body.appendChild(P);B(document.getElementById("countly-feedback-sticker-"+C._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+C._id).style.display="flex";
document.getElementById("csbg").style.display="block"})}B(document.getElementById("countly-feedback-close-icon-"+C._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+C._id).style.display="none";document.getElementById("csbg").style.display="none"})}f(k.INFO,"present_feedback_widget, Presenting the feedback widget by appending to the element with ID: [ "+b+" ] and className: [ "+c+" ]");if(this.check_consent("feedback"))if(!a||"object"!==typeof a||Array.isArray(a))f(k.ERROR,
"present_feedback_widget, Please provide at least one feedback widget object.");else try{var d=this.url;if("nps"===a.type)d+="/feedback/nps";else if("survey"===a.type)d+="/feedback/survey";else if("rating"===a.type)d+="/feedback/rating";else{f(k.ERROR,"present_feedback_widget, Feedback widget only accepts nps, rating and survey types.");return}var n=window.origin||window.location.origin;if("rating"===a.type){var t="ratings";ta(this.url+"/star-rating/stylesheets/countly-feedback-web.css")}else ta(this.url+
"/surveys/stylesheets/countly-surveys.css"),t="surveys";d+="?widget_id="+a._id;d+="&app_key="+this.app_key;d+="&device_id="+this.device_id;d+="&sdk_name=javascript_native_web";d+="&platform="+this.platform;d+="&app_version="+this.app_version;d+="&sdk_version=21.11.1";d+="&origin="+n;d+="&widget_v=web";var y=document.createElement("iframe");y.src=d;y.name="countly-"+t+"-iframe";y.id="countly-"+t+"-iframe";var F=!1;y.onload=function(){F&&(document.getElementById("countly-"+t+"-wrapper-"+a._id).style.display=
"none",document.getElementById("csbg").style.display="none");F=!0};for(var O=document.getElementById("csbg");O;)O.remove(),O=document.getElementById("csbg");var I=document.getElementsByClassName("countly-"+t+"-wrapper");for(d=0;d<I.length;d++)I[d].remove();I=document.createElement("div");I.className="countly-"+t+"-wrapper";I.id="countly-"+t+"-wrapper-"+a._id;"survey"===a.type&&(I.className=I.className+" "+a.appearance.position);var Ba=document.body;d=!1;b&&(document.getElementById(b)?(Ba=document.getElementById(b),
d=!0):f(k.ERROR,"present_feedback_widget, Provided ID not found."));d||c&&(document.getElementsByClassName(c)[0]?Ba=document.getElementsByClassName(c)[0]:f(k.ERROR,"present_feedback_widget, Provided class not found."));Ba.insertAdjacentHTML("beforeend",'<div id="csbg"></div>');Ba.appendChild(I);if("rating"===a.type){var Oa=document.createElement("div");Oa.className="countly-ratings-overlay";Oa.id="countly-ratings-overlay-"+a._id;I.appendChild(Oa);B(document.getElementById("countly-ratings-overlay-"+
a._id),"click",function(){document.getElementById("countly-ratings-wrapper-"+a._id).style.display="none"})}I.appendChild(y);B(window,"message",function(C){var P={};try{P=JSON.parse(C.data)}catch(hb){f(k.ERROR,"present_feedback_widget, Error while parsing message body "+hb)}P.close&&(document.getElementById("countly-"+t+"-wrapper-"+a._id).style.display="none",document.getElementById("csbg").style.display="none")});if("survey"===a.type){var L=!1;switch(a.showPolicy){case "afterPageLoad":"complete"===
document.readyState?L||(L=!0,h(a)):B(document,"readystatechange",function(C){"complete"!==C.target.readyState||L||(L=!0,h(a))});break;case "afterConstantDelay":setTimeout(function(){L||(L=!0,h(a))},1E4);break;case "onAbandon":"complete"===document.readyState?B(document,"mouseleave",function(){L||(L=!0,h(a))}):B(document,"readystatechange",function(C){"complete"===C.target.readyState&&B(document,"mouseleave",function(){L||(L=!0,h(a))})});break;case "onScrollHalfwayDown":B(window,"scroll",function(){if(!L){var C=
Math.max(window.scrollY,document.body.scrollTop,document.documentElement.scrollTop),P=sa();C>=P/2&&(L=!0,h(a))}});break;default:L||(L=!0,h(a))}}else if("nps"===a.type)document.getElementById("countly-"+t+"-wrapper-"+a._id).style.display="block",document.getElementById("csbg").style.display="block";else if("rating"===a.type){var Ca=!1;"complete"===document.readyState?Ca||(Ca=!0,m(a)):B(document,"readystatechange",function(C){"complete"!==C.target.readyState||Ca||(Ca=!0,m(a))})}}catch(C){f(k.ERROR,
"present_feedback_widget, Somethings went wrong while presenting the feedback",C)}};this.recordError=function(a,b,c){f(k.INFO,"recordError, Recording error");if(this.check_consent("crashes")&&a){c=c||Ka;var h="";"object"===typeof a?"undefined"!==typeof a.stack?h=a.stack:("undefined"!==typeof a.name&&(h+=a.name+":"),"undefined"!==typeof a.message&&(h+=a.message+"\n"),"undefined"!==typeof a.fileName&&(h+="in "+a.fileName+"\n"),"undefined"!==typeof a.lineNumber&&(h+="on "+a.lineNumber),"undefined"!==
typeof a.columnNumber&&(h+=":"+a.columnNumber)):h=a+"";c=S(c,e.maxKeyLength,e.maxValueSize,e.maxSegmentationValues,"record_error",f);if(h.length>e.maxStackTraceLineLength*e.maxStackTraceLinesPerThread){f(k.DEBUG,"record_error, Error stack is too long will be truncated");h=h.split("\n");h.length>e.maxStackTraceLinesPerThread&&(h=h.splice(0,e.maxStackTraceLinesPerThread));a=0;for(var m=h.length;a<m;a++)h[a].length>e.maxStackTraceLineLength&&(h[a]=h[a].substring(0,e.maxStackTraceLineLength));h=h.join("\n")}b=
!!b;a=xa();h={_resolution:a._resolution,_error:h,_app_version:a._app_version,_run:q()-cb,_not_os_specific:!0,_javascript:!0};if(a=navigator.battery||navigator.webkitBattery||navigator.mozBattery||navigator.msBattery)h._bat=Math.floor(100*a.level);"undefined"!==typeof navigator.onLine&&(h._online=!!navigator.onLine);h._background=!document.hasFocus();0<ea.length&&(h._logs=ea.join("\n"));ea=[];h._nonfatal=b;h._view=this.getViewName();"undefined"!==typeof c&&(h._custom=c);try{var d=document.createElement("canvas").getContext("experimental-webgl");
h._opengl=d.getParameter(d.VERSION)}catch(n){}H({crash:JSON.stringify(h)})}};this.onStorageChange=function(a,b){f(k.INFO,"onStorageChange, Applying storage changes");switch(a){case "cly_queue":G=e.deserialize(b||"[]");break;case "cly_event":J=e.deserialize(b||"[]");break;case "cly_remote_configs":M=e.deserialize(b||"{}");break;case "cly_ignore":e.ignore_visitor=e.deserialize(b);break;case "cly_id":e.device_id=e.deserialize(b)}};this._internals={store:p,getDocWidth:Fa,getDocHeight:sa,getViewportHeight:Qa,
get_page_coord:Ea,get_event_target:Aa,add_event:B,getProperties:la,truncateObject:S,truncateSingleValue:A,stripTrailingSlash:Da,prepareParams:Pa,sendXmlHttpRequest:ja,isResponseValid:ab,getMsTimestamp:z,getTimestamp:q,log:f,getMetrics:xa,generateUUID:v,isUUID:function(){return/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-4[0-9a-fA-F]{3}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/.test(e.device_id)},getId:ia,heartBeat:Y,toRequestQueue:H,reportViewDuration:T,loadJS:Sa,loadCSS:ta,getLastView:function(){return aa},setToken:bb,
getToken:function(){var a=p("cly_token");p("cly_token",null);return a},showLoader:Ta,hideLoader:Ua,add_cly_events:u,detect_device:eb,getRequestQueue:function(){return G},getEventQueue:function(){return J},clearQueue:function(){G=[];p("cly_queue",[]);J=[];p("cly_event",[])}};this.initialize()};l.init=function(g){g=g||{};var u=g.app_key||l.app_key;if(!l.i||!l.i[u]){g=new l.CountlyClass(g);if(!l.i){l.i={};for(var x in g)l[x]=g[x]}l.i[u]=g}return l.i[u]};var ra=0,B=function(g,u,x){"undefined"!==typeof g.addEventListener?
g.addEventListener(u,x,!1):g.attachEvent("on"+u,x)},Aa=function(g){return g?"undefined"!==typeof g.target?g.target:g.srcElement:window.event.srcElement},eb=function(){var g=navigator.userAgent.toLowerCase(),u=function(x){x&&(g=(x+"").toLowerCase());x=/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/;var D="desktop";/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(g)?
D="tablet":x.test(g)&&(D="phone");return D};return{device:u(),detect:u,isMobile:"desktop"!==u()?!0:!1,userAgent:g}}();window.addEventListener("storage",function(g){var u=(g.key+"").split("/"),x=u.pop();u=u.pop();if(l.i&&l.i[u])l.i[u].onStorageChange(x,g.newValue)});l.serialize=function(g){"object"===typeof g&&(g=JSON.stringify(g));return g};l.deserialize=function(g){try{g=JSON.parse(g)}catch(u){}return g};l.getViewName=function(){return window.location.pathname};l.getViewUrl=function(){return window.location.pathname};
return l}});
