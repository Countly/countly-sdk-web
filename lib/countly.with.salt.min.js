/*! For license information please see countly.with.salt.min.js.LICENSE.txt */
(()=>{var e={452:function(e,t,i){var n;e.exports=(n=i(249),i(269),i(214),i(888),i(109),function(){var e=n,t=e.lib.BlockCipher,i=e.algo,r=[],o=[],a=[],s=[],c=[],l=[],d=[],u=[],h=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,n=0;for(t=0;t<256;t++){var g=n^n<<1^n<<2^n<<3^n<<4;g=g>>>8^255&g^99,r[i]=g,o[g]=i;var p=e[i],_=e[p],m=e[_],v=257*e[g]^16843008*g;a[i]=v<<24|v>>>8,s[i]=v<<16|v>>>16,c[i]=v<<8|v>>>24,l[i]=v,v=16843009*m^65537*_^257*p^16843008*i,d[g]=v<<24|v>>>8,u[g]=v<<16|v>>>16,h[g]=v<<8|v>>>24,f[g]=v,i?(i=p^e[e[e[m^p]]],n^=e[e[n]]):i=n=1}}();var g=[0,1,2,4,8,16,32,64,128,27,54],p=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,n=4*((this._nRounds=i+6)+1),o=this._keySchedule=[],a=0;a<n;a++)a<i?o[a]=t[a]:(l=o[a-1],a%i?i>6&&a%i==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=r[(l=l<<8|l>>>24)>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=g[a/i|0]<<24),o[a]=o[a-i]^l);for(var s=this._invKeySchedule=[],c=0;c<n;c++){if(a=n-c,c%4)var l=o[a];else l=o[a-4];s[c]=c<4||a<=4?l:d[r[l>>>24]]^u[r[l>>>16&255]]^h[r[l>>>8&255]]^f[r[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,l,r)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,d,u,h,f,o),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,r,o,a,s){for(var c=this._nRounds,l=e[t]^i[0],d=e[t+1]^i[1],u=e[t+2]^i[2],h=e[t+3]^i[3],f=4,g=1;g<c;g++){var p=n[l>>>24]^r[d>>>16&255]^o[u>>>8&255]^a[255&h]^i[f++],_=n[d>>>24]^r[u>>>16&255]^o[h>>>8&255]^a[255&l]^i[f++],m=n[u>>>24]^r[h>>>16&255]^o[l>>>8&255]^a[255&d]^i[f++],v=n[h>>>24]^r[l>>>16&255]^o[d>>>8&255]^a[255&u]^i[f++];l=p,d=_,u=m,h=v}p=(s[l>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&h])^i[f++],_=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[h>>>8&255]<<8|s[255&l])^i[f++],m=(s[u>>>24]<<24|s[h>>>16&255]<<16|s[l>>>8&255]<<8|s[255&d])^i[f++],v=(s[h>>>24]<<24|s[l>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^i[f++],e[t]=p,e[t+1]=_,e[t+2]=m,e[t+3]=v},keySize:8});e.AES=t._createHelper(p)}(),n.AES)},407:function(e,t,i){var n;e.exports=(n=i(249),i(269),i(214),i(888),i(109),function(){var e=n,t=e.lib.BlockCipher,i=e.algo;const r=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var s={pbox:[],sbox:[]};function c(e,t){let i=t>>24&255,n=t>>16&255,r=t>>8&255,o=255&t,a=e.sbox[0][i]+e.sbox[1][n];return a^=e.sbox[2][r],a+=e.sbox[3][o],a}function l(e,t,i){let n,o=t,a=i;for(let t=0;t<r;++t)o^=e.pbox[t],a=c(e,o)^a,n=o,o=a,a=n;return n=o,o=a,a=n,a^=e.pbox[r],o^=e.pbox[r+1],{left:o,right:a}}var d=i.Blowfish=t.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4;!function(e,t,i){for(let t=0;t<4;t++){e.sbox[t]=[];for(let i=0;i<256;i++)e.sbox[t][i]=a[t][i]}let n=0;for(let a=0;a<r+2;a++)e.pbox[a]=o[a]^t[n],n++,n>=i&&(n=0);let s=0,c=0,d=0;for(let t=0;t<r+2;t+=2)d=l(e,s,c),s=d.left,c=d.right,e.pbox[t]=s,e.pbox[t+1]=c;for(let t=0;t<4;t++)for(let i=0;i<256;i+=2)d=l(e,s,c),s=d.left,c=d.right,e.sbox[t][i]=s,e.sbox[t][i+1]=c}(s,t,i)}},encryptBlock:function(e,t){var i=l(s,e[t],e[t+1]);e[t]=i.left,e[t+1]=i.right},decryptBlock:function(e,t){var i=function(e,t,i){let n,o=t,a=i;for(let t=r+1;t>1;--t)o^=e.pbox[t],a=c(e,o)^a,n=o,o=a,a=n;return n=o,o=a,a=n,a^=e.pbox[1],o^=e.pbox[0],{left:o,right:a}}(s,e[t],e[t+1]);e[t]=i.left,e[t+1]=i.right},blockSize:2,keySize:4,ivSize:2});e.Blowfish=t._createHelper(d)}(),n.Blowfish)},109:function(e,t,i){var n,r,o,a,s,c,l,d,u,h,f,g,p,_,m,v,y,w,b;e.exports=(n=i(249),i(888),void(n.lib.Cipher||(r=n,o=r.lib,a=o.Base,s=o.WordArray,c=o.BufferedBlockAlgorithm,l=r.enc,l.Utf8,d=l.Base64,u=r.algo.EvpKDF,h=o.Cipher=c.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:y}return function(t){return{encrypt:function(i,n,r){return e(n).encrypt(t,i,n,r)},decrypt:function(i,n,r){return e(n).decrypt(t,i,n,r)}}}}()}),o.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=r.mode={},g=o.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=f.CBC=function(){var e=g.extend();function t(e,t,i){var n,r=this._iv;r?(n=r,this._iv=void 0):n=this._prevBlock;for(var o=0;o<i;o++)e[t+o]^=n[o]}return e.Encryptor=e.extend({processBlock:function(e,i){var n=this._cipher,r=n.blockSize;t.call(this,e,i,r),n.encryptBlock(e,i),this._prevBlock=e.slice(i,i+r)}}),e.Decryptor=e.extend({processBlock:function(e,i){var n=this._cipher,r=n.blockSize,o=e.slice(i,i+r);n.decryptBlock(e,i),t.call(this,e,i,r),this._prevBlock=o}}),e}(),_=(r.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,n=i-e.sigBytes%i,r=n<<24|n<<16|n<<8|n,o=[],a=0;a<n;a+=4)o.push(r);var c=s.create(o,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.BlockCipher=h.extend({cfg:h.cfg.extend({mode:p,padding:_}),reset:function(){var e;h.reset.call(this);var t=this.cfg,i=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,i&&i.words):(this._mode=e.call(n,this,i&&i.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),m=o.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(r.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;return(i?s.create([1398893684,1701076831]).concat(i).concat(t):t).toString(d)},parse:function(e){var t,i=d.parse(e),n=i.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=s.create(n.slice(2,4)),n.splice(0,4),i.sigBytes-=16),m.create({ciphertext:i,salt:t})}},y=o.SerializableCipher=a.extend({cfg:a.extend({format:v}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var r=e.createEncryptor(i,n),o=r.finalize(t),a=r.cfg;return m.create({ciphertext:o,key:i,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),w=(r.kdf={}).OpenSSL={execute:function(e,t,i,n,r){if(n||(n=s.random(8)),r)o=u.create({keySize:t+i,hasher:r}).compute(e,n);else var o=u.create({keySize:t+i}).compute(e,n);var a=s.create(o.words.slice(t),4*i);return o.sigBytes=4*t,m.create({key:o,iv:a,salt:n})}},b=o.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:w}),encrypt:function(e,t,i,n){var r=(n=this.cfg.extend(n)).kdf.execute(i,e.keySize,e.ivSize,n.salt,n.hasher);n.iv=r.iv;var o=y.encrypt.call(this,e,t,r.key,n);return o.mixIn(r),o},decrypt:function(e,t,i,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var r=n.kdf.execute(i,e.keySize,e.ivSize,t.salt,n.hasher);return n.iv=r.iv,y.decrypt.call(this,e,t,r.key,n)}}))))},249:function(e,t,i){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==i.g&&i.g.crypto&&(n=i.g.crypto),!n)try{n=i(480)}catch(e){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),a={},s=a.lib={},c=s.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=s.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<r;o++){var a=i[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=a<<24-(n+o)%4*8}else for(var s=0;s<r;s+=4)t[n+s>>>2]=i[s>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4)t.push(r());return new l.init(t,e)}}),d=a.enc={},u=d.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r++){var o=t[r>>>2]>>>24-r%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(i,t/2)}},h=d.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r++){var o=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(i,t)}},f=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},g=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i,n=this._data,r=n.words,o=n.sigBytes,a=this.blockSize,s=o/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,d=e.min(4*c,o);if(c){for(var u=0;u<c;u+=a)this._doProcessBlock(r,u);i=r.splice(0,c),n.sigBytes-=d}return new l.init(i,d)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(s.Hasher=g.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new p.HMAC.init(e,i).finalize(t)}}}),a.algo={});return a}(Math),n)},269:function(e,t,i){var n,r,o;e.exports=(n=i(249),o=(r=n).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp();for(var r=[],o=0;o<i;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<i;s++)r.push(n.charAt(a>>>6*(3-s)&63));var c=n.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(e){var t=e.length,i=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var r=0;r<i.length;r++)n[i.charCodeAt(r)]=r}var a=i.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return function(e,t,i){for(var n=[],r=0,a=0;a<t;a++)if(a%4){var s=i[e.charCodeAt(a-1)]<<a%4*2|i[e.charCodeAt(a)]>>>6-a%4*2;n[r>>>2]|=s<<24-r%4*8,r++}return o.create(n,r)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)},786:function(e,t,i){var n,r,o;e.exports=(n=i(249),o=(r=n).lib.WordArray,r.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var i=e.words,n=e.sigBytes,r=t?this._safe_map:this._map;e.clamp();for(var o=[],a=0;a<n;a+=3)for(var s=(i[a>>>2]>>>24-a%4*8&255)<<16|(i[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|i[a+2>>>2]>>>24-(a+2)%4*8&255,c=0;c<4&&a+.75*c<n;c++)o.push(r.charAt(s>>>6*(3-c)&63));var l=r.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},parse:function(e,t){void 0===t&&(t=!0);var i=e.length,n=t?this._safe_map:this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<n.length;a++)r[n.charCodeAt(a)]=a}var s=n.charAt(64);if(s){var c=e.indexOf(s);-1!==c&&(i=c)}return function(e,t,i){for(var n=[],r=0,a=0;a<t;a++)if(a%4){var s=i[e.charCodeAt(a-1)]<<a%4*2|i[e.charCodeAt(a)]>>>6-a%4*2;n[r>>>2]|=s<<24-r%4*8,r++}return o.create(n,r)}(e,i,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},n.enc.Base64url)},298:function(e,t,i){var n;e.exports=(n=i(249),function(){var e=n,t=e.lib.WordArray,i=e.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r+=2){var o=t[r>>>2]>>>16-r%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var i=e.length,n=[],r=0;r<i;r++)n[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return t.create(n,2*i)}},i.Utf16LE={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],o=0;o<i;o+=2){var a=r(t[o>>>2]>>>16-o%4*8&65535);n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var i=e.length,n=[],o=0;o<i;o++)n[o>>>1]|=r(e.charCodeAt(o)<<16-o%2*16);return t.create(n,2*i)}}}(),n.enc.Utf16)},888:function(e,t,i){var n,r,o,a,s,c,l,d;e.exports=(d=i(249),i(783),i(824),o=(r=(n=d).lib).Base,a=r.WordArray,c=(s=n.algo).MD5,l=s.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i,n=this.cfg,r=n.hasher.create(),o=a.create(),s=o.words,c=n.keySize,l=n.iterations;s.length<c;){i&&r.update(i),i=r.update(e).finalize(t),r.reset();for(var d=1;d<l;d++)i=r.finalize(i),r.reset();o.concat(i)}return o.sigBytes=4*c,o}}),n.EvpKDF=function(e,t,i){return l.create(i).compute(e,t)},d.EvpKDF)},209:function(e,t,i){var n,r,o,a;e.exports=(a=i(249),i(109),r=(n=a).lib.CipherParams,o=n.enc.Hex,n.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return r.create({ciphertext:t})}},a.format.Hex)},824:function(e,t,i){var n,r,o;e.exports=(r=(n=i(249)).lib.Base,o=n.enc.Utf8,void(n.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var i=e.blockSize,n=4*i;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),s=r.words,c=a.words,l=0;l<i;l++)s[l]^=1549556828,c[l]^=909522486;r.sigBytes=a.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})))},354:function(e,t,i){var n;e.exports=(n=i(249),i(938),i(433),i(298),i(269),i(786),i(214),i(783),i(153),i(792),i(34),i(460),i(327),i(706),i(824),i(112),i(888),i(109),i(568),i(242),i(968),i(660),i(148),i(615),i(807),i(77),i(475),i(991),i(209),i(452),i(253),i(857),i(454),i(974),i(407),n)},433:function(e,t,i){var n;e.exports=(n=i(249),function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init,i=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var i=e.byteLength,n=[],r=0;r<i;r++)n[r>>>2]|=e[r]<<24-r%4*8;t.call(this,n,i)}else t.apply(this,arguments)};i.prototype=e}}(),n.lib.WordArray)},214:function(e,t,i){var n;e.exports=(n=i(249),function(e){var t=n,i=t.lib,r=i.WordArray,o=i.Hasher,a=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=a.MD5=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=t+i,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var o=this._hash.words,a=e[t+0],c=e[t+1],f=e[t+2],g=e[t+3],p=e[t+4],_=e[t+5],m=e[t+6],v=e[t+7],y=e[t+8],w=e[t+9],b=e[t+10],k=e[t+11],x=e[t+12],R=e[t+13],S=e[t+14],E=e[t+15],N=o[0],I=o[1],B=o[2],O=o[3];N=l(N,I,B,O,a,7,s[0]),O=l(O,N,I,B,c,12,s[1]),B=l(B,O,N,I,f,17,s[2]),I=l(I,B,O,N,g,22,s[3]),N=l(N,I,B,O,p,7,s[4]),O=l(O,N,I,B,_,12,s[5]),B=l(B,O,N,I,m,17,s[6]),I=l(I,B,O,N,v,22,s[7]),N=l(N,I,B,O,y,7,s[8]),O=l(O,N,I,B,w,12,s[9]),B=l(B,O,N,I,b,17,s[10]),I=l(I,B,O,N,k,22,s[11]),N=l(N,I,B,O,x,7,s[12]),O=l(O,N,I,B,R,12,s[13]),B=l(B,O,N,I,S,17,s[14]),N=d(N,I=l(I,B,O,N,E,22,s[15]),B,O,c,5,s[16]),O=d(O,N,I,B,m,9,s[17]),B=d(B,O,N,I,k,14,s[18]),I=d(I,B,O,N,a,20,s[19]),N=d(N,I,B,O,_,5,s[20]),O=d(O,N,I,B,b,9,s[21]),B=d(B,O,N,I,E,14,s[22]),I=d(I,B,O,N,p,20,s[23]),N=d(N,I,B,O,w,5,s[24]),O=d(O,N,I,B,S,9,s[25]),B=d(B,O,N,I,g,14,s[26]),I=d(I,B,O,N,y,20,s[27]),N=d(N,I,B,O,R,5,s[28]),O=d(O,N,I,B,f,9,s[29]),B=d(B,O,N,I,v,14,s[30]),N=u(N,I=d(I,B,O,N,x,20,s[31]),B,O,_,4,s[32]),O=u(O,N,I,B,y,11,s[33]),B=u(B,O,N,I,k,16,s[34]),I=u(I,B,O,N,S,23,s[35]),N=u(N,I,B,O,c,4,s[36]),O=u(O,N,I,B,p,11,s[37]),B=u(B,O,N,I,v,16,s[38]),I=u(I,B,O,N,b,23,s[39]),N=u(N,I,B,O,R,4,s[40]),O=u(O,N,I,B,a,11,s[41]),B=u(B,O,N,I,g,16,s[42]),I=u(I,B,O,N,m,23,s[43]),N=u(N,I,B,O,w,4,s[44]),O=u(O,N,I,B,x,11,s[45]),B=u(B,O,N,I,E,16,s[46]),N=h(N,I=u(I,B,O,N,f,23,s[47]),B,O,a,6,s[48]),O=h(O,N,I,B,v,10,s[49]),B=h(B,O,N,I,S,15,s[50]),I=h(I,B,O,N,_,21,s[51]),N=h(N,I,B,O,x,6,s[52]),O=h(O,N,I,B,g,10,s[53]),B=h(B,O,N,I,b,15,s[54]),I=h(I,B,O,N,c,21,s[55]),N=h(N,I,B,O,y,6,s[56]),O=h(O,N,I,B,E,10,s[57]),B=h(B,O,N,I,m,15,s[58]),I=h(I,B,O,N,R,21,s[59]),N=h(N,I,B,O,p,6,s[60]),O=h(O,N,I,B,k,10,s[61]),B=h(B,O,N,I,f,15,s[62]),I=h(I,B,O,N,w,21,s[63]),o[0]=o[0]+N|0,o[1]=o[1]+I|0,o[2]=o[2]+B|0,o[3]=o[3]+O|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;i[r>>>5]|=128<<24-r%32;var o=e.floor(n/4294967296),a=n;i[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(i.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var d=c[l];c[l]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,i,n,r,o,a){var s=e+(t&i|~t&n)+r+a;return(s<<o|s>>>32-o)+t}function d(e,t,i,n,r,o,a){var s=e+(t&n|i&~n)+r+a;return(s<<o|s>>>32-o)+t}function u(e,t,i,n,r,o,a){var s=e+(t^i^n)+r+a;return(s<<o|s>>>32-o)+t}function h(e,t,i,n,r,o,a){var s=e+(i^(t|~n))+r+a;return(s<<o|s>>>32-o)+t}t.MD5=o._createHelper(c),t.HmacMD5=o._createHmacHelper(c)}(Math),n.MD5)},568:function(e,t,i){var n;e.exports=(n=i(249),i(109),n.mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,i,n){var r,o=this._iv;o?(r=o.slice(0),this._iv=void 0):r=this._prevBlock,n.encryptBlock(r,0);for(var a=0;a<i;a++)e[t+a]^=r[a]}return e.Encryptor=e.extend({processBlock:function(e,i){var n=this._cipher,r=n.blockSize;t.call(this,e,i,r,n),this._prevBlock=e.slice(i,i+r)}}),e.Decryptor=e.extend({processBlock:function(e,i){var n=this._cipher,r=n.blockSize,o=e.slice(i,i+r);t.call(this,e,i,r,n),this._prevBlock=o}}),e}(),n.mode.CFB)},968:function(e,t,i){var n;e.exports=(n=i(249),i(109),n.mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,i=e>>8&255,n=255&e;255===t?(t=0,255===i?(i=0,255===n?n=0:++n):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=n}else e+=1<<24;return e}var i=e.Encryptor=e.extend({processBlock:function(e,i){var n=this._cipher,r=n.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(a);var s=a.slice(0);n.encryptBlock(s,0);for(var c=0;c<r;c++)e[i+c]^=s[c]}});return e.Decryptor=i,e}(),n.mode.CTRGladman)},242:function(e,t,i){var n,r,o;e.exports=(o=i(249),i(109),o.mode.CTR=(r=(n=o.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=this._iv,o=this._counter;r&&(o=this._counter=r.slice(0),this._iv=void 0);var a=o.slice(0);i.encryptBlock(a,0),o[n-1]=o[n-1]+1|0;for(var s=0;s<n;s++)e[t+s]^=a[s]}}),n.Decryptor=r,n),o.mode.CTR)},148:function(e,t,i){var n,r;e.exports=(r=i(249),i(109),r.mode.ECB=((n=r.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),n.Decryptor=n.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),n),r.mode.ECB)},660:function(e,t,i){var n,r,o;e.exports=(o=i(249),i(109),o.mode.OFB=(r=(n=o.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=this._iv,o=this._keystream;r&&(o=this._keystream=r.slice(0),this._iv=void 0),i.encryptBlock(o,0);for(var a=0;a<n;a++)e[t+a]^=o[a]}}),n.Decryptor=r,n),o.mode.OFB)},615:function(e,t,i){var n;e.exports=(n=i(249),i(109),n.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,n=4*t,r=n-i%n,o=i+r-1;e.clamp(),e.words[o>>>2]|=r<<24-o%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Ansix923)},807:function(e,t,i){var n;e.exports=(n=i(249),i(109),n.pad.Iso10126={pad:function(e,t){var i=4*t,r=i-e.sigBytes%i;e.concat(n.lib.WordArray.random(r-1)).concat(n.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)},77:function(e,t,i){var n;e.exports=(n=i(249),i(109),n.pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)},991:function(e,t,i){var n;e.exports=(n=i(249),i(109),n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)},475:function(e,t,i){var n;e.exports=(n=i(249),i(109),n.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){var t=e.words,i=e.sigBytes-1;for(i=e.sigBytes-1;i>=0;i--)if(t[i>>>2]>>>24-i%4*8&255){e.sigBytes=i+1;break}}},n.pad.ZeroPadding)},112:function(e,t,i){var n,r,o,a,s,c,l,d,u;e.exports=(u=i(249),i(153),i(824),o=(r=(n=u).lib).Base,a=r.WordArray,c=(s=n.algo).SHA256,l=s.HMAC,d=s.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,n=l.create(i.hasher,e),r=a.create(),o=a.create([1]),s=r.words,c=o.words,d=i.keySize,u=i.iterations;s.length<d;){var h=n.update(t).finalize(o);n.reset();for(var f=h.words,g=f.length,p=h,_=1;_<u;_++){p=n.finalize(p),n.reset();for(var m=p.words,v=0;v<g;v++)f[v]^=m[v]}r.concat(h),c[0]++}return r.sigBytes=4*d,r}}),n.PBKDF2=function(e,t,i){return d.create(i).compute(e,t)},u.PBKDF2)},974:function(e,t,i){var n;e.exports=(n=i(249),i(269),i(214),i(888),i(109),function(){var e=n,t=e.lib.StreamCipher,i=e.algo,r=[],o=[],a=[],s=i.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)c.call(this);for(r=0;r<8;r++)n[r]^=i[r+4&7];if(t){var o=t.words,a=o[0],s=o[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=l>>>16|4294901760&d,h=d<<16|65535&l;for(n[0]^=l,n[1]^=u,n[2]^=d,n[3]^=h,n[4]^=l,n[5]^=u,n[6]^=d,n[7]^=h,r=0;r<4;r++)c.call(this)}},_doProcessBlock:function(e,t){var i=this._X;c.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,i=0;i<8;i++)o[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,i=0;i<8;i++){var n=e[i]+t[i],r=65535&n,s=n>>>16,c=((r*r>>>17)+r*s>>>15)+s*s,l=((4294901760&n)*n|0)+((65535&n)*n|0);a[i]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=t._createHelper(s)}(),n.RabbitLegacy)},454:function(e,t,i){var n;e.exports=(n=i(249),i(269),i(214),i(888),i(109),function(){var e=n,t=e.lib.StreamCipher,i=e.algo,r=[],o=[],a=[],s=i.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=0;i<4;i++)e[i]=16711935&(e[i]<<8|e[i]>>>24)|4278255360&(e[i]<<24|e[i]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,i=0;i<4;i++)c.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var o=t.words,a=o[0],s=o[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=l>>>16|4294901760&d,h=d<<16|65535&l;for(r[0]^=l,r[1]^=u,r[2]^=d,r[3]^=h,r[4]^=l,r[5]^=u,r[6]^=d,r[7]^=h,i=0;i<4;i++)c.call(this)}},_doProcessBlock:function(e,t){var i=this._X;c.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,i=0;i<8;i++)o[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,i=0;i<8;i++){var n=e[i]+t[i],r=65535&n,s=n>>>16,c=((r*r>>>17)+r*s>>>15)+s*s,l=((4294901760&n)*n|0)+((65535&n)*n|0);a[i]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=t._createHelper(s)}(),n.Rabbit)},857:function(e,t,i){var n;e.exports=(n=i(249),i(269),i(214),i(888),i(109),function(){var e=n,t=e.lib.StreamCipher,i=e.algo,r=i.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,n=this._S=[],r=0;r<256;r++)n[r]=r;r=0;for(var o=0;r<256;r++){var a=r%i,s=t[a>>>2]>>>24-a%4*8&255;o=(o+n[r]+s)%256;var c=n[r];n[r]=n[o],n[o]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var e=this._S,t=this._i,i=this._j,n=0,r=0;r<4;r++){i=(i+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[i],e[i]=o,n|=e[(e[t]+e[i])%256]<<24-8*r}return this._i=t,this._j=i,n}e.RC4=t._createHelper(r);var a=i.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)o.call(this)}});e.RC4Drop=t._createHelper(a)}(),n.RC4)},706:function(e,t,i){var n;e.exports=(n=i(249),function(e){var t=n,i=t.lib,r=i.WordArray,o=i.Hasher,a=t.algo,s=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=r.create([0,1518500249,1859775393,2400959708,2840853838]),h=r.create([1352829926,1548603684,1836072691,2053994217,0]),f=a.RIPEMD160=o.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=t+i,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var o,a,f,w,b,k,x,R,S,E,N,I=this._hash.words,B=u.words,O=h.words,D=s.words,A=c.words,C=l.words,z=d.words;for(k=o=I[0],x=a=I[1],R=f=I[2],S=w=I[3],E=b=I[4],i=0;i<80;i+=1)N=o+e[t+D[i]]|0,N+=i<16?g(a,f,w)+B[0]:i<32?p(a,f,w)+B[1]:i<48?_(a,f,w)+B[2]:i<64?m(a,f,w)+B[3]:v(a,f,w)+B[4],N=(N=y(N|=0,C[i]))+b|0,o=b,b=w,w=y(f,10),f=a,a=N,N=k+e[t+A[i]]|0,N+=i<16?v(x,R,S)+O[0]:i<32?m(x,R,S)+O[1]:i<48?_(x,R,S)+O[2]:i<64?p(x,R,S)+O[3]:g(x,R,S)+O[4],N=(N=y(N|=0,z[i]))+E|0,k=E,E=S,S=y(R,10),R=x,x=N;N=I[1]+f+S|0,I[1]=I[2]+w+E|0,I[2]=I[3]+b+k|0,I[3]=I[4]+o+x|0,I[4]=I[0]+a+R|0,I[0]=N},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,o=r.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return r},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function g(e,t,i){return e^t^i}function p(e,t,i){return e&t|~e&i}function _(e,t,i){return(e|~t)^i}function m(e,t,i){return e&i|t&~i}function v(e,t,i){return e^(t|~i)}function y(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(f),t.HmacRIPEMD160=o._createHmacHelper(f)}(Math),n.RIPEMD160)},783:function(e,t,i){var n,r,o,a,s,c,l,d;e.exports=(r=(n=d=i(249)).lib,o=r.WordArray,a=r.Hasher,s=n.algo,c=[],l=s.SHA1=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],o=i[2],a=i[3],s=i[4],l=0;l<80;l++){if(l<16)c[l]=0|e[t+l];else{var d=c[l-3]^c[l-8]^c[l-14]^c[l-16];c[l]=d<<1|d>>>31}var u=(n<<5|n>>>27)+s+c[l];u+=l<20?1518500249+(r&o|~r&a):l<40?1859775393+(r^o^a):l<60?(r&o|r&a|o&a)-1894007588:(r^o^a)-899497514,s=a,a=o,o=r<<30|r>>>2,r=n,n=u}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=a._createHelper(l),n.HmacSHA1=a._createHmacHelper(l),d.SHA1)},792:function(e,t,i){var n,r,o,a,s,c;e.exports=(c=i(249),i(153),r=(n=c).lib.WordArray,o=n.algo,a=o.SHA256,s=o.SHA224=a.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=4,e}}),n.SHA224=a._createHelper(s),n.HmacSHA224=a._createHmacHelper(s),c.SHA224)},153:function(e,t,i){var n;e.exports=(n=i(249),function(e){var t=n,i=t.lib,r=i.WordArray,o=i.Hasher,a=t.algo,s=[],c=[];!function(){function t(t){for(var i=e.sqrt(t),n=2;n<=i;n++)if(!(t%n))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var n=2,r=0;r<64;)t(n)&&(r<8&&(s[r]=i(e.pow(n,.5))),c[r]=i(e.pow(n,1/3)),r++),n++}();var l=[],d=a.SHA256=o.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],o=i[2],a=i[3],s=i[4],d=i[5],u=i[6],h=i[7],f=0;f<64;f++){if(f<16)l[f]=0|e[t+f];else{var g=l[f-15],p=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,_=l[f-2],m=(_<<15|_>>>17)^(_<<13|_>>>19)^_>>>10;l[f]=p+l[f-7]+m+l[f-16]}var v=n&r^n&o^r&o,y=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),w=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&d^~s&u)+c[f]+l[f];h=u,u=d,d=s,s=a+w|0,a=o,o=r,r=n,n=w+(y+v)|0}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+s|0,i[5]=i[5]+d|0,i[6]=i[6]+u|0,i[7]=i[7]+h|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=e.floor(n/4294967296),i[15+(r+64>>>9<<4)]=n,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(d),t.HmacSHA256=o._createHmacHelper(d)}(Math),n.SHA256)},327:function(e,t,i){var n;e.exports=(n=i(249),i(938),function(e){var t=n,i=t.lib,r=i.WordArray,o=i.Hasher,a=t.x64.Word,s=t.algo,c=[],l=[],d=[];!function(){for(var e=1,t=0,i=0;i<24;i++){c[e+5*t]=(i+1)*(i+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,o=0;o<24;o++){for(var s=0,u=0,h=0;h<7;h++){if(1&r){var f=(1<<h)-1;f<32?u^=1<<f:s^=1<<f-32}128&r?r=r<<1^113:r<<=1}d[o]=a.create(s,u)}}();var u=[];!function(){for(var e=0;e<25;e++)u[e]=a.create()}();var h=s.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,n=this.blockSize/2,r=0;r<n;r++){var o=e[t+2*r],a=e[t+2*r+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(I=i[r]).high^=a,I.low^=o}for(var s=0;s<24;s++){for(var h=0;h<5;h++){for(var f=0,g=0,p=0;p<5;p++)f^=(I=i[h+5*p]).high,g^=I.low;var _=u[h];_.high=f,_.low=g}for(h=0;h<5;h++){var m=u[(h+4)%5],v=u[(h+1)%5],y=v.high,w=v.low;for(f=m.high^(y<<1|w>>>31),g=m.low^(w<<1|y>>>31),p=0;p<5;p++)(I=i[h+5*p]).high^=f,I.low^=g}for(var b=1;b<25;b++){var k=(I=i[b]).high,x=I.low,R=c[b];R<32?(f=k<<R|x>>>32-R,g=x<<R|k>>>32-R):(f=x<<R-32|k>>>64-R,g=k<<R-32|x>>>64-R);var S=u[l[b]];S.high=f,S.low=g}var E=u[0],N=i[0];for(E.high=N.high,E.low=N.low,h=0;h<5;h++)for(p=0;p<5;p++){var I=i[b=h+5*p],B=u[b],O=u[(h+1)%5+5*p],D=u[(h+2)%5+5*p];I.high=B.high^~O.high&D.high,I.low=B.low^~O.low&D.low}I=i[0];var A=d[s];I.high^=A.high,I.low^=A.low}},_doFinalize:function(){var t=this._data,i=t.words,n=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;i[n>>>5]|=1<<24-n%32,i[(e.ceil((n+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*i.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],d=0;d<c;d++){var u=a[d],h=u.high,f=u.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),l.push(f),l.push(h)}return new r.init(l,s)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}});t.SHA3=o._createHelper(h),t.HmacSHA3=o._createHmacHelper(h)}(Math),n.SHA3)},460:function(e,t,i){var n,r,o,a,s,c,l,d;e.exports=(d=i(249),i(938),i(34),r=(n=d).x64,o=r.Word,a=r.WordArray,s=n.algo,c=s.SHA512,l=s.SHA384=c.extend({_doReset:function(){this._hash=new a.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),n.SHA384=c._createHelper(l),n.HmacSHA384=c._createHmacHelper(l),d.SHA384)},34:function(e,t,i){var n;e.exports=(n=i(249),i(938),function(){var e=n,t=e.lib.Hasher,i=e.x64,r=i.Word,o=i.WordArray,a=e.algo;function s(){return r.create.apply(r,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=s()}();var d=a.SHA512=t.extend({_doReset:function(){this._hash=new o.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],o=i[2],a=i[3],s=i[4],d=i[5],u=i[6],h=i[7],f=n.high,g=n.low,p=r.high,_=r.low,m=o.high,v=o.low,y=a.high,w=a.low,b=s.high,k=s.low,x=d.high,R=d.low,S=u.high,E=u.low,N=h.high,I=h.low,B=f,O=g,D=p,A=_,C=m,z=v,W=y,F=w,G=b,L=k,T=x,U=R,H=S,M=E,P=N,V=I,j=0;j<80;j++){var q,J,K=l[j];if(j<16)J=K.high=0|e[t+2*j],q=K.low=0|e[t+2*j+1];else{var Y=l[j-15],X=Y.high,Q=Y.low,$=(X>>>1|Q<<31)^(X>>>8|Q<<24)^X>>>7,Z=(Q>>>1|X<<31)^(Q>>>8|X<<24)^(Q>>>7|X<<25),ee=l[j-2],te=ee.high,ie=ee.low,ne=(te>>>19|ie<<13)^(te<<3|ie>>>29)^te>>>6,re=(ie>>>19|te<<13)^(ie<<3|te>>>29)^(ie>>>6|te<<26),oe=l[j-7],ae=oe.high,se=oe.low,ce=l[j-16],le=ce.high,de=ce.low;J=(J=(J=$+ae+((q=Z+se)>>>0<Z>>>0?1:0))+ne+((q+=re)>>>0<re>>>0?1:0))+le+((q+=de)>>>0<de>>>0?1:0),K.high=J,K.low=q}var ue,he=G&T^~G&H,fe=L&U^~L&M,ge=B&D^B&C^D&C,pe=O&A^O&z^A&z,_e=(B>>>28|O<<4)^(B<<30|O>>>2)^(B<<25|O>>>7),me=(O>>>28|B<<4)^(O<<30|B>>>2)^(O<<25|B>>>7),ve=(G>>>14|L<<18)^(G>>>18|L<<14)^(G<<23|L>>>9),ye=(L>>>14|G<<18)^(L>>>18|G<<14)^(L<<23|G>>>9),we=c[j],be=we.high,ke=we.low,xe=P+ve+((ue=V+ye)>>>0<V>>>0?1:0),Re=me+pe;P=H,V=M,H=T,M=U,T=G,U=L,G=W+(xe=(xe=(xe=xe+he+((ue+=fe)>>>0<fe>>>0?1:0))+be+((ue+=ke)>>>0<ke>>>0?1:0))+J+((ue+=q)>>>0<q>>>0?1:0))+((L=F+ue|0)>>>0<F>>>0?1:0)|0,W=C,F=z,C=D,z=A,D=B,A=O,B=xe+(_e+ge+(Re>>>0<me>>>0?1:0))+((O=ue+Re|0)>>>0<ue>>>0?1:0)|0}g=n.low=g+O,n.high=f+B+(g>>>0<O>>>0?1:0),_=r.low=_+A,r.high=p+D+(_>>>0<A>>>0?1:0),v=o.low=v+z,o.high=m+C+(v>>>0<z>>>0?1:0),w=a.low=w+F,a.high=y+W+(w>>>0<F>>>0?1:0),k=s.low=k+L,s.high=b+G+(k>>>0<L>>>0?1:0),R=d.low=R+U,d.high=x+T+(R>>>0<U>>>0?1:0),E=u.low=E+M,u.high=S+H+(E>>>0<M>>>0?1:0),I=h.low=I+V,h.high=N+P+(I>>>0<V>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(n+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(d),e.HmacSHA512=t._createHmacHelper(d)}(),n.SHA512)},253:function(e,t,i){var n;e.exports=(n=i(249),i(269),i(214),i(888),i(109),function(){var e=n,t=e.lib,i=t.WordArray,r=t.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],u=o.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var n=a[i]-1;t[i]=e[n>>>5]>>>31-n%32&1}for(var r=this._subKeys=[],o=0;o<16;o++){var l=r[o]=[],d=c[o];for(i=0;i<24;i++)l[i/6|0]|=t[(s[i]-1+d)%28]<<31-i%6,l[4+(i/6|0)]|=t[28+(s[i+24]-1+d)%28]<<31-i%6;for(l[0]=l[0]<<1|l[0]>>>31,i=1;i<7;i++)l[i]=l[i]>>>4*(i-1)+3;l[7]=l[7]<<5|l[7]>>>27}var u=this._invSubKeys=[];for(i=0;i<16;i++)u[i]=r[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),h.call(this,1,1431655765);for(var n=0;n<16;n++){for(var r=i[n],o=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=l[c][((a^r[c])&d[c])>>>0];this._lBlock=a,this._rBlock=o^s}var u=this._lBlock;this._lBlock=this._rBlock,this._rBlock=u,h.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function f(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}e.DES=r._createHelper(u);var g=o.TripleDES=r.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),r=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=u.createEncryptor(i.create(t)),this._des2=u.createEncryptor(i.create(n)),this._des3=u.createEncryptor(i.create(r))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=r._createHelper(g)}(),n.TripleDES)},938:function(e,t,i){var n,r,o,a,s,c;e.exports=(n=i(249),o=(r=n).lib,a=o.Base,s=o.WordArray,(c=r.x64={}).Word=a.extend({init:function(e,t){this.high=e,this.low=t}}),c.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],n=0;n<t;n++){var r=e[n];i.push(r.high),i.push(r.low)}return s.create(i,this.sigBytes)},clone:function(){for(var e=a.clone.call(this),t=e.words=this.words.slice(0),i=t.length,n=0;n<i;n++)t[n]=t[n].clone();return e}}),n)},480:()=>{}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.amdO={},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e,t,n=i(354);e=void 0,t=function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key))?r:String(r)),n)}var r}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var o="sessions",a="events",s="views",c="scrolls",l="clicks",d="forms",u="crashes",h="attribution",f="users",g="star-rating",p="location",_="apm",m="feedback",v="remote-config",y={NPS:"[CLY]_nps",SURVEY:"[CLY]_survey",STAR_RATING:"[CLY]_star_rating",VIEW:"[CLY]_view",ORIENTATION:"[CLY]_orientation",ACTION:"[CLY]_action"},w=Object.values(y),b={ERROR:"[ERROR] ",WARNING:"[WARNING] ",INFO:"[INFO] ",DEBUG:"[DEBUG] ",VERBOSE:"[VERBOSE] "},k=Object.freeze({errorCount:"cly_hc_error_count",warningCount:"cly_hc_warning_count",statusCode:"cly_hc_status_code",errorMessage:"cly_hc_error_message"}),x="23.12.4",R="javascript_native_web",S=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,E="undefined"!=typeof window,N=globalThis.Countly||{};function I(e){var t=[];if(void 0!==e.options)for(var i=0;i<e.options.length;i++)e.options[i].selected&&t.push(e.options[i].value);return t.join(", ")}function B(){var e="xxxxxxxx";return(e=D(e,"[x]"))+Date.now().toString()}function O(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return D(e,"[xy]")}function D(e,t){var i=(new Date).getTime(),n=new RegExp(t,"g");return e.replace(n,(function(e){var t=(i+16*Math.random())%16|0;return("x"===e?t:3&t|8).toString(16)}))}function A(){return Math.floor((new Date).getTime()/1e3)}var C=0;function z(){var e=(new Date).getTime();return C>=e?C++:C=e,C}function W(e,t,i){if(t&&Object.keys(t).length){if(void 0!==t[e])return t[e]}else if(void 0!==N[e])return N[e];return i}function F(e,t,i){for(var n in N.i)N.i[n].tracking_crashes&&N.i[n].recordError(e,t,i)}function G(e){var t=[];for(var i in e)t.push(i+"="+encodeURIComponent(e[i]));return t.join("&")}function L(e){return"string"==typeof e&&"/"===e.substring(e.length-1)?e.substring(0,e.length-1):e}function T(e,t){for(var i,n={},r=0,o=t.length;r<o;r++)void 0!==e[i=t[r]]&&(n[i]=e[i]);return n}function U(e,t,i,n,r,o){var a={};if(e){if(Object.keys(e).length>n){var s={},c=0;for(var l in e)c<n&&(s[l]=e[l],c++);e=s}for(var d in e){var u=H(d,t,r,o),h=H(e[d],i,r,o);a[u]=h}}return a}function H(e,t,i,n){var r=e;return"number"==typeof e&&(e=e.toString()),"string"==typeof e&&e.length>t&&(r=e.substring(0,t),n(b.DEBUG,i+", Key: [ "+e+" ] is longer than accepted length. It will be truncated.")),r}function M(e,t,i){E&&(null!=e?void 0!==e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i):ie()&&console.warn("[WARNING] [Countly] add_event_listener, Can't bind ["+t+"] event to nonexisting element"))}function P(e){return e?void 0!==e.target?e.target:e.srcElement:window.event.srcElement}function V(e){if(e)return e;var t=navigator.userAgent;return t||(t=j()),t}function j(e){if(e)return e;var t="";return navigator.userAgentData&&(t=navigator.userAgentData.brands.map((function(e){return e.brand+":"+e.version})).join(),t+=navigator.userAgentData.mobile?" mobi ":" ",t+=navigator.userAgentData.platform),t}function q(e){var t;if(e)t=e;else{if(navigator.userAgentData&&navigator.userAgentData.mobile)return"phone";t=V()}t=t.toLowerCase();var i="desktop";return/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(t)?i="tablet":/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/.test(t)&&(i="phone"),i}function J(e){var t=/(CountlySiteBot|nuhk|Googlebot|GoogleSecurityScanner|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver|bingbot|Google Web Preview|Mediapartners-Google|AdsBot-Google|Baiduspider|Ezooms|YahooSeeker|AltaVista|AVSearch|Mercator|Scooter|InfoSeek|Ultraseek|Lycos|Wget|YandexBot|Yandex|YaDirectFetcher|SiteBot|Exabot|AhrefsBot|MJ12bot|TurnitinBot|magpie-crawler|Nutch Crawler|CMS Crawler|rogerbot|Domnutch|ssearch_bot|XoviBot|netseer|digincore|fr-crawler|wesee|AliasIO|contxbot|PingdomBot|BingPreview|HeadlessChrome|Lighthouse)/;if(e)return t.test(e);var i=t.test(V()),n=t.test(j());return i||n}function K(e){return void 0===e.pageY&&"number"==typeof e.clientX&&document.documentElement&&(e.pageX=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.pageY=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),e}function Y(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function X(){var e=document;return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function Q(){var e=document;return Math.min(Math.min(e.body.clientHeight,e.documentElement.clientHeight),Math.min(e.body.offsetHeight,e.documentElement.offsetHeight),window.innerHeight)}function $(e,t,i,n,r,o){var a,s=document.createElement(e);s.setAttribute(t,i),s.setAttribute(n,r);var c=function(){a||o(),a=!0};o&&(s.onreadystatechange=c,s.onload=c),document.getElementsByTagName("head")[0].appendChild(s)}function Z(e,t){$("script","type","text/javascript","src",e,t)}function ee(e,t){$("link","rel","stylesheet","href",e,t)}function te(){if(E){var e=document.getElementById("cly-loader");if(!e){var t="#cly-loader {height: 4px; width: 100%; position: absolute; z-index: 99999; overflow: hidden; background-color: #fff; top:0px; left:0px;}#cly-loader:before{display: block; position: absolute; content: ''; left: -200px; width: 200px; height: 4px; background-color: #2EB52B; animation: cly-loading 2s linear infinite;}@keyframes cly-loading { from {left: -200px; width: 30%;} 50% {width: 30%;} 70% {width: 70%;} 80% { left: 50%;} 95% {left: 120%;} to {left: 100%;}}",i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),i.appendChild(n),(e=document.createElement("div")).setAttribute("id","cly-loader"),document.body.onload=function(){if(N.showLoaderProtection)ie()&&console.warn("[WARNING] [Countly] showloader, Loader is already on");else try{document.body.appendChild(e)}catch(e){ie()&&console.error("[ERROR] [Countly] showLoader, Body is not loaded for loader to append: "+e)}}}e.style.display="block"}}function ie(){return!(!N||!N.debug||"undefined"==typeof console)}function ne(){if(E){N.showLoaderProtection=!0;var e=document.getElementById("cly-loader");e&&(e.style.display="none")}}var re=r((function e(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r,D=this,C=!N.i,$=!1,re="/i",oe="/o/sdk",ae=W("interval",i,500),se=W("queue_size",i,1e3),ce=[],le=[],de={},ue=[],he={},fe=W("ignore_referrers",i,[]),ge=null,pe=!0,_e=0,me=null,ve=0,ye=0,we=0,be=W("fail_timeout",i,60),ke=W("inactivity_time",i,20),xe=0,Re=W("session_update",i,60),Se=W("max_events",i,100),Ee=W("max_logs",i,null),Ne=W("use_session_cookie",i,!0),Ie=W("session_cookie_timeout",i,30),Be=!0,Oe=!1,De=W("offline_mode",i,!1),Ae={},Ce=!0,ze=A(),We=!0,Fe=null,Ge=1,Le=!1,Te=0,Ue=!1,He=null,Me=null,Pe=null,Ve=W("sdk_name",i,R),je=W("sdk_version",i,x);try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal")}catch(e){ft(b.ERROR,"Local storage test failed, Halting local storage support: "+e),We=!1}for(var qe,Je={},Ke=0;Ke<N.features.length;Ke++)Je[N.features[Ke]]={};this.initialize=function(){if(this.serialize=W("serialize",i,N.serialize),this.deserialize=W("deserialize",i,N.deserialize),this.getViewName=W("getViewName",i,N.getViewName),this.getViewUrl=W("getViewUrl",i,N.getViewUrl),this.getSearchQuery=W("getSearchQuery",i,N.getSearchQuery),this.DeviceIdType=N.DeviceIdType,this.namespace=W("namespace",i,""),this.clearStoredId=W("clear_stored_id",i,!1),this.app_key=W("app_key",i,null),this.onload=W("onload",i,[]),this.utm=W("utm",i,{source:!0,medium:!0,campaign:!0,term:!0,content:!0}),this.ignore_prefetch=W("ignore_prefetch",i,!0),this.rcAutoOptinAb=W("rc_automatic_optin_for_ab",i,!0),this.useExplicitRcApi=W("use_explicit_rc_api",i,!1),this.debug=W("debug",i,!1),this.test_mode=W("test_mode",i,!1),this.test_mode_eq=W("test_mode_eq",i,!1),this.metrics=W("metrics",i,{}),this.headers=W("headers",i,{}),this.url=L(W("url",i,"")),this.salt=W("salt",i,void 0),this.app_version=W("app_version",i,"0.0"),this.country_code=W("country_code",i,null),this.city=W("city",i,null),this.ip_address=W("ip_address",i,null),this.ignore_bots=W("ignore_bots",i,!0),this.force_post=W("force_post",i,!1),this.remote_config=W("remote_config",i,!1),this.ignore_visitor=W("ignore_visitor",i,!1),this.require_consent=W("require_consent",i,!1),this.track_domains=E?W("track_domains",i,!0):void 0,this.storage=W("storage",i,"default"),this.enableOrientationTracking=E?W("enable_orientation_tracking",i,!0):void 0,this.maxKeyLength=W("max_key_length",i,128),this.maxValueSize=W("max_value_size",i,256),this.maxSegmentationValues=W("max_segmentation_values",i,100),this.maxBreadcrumbCount=W("max_breadcrumb_count",i,null),this.maxStackTraceLinesPerThread=W("max_stack_trace_lines_per_thread",i,30),this.maxStackTraceLineLength=W("max_stack_trace_line_length",i,200),this.heatmapWhitelist=W("heatmap_whitelist",i,[]),D.hcErrorCount=Rt(k.errorCount)||0,D.hcWarningCount=Rt(k.warningCount)||0,D.hcStatusCode=Rt(k.statusCode)||-1,D.hcErrorMessage=Rt(k.errorMessage)||"",Ee&&!this.maxBreadcrumbCount?(this.maxBreadcrumbCount=Ee,ft(b.WARNING,"initialize, 'maxCrashLogs' is deprecated. Use 'maxBreadcrumbCount' instead!")):Ee||this.maxBreadcrumbCount||(this.maxBreadcrumbCount=100),"cookie"===this.storage&&(We=!1),this.rcAutoOptinAb||this.useExplicitRcApi||(ft(b.WARNING,"initialize, Auto opting is disabled, switching to explicit RC API"),this.useExplicitRcApi=!0),Array.isArray(fe)||(fe=[]),""===this.url&&(ft(b.ERROR,"initialize, Please provide server URL"),this.ignore_visitor=!0),Rt("cly_ignore")&&(this.ignore_visitor=!0),function(){if(Rt(D.namespace+"cly_id",!1,!0)){St("cly_id",Rt(D.namespace+"cly_id",!1,!0)),St("cly_id_type",Rt(D.namespace+"cly_id_type",!1,!0)),St("cly_event",Rt(D.namespace+"cly_event",!1,!0)),St("cly_session",Rt(D.namespace+"cly_session",!1,!0));var e=Rt(D.namespace+"cly_queue",!1,!0);Array.isArray(e)&&St("cly_queue",e=e.filter((function(e){return e.app_key===D.app_key}))),Rt(D.namespace+"cly_cmp_id",!1,!0)&&(St("cly_cmp_id",Rt(D.namespace+"cly_cmp_id",!1,!0)),St("cly_cmp_uid",Rt(D.namespace+"cly_cmp_uid",!1,!0))),Rt(D.namespace+"cly_ignore",!1,!0)&&St("cly_ignore",Rt(D.namespace+"cly_ignore",!1,!0)),Et("cly_id",!1,!0),Et("cly_id_type",!1,!0),Et("cly_event",!1,!0),Et("cly_session",!1,!0),Et("cly_queue",!1,!0),Et("cly_cmp_id",!1,!0),Et("cly_cmp_uid",!1,!0),Et("cly_ignore",!1,!0)}}(),ce=Rt("cly_queue")||[],le=Rt("cly_event")||[],de=Rt("cly_remote_configs")||{},this.clearStoredId&&(Rt("cly_id")&&!l&&(this.device_id=Rt("cly_id"),ft(b.DEBUG,"initialize, temporarily using the previous device ID to flush existing events"),(Ge=Rt("cly_id_type"))||(ft(b.DEBUG,"initialize, No device ID type info from the previous session, falling back to DEVELOPER_SUPPLIED, for event flushing"),Ge=0),tt(),this.device_id=void 0,Ge=1),ft(b.INFO,"initialize, Clearing the device ID storage"),Et("cly_id"),Et("cly_id_type"),Et("cly_session")),et(),E)if(window.name&&0===window.name.indexOf("cly:"))try{this.passed_data=JSON.parse(window.name.replace("cly:",""))}catch(e){ft(b.ERROR,"initialize, Could not parse name: "+window.name+", error: "+e)}else if(location.hash&&0===location.hash.indexOf("#cly:"))try{this.passed_data=JSON.parse(location.hash.replace("#cly:",""))}catch(e){ft(b.ERROR,"initialize, Could not parse hash: "+location.hash+", error: "+e)}if((this.passed_data&&this.passed_data.app_key&&this.passed_data.app_key===this.app_key||this.passed_data&&!this.passed_data.app_key&&C)&&this.passed_data.token&&this.passed_data.purpose){this.passed_data.token!==Rt("cly_old_token")&&(kt(this.passed_data.token),St("cly_old_token",this.passed_data.token));var e=[];Array.isArray(this.heatmapWhitelist)?(this.heatmapWhitelist.push(this.url),e=this.heatmapWhitelist.map((function(e){return L(e)}))):e=[this.url],e.includes(this.passed_data.url)&&"heatmap"===this.passed_data.purpose&&(this.ignore_visitor=!0,te(),Z(this.passed_data.url+"/views/heatmap.js",ne))}if(this.ignore_visitor)ft(b.WARNING,"initialize, ignore_visitor:["+this.ignore_visitor+"], this user will not be tracked");else{ft(b.DEBUG,Ve===R&&je===x?"initialize, SDK name:["+Ve+"], version:["+je+"]":"initialize, SDK name:["+Ve+"], version:["+je+"], default name:["+R+"] and default version:["+x+"]"),ft(b.DEBUG,"initialize, app_key:["+this.app_key+"], url:["+this.url+"]"),ft(b.DEBUG,"initialize, device_id:["+W("device_id",i,void 0)+"]"),ft(b.DEBUG,"initialize, require_consent is enabled:["+this.require_consent+"]");try{ft(b.DEBUG,"initialize, metric override:["+JSON.stringify(this.metrics)+"]"),ft(b.DEBUG,"initialize, header override:["+JSON.stringify(this.headers)+"]"),ft(b.DEBUG,"initialize, number of onload callbacks provided:["+this.onload.length+"]"),ft(b.DEBUG,"initialize, utm tags:["+JSON.stringify(this.utm)+"]"),fe&&ft(b.DEBUG,"initialize, referrers to ignore :["+JSON.stringify(fe)+"]")}catch(e){ft(b.ERROR,"initialize, Could not stringify some config object values")}ft(b.DEBUG,"initialize, app_version:["+this.app_version+"]"),ft(b.DEBUG,"initialize, provided location info; country_code:["+this.country_code+"], city:["+this.city+"], ip_address:["+this.ip_address+"]"),""!==this.namespace&&ft(b.DEBUG,"initialize, namespace given:["+this.namespace+"]"),this.clearStoredId&&ft(b.DEBUG,"initialize, clearStoredId flag set to:["+this.clearStoredId+"]"),this.ignore_prefetch&&ft(b.DEBUG,"initialize, ignoring pre-fetching and pre-rendering from counting as real website visits :["+this.ignore_prefetch+"]"),this.test_mode&&ft(b.WARNING,"initialize, test_mode:["+this.test_mode+"], request queue won't be processed"),this.test_mode_eq&&ft(b.WARNING,"initialize, test_mode_eq:["+this.test_mode_eq+"], event queue won't be processed"),this.heatmapWhitelist&&ft(b.DEBUG,"initialize, heatmap whitelist:["+JSON.stringify(this.heatmapWhitelist)+"], these domains will be whitelisted"),"default"!==this.storage&&ft(b.DEBUG,"initialize, storage is set to:["+this.storage+"]"),this.ignore_bots&&ft(b.DEBUG,"initialize, ignore traffic from bots :["+this.ignore_bots+"]"),this.force_post&&ft(b.DEBUG,"initialize, forced post method for all requests:["+this.force_post+"]"),this.remote_config&&ft(b.DEBUG,"initialize, remote_config callback provided:["+!!this.remote_config+"]"),"boolean"==typeof this.rcAutoOptinAb&&ft(b.DEBUG,"initialize, automatic RC optin is enabled:["+this.rcAutoOptinAb+"]"),this.useExplicitRcApi||ft(b.WARNING,"initialize, will use legacy RC API. Consider enabling new API during init with use_explicit_rc_api flag"),this.track_domains&&ft(b.DEBUG,"initialize, tracking domain info:["+this.track_domains+"]"),this.enableOrientationTracking&&ft(b.DEBUG,"initialize, enableOrientationTracking:["+this.enableOrientationTracking+"]"),Ne||ft(b.WARNING,"initialize, use_session_cookie is enabled:["+Ne+"]"),De&&ft(b.DEBUG,"initialize, offline_mode:["+De+"], user info won't be send to the servers"),De&&ft(b.DEBUG,"initialize, stored remote configs:["+JSON.stringify(de)+"]"),ft(b.DEBUG,"initialize, 'getViewName' callback override provided:["+(this.getViewName!==N.getViewName)+"]"),ft(b.DEBUG,"initialize, 'getSearchQuery' callback override provided:["+(this.getSearchQuery!==N.getSearchQuery)+"]"),128!==this.maxKeyLength&&ft(b.DEBUG,"initialize, maxKeyLength set to:["+this.maxKeyLength+"] characters"),256!==this.maxValueSize&&ft(b.DEBUG,"initialize, maxValueSize set to:["+this.maxValueSize+"] characters"),100!==this.maxSegmentationValues&&ft(b.DEBUG,"initialize, maxSegmentationValues set to:["+this.maxSegmentationValues+"] key/value pairs"),100!==this.maxBreadcrumbCount&&ft(b.DEBUG,"initialize, maxBreadcrumbCount for custom logs set to:["+this.maxBreadcrumbCount+"] entries"),30!==this.maxStackTraceLinesPerThread&&ft(b.DEBUG,"initialize, maxStackTraceLinesPerThread set to:["+this.maxStackTraceLinesPerThread+"] lines"),200!==this.maxStackTraceLineLength&&ft(b.DEBUG,"initialize, maxStackTraceLineLength set to:["+this.maxStackTraceLineLength+"] characters"),500!==ae&&ft(b.DEBUG,"initialize, interval for heartbeats set to:["+ae+"] milliseconds"),1e3!==se&&ft(b.DEBUG,"initialize, queue_size set to:["+se+"] items max"),60!==be&&ft(b.DEBUG,"initialize, fail_timeout set to:["+be+"] seconds of wait time after a failed connection to server"),20!==ke&&ft(b.DEBUG,"initialize, inactivity_time set to:["+ke+"] minutes to consider a user as inactive after no observable action"),60!==Re&&ft(b.DEBUG,"initialize, session_update set to:["+Re+"] seconds to check if extending a session is needed while the user is active"),100!==Se&&ft(b.DEBUG,"initialize, max_events set to:["+Se+"] events to send in one batch"),Ee&&ft(b.WARNING,"initialize, max_logs set to:["+Ee+"] breadcrumbs to store for crash logs max, deprecated "),30!==Ie&&ft(b.DEBUG,"initialize, session_cookie_timeout set to:["+Ie+"] minutes to expire a cookies session"),ft(b.INFO,"initialize, Countly initialized");var t=null,n=D.getSearchQuery(),r=!1,o={};if(n){0===n.indexOf("?")&&(n=n.substring(1));for(var a=n.split("&"),s=0;s<a.length;s++){var c=a[s].split("=");"cly_id"===c[0]?St("cly_cmp_id",c[1]):"cly_uid"===c[0]?St("cly_cmp_uid",c[1]):"cly_device_id"===c[0]?t=c[1]:0===(c[0]+"").indexOf("utm_")&&this.utm[c[0].replace("utm_","")]&&(o[c[0].replace("utm_","")]=c[1],r=!0)}}var l="[CLY]_temp_id"===Rt("cly_id"),d=W("device_id",i,void 0);if("number"==typeof d&&(d=d.toString()),Rt("cly_id")&&!l?(this.device_id=Rt("cly_id"),ft(b.INFO,"initialize, Set the stored device ID"),(Ge=Rt("cly_id_type"))||(ft(b.INFO,"initialize, No device ID type info from the previous session, falling back to DEVELOPER_SUPPLIED"),Ge=0)):null!==t?(ft(b.INFO,"initialize, Device ID set by URL"),this.device_id=t,Ge=3):d?(ft(b.INFO,"initialize, Device ID set by developer"),this.device_id=d,i&&Object.keys(i).length?void 0!==i.device_id&&(Ge=0):void 0!==N.device_id&&(Ge=0)):De||l?(this.device_id="[CLY]_temp_id",Ge=2,De&&l?ft(b.INFO,"initialize, Temp ID set, continuing offline mode from previous app session"):De&&!l?ft(b.INFO,"initialize, Temp ID set, entering offline mode"):(De=!0,ft(b.INFO,"initialize, Temp ID set, enabling offline mode"))):(ft(b.INFO,"initialize, Generating the device ID"),this.device_id=W("device_id",i,lt()),i&&Object.keys(i).length?void 0!==i.device_id&&(Ge=0):void 0!==N.device_id&&(Ge=0)),St("cly_id",this.device_id),St("cly_id_type",Ge),r){for(var u in Pe={},this.utm)o[u]?(this.userData.set("utm_"+u,o[u]),Pe[u]=o[u]):this.userData.unset("utm_"+u);this.userData.save()}nt(),setTimeout((function(){ct(),D.remote_config&&D.fetch_remote_config(D.remote_config)}),1),E&&document.documentElement.setAttribute("data-countly-useragent",V()),Nt.sendInstantHCRequest()}},this.halt=function(){ft(b.WARNING,"halt, Resetting Countly"),N.i=void 0,C=!N.i,$=!1,re="/i",oe="/o/sdk",ae=500,se=1e3,ce=[],le=[],de={},ue=[],he={},fe=[],ge=null,pe=!0,_e=0,me=null,ve=0,ye=0,we=0,be=60,ke=20,xe=0,Re=60,Se=100,Ee=null,Ne=!0,Ie=30,Be=!0,Oe=!1,De=!1,Ae={},Ce=!0,ze=A(),We=!0,Fe=null,Ge=1,Le=!1,Te=0,Ue=!1,He=null,Me=null,Pe=null;try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal")}catch(e){ft(b.ERROR,"halt, Local storage test failed, will fallback to cookies"),We=!1}N.features=[o,a,s,c,l,d,u,h,f,g,p,_,m,v],Je={};for(var e=0;e<N.features.length;e++)Je[N.features[e]]={};D.app_key=void 0,D.device_id=void 0,D.onload=void 0,D.utm=void 0,D.ignore_prefetch=void 0,D.debug=void 0,D.test_mode=void 0,D.test_mode_eq=void 0,D.metrics=void 0,D.headers=void 0,D.url=void 0,D.salt=void 0,D.app_version=void 0,D.country_code=void 0,D.city=void 0,D.ip_address=void 0,D.ignore_bots=void 0,D.force_post=void 0,D.rcAutoOptinAb=void 0,D.useExplicitRcApi=void 0,D.remote_config=void 0,D.ignore_visitor=void 0,D.require_consent=void 0,D.track_domains=void 0,D.storage=void 0,D.enableOrientationTracking=void 0,D.maxKeyLength=void 0,D.maxValueSize=void 0,D.maxSegmentationValues=void 0,D.maxBreadcrumbCount=void 0,D.maxStackTraceLinesPerThread=void 0,D.maxStackTraceLineLength=void 0},this.group_features=function(e){if(ft(b.INFO,"group_features, Grouping features"),e)for(var t in e)Je[t]?ft(b.WARNING,"group_features, Feature name ["+t+"] is already reserved"):"string"==typeof e[t]?Je[t]={features:[e[t]]}:e[t]&&Array.isArray(e[t])&&e[t].length?Je[t]={features:e[t]}:ft(b.ERROR,"group_features, Incorrect feature list for ["+t+"] value: ["+e[t]+"]");else ft(b.ERROR,"group_features, Incorrect features:["+e+"]")},this.check_consent=function(e){return ft(b.INFO,"check_consent, Checking if consent is given for specific feature:["+e+"]"),this.require_consent?Je[e]?!(!Je[e]||!Je[e].optin):(ft(b.ERROR,"check_consent, No feature available for ["+e+"]"),!1):(ft(b.INFO,"check_consent, require_consent is off, no consent is necessary"),!0)},this.get_device_id_type=function(){var e;switch(ft(b.INFO,"check_device_id_type, Retrieving the current device id type.["+Ge+"]"),Ge){case 1:e=D.DeviceIdType.SDK_GENERATED;break;case 3:case 0:e=D.DeviceIdType.DEVELOPER_SUPPLIED;break;case 2:e=D.DeviceIdType.TEMPORARY_ID;break;default:e=-1}return e},this.get_device_id=function(){return ft(b.INFO,"get_device_id, Retrieving the device id: ["+D.device_id+"]"),D.device_id},this.check_any_consent=function(){if(ft(b.INFO,"check_any_consent, Checking if any consent is given"),!this.require_consent)return ft(b.INFO,"check_any_consent, require_consent is off, no consent is necessary"),!0;for(var e in Je)if(Je[e]&&Je[e].optin)return!0;return ft(b.INFO,"check_any_consent, No consents given"),!1},this.add_consent=function(e){if(ft(b.INFO,"add_consent, Adding consent for ["+e+"]"),Array.isArray(e))for(var t=0;t<e.length;t++)this.add_consent(e[t]);else Je[e]?Je[e].features?(Je[e].optin=!0,this.add_consent(Je[e].features)):!0!==Je[e].optin&&(Je[e].optin=!0,Ye(),setTimeout((function(){e===o&&Ae.begin_session?(D.begin_session.apply(D,Ae.begin_session),Ae.begin_session=null):e===s&&Ae.track_pageview&&(me=null,D.track_pageview.apply(D,Ae.track_pageview),Ae.track_pageview=null)}),1)):ft(b.ERROR,"add_consent, No feature available for ["+e+"]")},this.remove_consent=function(e){ft(b.INFO,"remove_consent, Removing consent for ["+e+"]"),this.remove_consent_internal(e,!0)},this.remove_consent_internal=function(e,t){if(t=t||!1,Array.isArray(e))for(var i=0;i<e.length;i++)this.remove_consent_internal(e[i],t);else Je[e]?Je[e].features?this.remove_consent_internal(Je[e].features,t):(Je[e].optin=!1,t&&!1!==Je[e].optin&&Ye()):ft(b.WARNING,"remove_consent, No feature available for ["+e+"]")};var Ye=function(){qe&&(clearTimeout(qe),qe=null),qe=setTimeout((function(){for(var e={},t=0;t<N.features.length;t++)!0===Je[N.features[t]].optin?e[N.features[t]]=!0:e[N.features[t]]=!1;st({consent:JSON.stringify(e)}),ft(b.DEBUG,"Consent update request has been sent to the queue.")}),1e3)};function Xe(e,t){if(D.ignore_visitor)ft(b.ERROR,"Adding event failed. Possible bot or user opt out");else if(e.key){e.count||(e.count=1),w.includes(e.key)||(e.key=H(e.key,D.maxKeyLength,"add_cly_event",ft)),e.segmentation=U(e.segmentation,D.maxKeyLength,D.maxValueSize,D.maxSegmentationValues,"add_cly_event",ft);var i=T(e,["key","count","sum","dur","segmentation"]);i.timestamp=z();var n=new Date;i.hour=n.getHours(),i.dow=n.getDay(),i.id=t||B(),i.key===y.VIEW?i.pvid=Me||"":i.cvid=He||"",le.push(i),St("cly_event",le),ft(b.INFO,"With event ID: ["+i.id+"], successfully adding the last event:",i)}else ft(b.ERROR,"Adding event failed. Event must have a key property")}this.enable_offline_mode=function(){ft(b.INFO,"enable_offline_mode, Enabling offline mode"),this.remove_consent_internal(N.features,!1),De=!0,this.device_id="[CLY]_temp_id",D.device_id=this.device_id,Ge=2},this.disable_offline_mode=function(e){if(De){ft(b.INFO,"disable_offline_mode, Disabling offline mode"),De=!1,e&&this.device_id!==e?(this.device_id=e,D.device_id=this.device_id,Ge=0,St("cly_id",this.device_id),St("cly_id_type",0),ft(b.INFO,"disable_offline_mode, Changing id to: "+this.device_id)):(this.device_id=lt(),"[CLY]_temp_id"===this.device_id&&(this.device_id=O()),D.device_id=this.device_id,this.device_id!==Rt("cly_id")&&(St("cly_id",this.device_id),St("cly_id_type",1)));var t=!1;if(ce.length>0)for(var i=0;i<ce.length;i++)"[CLY]_temp_id"===ce[i].device_id&&(ce[i].device_id=this.device_id,t=!0);t&&St("cly_queue",ce,!0)}else ft(b.WARNING,"disable_offline_mode, Countly was not in offline mode.")},this.begin_session=function(e,t){if(ft(b.INFO,"begin_session, Starting the session. There was an ongoing session: ["+$+"]"),e&&ft(b.INFO,"begin_session, Heartbeats are disabled"),t&&ft(b.INFO,"begin_session, Session starts irrespective of session cookie"),this.check_consent(o)){if(!$){this.enableOrientationTracking&&(this.report_orientation(),M(window,"resize",(function(){D.report_orientation()}))),r=A(),$=!0,pe=!e;var i=Rt("cly_session");if(ft(b.VERBOSE,"begin_session, Session state, forced: ["+t+"], useSessionCookie: ["+Ne+"], seconds to expire: ["+(i-r)+"], expired: ["+(parseInt(i)<=A())+"] "),t||!Ne||!i||parseInt(i)<=A()){ft(b.INFO,"begin_session, Session started"),null===Fe&&(Fe=!0);var n={begin_session:1};n.metrics=JSON.stringify(ut()),st(n)}St("cly_session",A()+60*Ie)}}else Ae.begin_session=arguments},this.session_duration=function(e){ft(b.INFO,"session_duration, Reporting session duration"),this.check_consent(o)&&$&&(ft(b.INFO,"session_duration, Session extended: ",e),st({session_duration:e}),ot())},this.end_session=function(e,t){ft(b.INFO,"end_session, Ending the current session. There was an on going session:["+$+"]"),this.check_consent(o)&&$&&(e=e||A()-r,rt(),!Ne||t?(ft(b.INFO,"end_session, Session ended"),st({end_session:1,session_duration:e})):this.session_duration(e),$=!1)},this.change_id=function(e,t){if(ft(b.INFO,"change_id, Changing the ID"),t&&ft(b.INFO,"change_id, Will merge the IDs"),e&&"string"==typeof e&&0!==e.length){if(De)return ft(b.WARNING,"change_id, Offline mode was on, initiating disabling sequence instead."),void this.disable_offline_mode(e);if(this.device_id!=e){t||(tt(),this.end_session(null,!0),he={},this.remove_consent_internal(N.features,!1));var i=this.device_id;this.device_id=e,D.device_id=this.device_id,Ge=0,St("cly_id",this.device_id),St("cly_id_type",0),ft(b.INFO,"change_id, Changing ID from:["+i+"] to ["+e+"]"),t?st({old_device_id:i}):this.begin_session(!pe,!0),this.remote_config&&(St("cly_remote_configs",de={}),this.fetch_remote_config(this.remote_config))}}else ft(b.ERROR,"change_id, The provided ID: ["+e+"] is not a valid ID")},this.add_event=function(e){ft(b.INFO,"add_event, Adding event: ",e);var t=!1;switch(e.key){case y.NPS:case y.SURVEY:t=this.check_consent(m);break;case y.STAR_RATING:t=this.check_consent(g);break;case y.VIEW:t=this.check_consent(s);break;case y.ORIENTATION:t=this.check_consent(f);break;case y.ACTION:t=this.check_consent(l)||this.check_consent(c);break;default:t=this.check_consent(a)}t&&Xe(e)},this.start_event=function(e){e&&"string"==typeof e?(ft(b.INFO,"start_event, Starting timed event with key: ["+e+"]"),e=H(e,D.maxKeyLength,"start_event",ft),he[e]?ft(b.WARNING,"start_event, Timed event with key: ["+e+"] already started"):he[e]=A()):ft(b.WARNING,"start_event, you have to provide a valid string key instead of: ["+e+"]")},this.cancel_event=function(e){return e&&"string"==typeof e?(ft(b.INFO,"cancel_event, Canceling timed event with key: ["+e+"]"),e=H(e,D.maxKeyLength,"cancel_event",ft),he[e]?(delete he[e],ft(b.INFO,"cancel_event, Timed event with key: ["+e+"] is canceled"),!0):(ft(b.WARNING,"cancel_event, Timed event with key: ["+e+"] was not found"),!1)):(ft(b.WARNING,"cancel_event, you have to provide a valid string key instead of: ["+e+"]"),!1)},this.end_event=function(e){e?(ft(b.INFO,"end_event, Ending timed event"),"string"==typeof e&&(e={key:e=H(e,D.maxKeyLength,"end_event",ft)}),e.key?he[e.key]?(e.dur=A()-he[e.key],this.add_event(e),delete he[e.key]):ft(b.ERROR,"end_event, Timed event with key: ["+e.key+"] was not started"):ft(b.ERROR,"end_event, Timed event must have a key property")):ft(b.WARNING,"end_event, you have to provide a valid string key or event object instead of: ["+e+"]")},this.report_orientation=function(e){ft(b.INFO,"report_orientation, Reporting orientation"),this.check_consent(f)&&Xe({key:y.ORIENTATION,segmentation:{mode:e||(window.innerWidth>window.innerHeight?"landscape":"portrait")}})},this.report_conversion=function(e,t){ft(b.WARNING,"report_conversion, Deprecated function call! Use 'recordDirectAttribution' in place of this call. Call will be redirected now!"),this.recordDirectAttribution(e,t)},this.recordDirectAttribution=function(e,t){ft(b.INFO,"recordDirectAttribution, Recording the attribution for campaign ID: ["+e+"] and the user ID: ["+t+"]"),this.check_consent(h)&&(e=e||Rt("cly_cmp_id")||"cly_organic",st((t=t||Rt("cly_cmp_uid"))?{campaign_id:e,campaign_user:t}:{campaign_id:e}))},this.user_details=function(e){ft(b.INFO,"user_details, Trying to add user details: ",e),this.check_consent(f)&&(tt(),ft(b.INFO,"user_details, flushed the event queue"),e.name=H(e.name,D.maxValueSize,"user_details",ft),e.username=H(e.username,D.maxValueSize,"user_details",ft),e.email=H(e.email,D.maxValueSize,"user_details",ft),e.organization=H(e.organization,D.maxValueSize,"user_details",ft),e.phone=H(e.phone,D.maxValueSize,"user_details",ft),e.picture=H(e.picture,4096,"user_details",ft),e.gender=H(e.gender,D.maxValueSize,"user_details",ft),e.byear=H(e.byear,D.maxValueSize,"user_details",ft),e.custom=U(e.custom,D.maxKeyLength,D.maxValueSize,D.maxSegmentationValues,"user_details",ft),st({user_details:JSON.stringify(T(e,["name","username","email","organization","phone","picture","gender","byear","custom"]))}))};var Qe={},$e=function(e,t,i){D.check_consent(f)&&(Qe[e]||(Qe[e]={}),"$push"===i||"$pull"===i||"$addToSet"===i?(Qe[e][i]||(Qe[e][i]=[]),Qe[e][i].push(t)):Qe[e][i]=t)};function Ze(e,t,i,n,r){ft(b.INFO,"fetch_remote_config_explicit, Fetching sequence initiated");var a,s={method:"rc",av:D.app_version};e&&(s.keys=JSON.stringify(e)),t&&(s.omit_keys=JSON.stringify(t)),"legacy"===n&&(s.method="fetch_remote_config"),0===i&&(s.oi=0),1===i&&(s.oi=1),"function"==typeof r&&(a=r),D.check_consent(o)&&(s.metrics=JSON.stringify(ut())),D.check_consent(v)?(at(s),gt("fetch_remote_config_explicit",D.url+oe,s,(function(e,t,i){if(!e){try{var n=JSON.parse(i);if(s.keys||s.omit_keys)for(var r in n)de[r]=n[r];else de=n;St("cly_remote_configs",de)}catch(e){ft(b.ERROR,"fetch_remote_config_explicit, Had an issue while parsing the response: "+e)}a&&(ft(b.INFO,"fetch_remote_config_explicit, Callback function is provided"),a(e,de))}}),!0)):(ft(b.ERROR,"fetch_remote_config_explicit, Remote config requires explicit consent"),a&&a(new Error("Remote config requires explicit consent"),de))}function et(){ft(b.INFO,"checkIgnore, Checking if user or visit should be ignored"),D.ignore_prefetch&&E&&void 0!==document.visibilityState&&"prerender"===document.visibilityState&&(D.ignore_visitor=!0,ft(b.DEBUG,"checkIgnore, Ignoring visit due to prerendering")),D.ignore_bots&&J()&&(D.ignore_visitor=!0,ft(b.DEBUG,"checkIgnore, Ignoring visit due to bot"))}function tt(){le.length>0&&(ft(b.DEBUG,"Flushing events"),st({events:JSON.stringify(le)}),St("cly_event",le=[]))}function it(e,t){if(E)if(document.getElementById("countly-feedback-sticker-"+e._id))ft(b.ERROR,"Widget with same ID exists");else try{var i=document.createElement("div");i.className="countly-iframe-wrapper",i.id="countly-iframe-wrapper-"+e._id;var n=document.createElement("span");n.className="countly-feedback-close-icon",n.id="countly-feedback-close-icon-"+e._id,n.innerText="x";var r=document.createElement("iframe");if(r.name="countly-feedback-iframe",r.id="countly-feedback-iframe",r.src=D.url+"/feedback?widget_id="+e._id+"&app_key="+D.app_key+"&device_id="+D.device_id+"&sdk_version="+je,document.body.appendChild(i),i.appendChild(n),i.appendChild(r),M(document.getElementById("countly-feedback-close-icon-"+e._id),"click",(function(){document.getElementById("countly-iframe-wrapper-"+e._id).style.display="none",document.getElementById("cfbg").style.display="none"})),t){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.id="feedback-sticker-svg",o.setAttribute("aria-hidden","true"),o.setAttribute("data-prefix","far"),o.setAttribute("data-icon","grin"),o.setAttribute("class","svg-inline--fa fa-grin fa-w-16"),o.setAttribute("role","img"),o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("viewBox","0 0 496 512");var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.id="smileyPathInStickerSvg",a.setAttribute("fill","white"),a.setAttribute("d","M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm105.6-151.4c-25.9 8.3-64.4 13.1-105.6 13.1s-79.6-4.8-105.6-13.1c-9.9-3.1-19.4 5.4-17.7 15.3 7.9 47.1 71.3 80 123.3 80s115.3-32.9 123.3-80c1.6-9.8-7.7-18.4-17.7-15.3zM168 240c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32z");var s=document.createElement("span");s.innerText=e.trigger_button_text;var c=document.createElement("div");c.style.color=e.trigger_font_color.length<7?"#"+e.trigger_font_color:e.trigger_font_color,c.style.backgroundColor=e.trigger_bg_color.length<7?"#"+e.trigger_bg_color:e.trigger_bg_color,c.className="countly-feedback-sticker  "+e.trigger_position+"-"+e.trigger_size,c.id="countly-feedback-sticker-"+e._id,o.appendChild(a),c.appendChild(o),c.appendChild(s),document.body.appendChild(c);var l=document.getElementById("smileyPathInStickerSvg");l&&(l.style.fill=e.trigger_font_color.length<7?"#"+e.trigger_font_color:e.trigger_font_color),M(document.getElementById("countly-feedback-sticker-"+e._id),"click",(function(){document.getElementById("countly-iframe-wrapper-"+e._id).style.display="block",document.getElementById("cfbg").style.display="block"}))}else document.getElementById("countly-iframe-wrapper-"+e._id).style.display="block",document.getElementById("cfbg").style.display="block"}catch(e){ft(b.ERROR,"Somethings went wrong while element injecting process: "+e)}else ft(b.WARNING,"processWidget, window object is not available. Not processing widget.")}function nt(){var e;if(void 0!==D.onload&&D.onload.length>0){for(e=0;e<D.onload.length;e++)"function"==typeof D.onload[e]&&D.onload[e](D);D.onload=[]}}function rt(){if(me){var e={name:me};D.check_consent(s)&&(Xe({key:y.VIEW,dur:Ce?A()-ve:ye,segmentation:e},He),me=null)}}function ot(){if(Ne){var e=Rt("cly_session");(!e||parseInt(e)<=A())&&($=!1,D.begin_session(!pe)),St("cly_session",A()+60*Ie)}}function at(e){e.app_key=D.app_key,e.device_id=D.device_id,e.sdk_name=Ve,e.sdk_version=je,e.t=Ge,e.av=D.app_version;var t=dt();if(e.metrics){var i=JSON.parse(e.metrics);i._ua||(i._ua=t,e.metrics=JSON.stringify(i))}else e.metrics=JSON.stringify({_ua:t});D.check_consent(p)?(D.country_code&&(e.country_code=D.country_code),D.city&&(e.city=D.city),null!==D.ip_address&&(e.ip_address=D.ip_address)):e.location="",e.timestamp=z();var n=new Date;e.hour=n.getHours(),e.dow=n.getDay()}function st(e){D.ignore_visitor?ft(b.WARNING,"User is opt_out will ignore the request: "+e):D.app_key&&D.device_id?(at(e),ce.length>se&&ce.shift(),ce.push(e),St("cly_queue",ce,!0)):ft(b.ERROR,"app_key or device_id is missing ",D.app_key,D.device_id)}function ct(){if(nt(),D.ignore_visitor)return Oe=!1,void ft(b.WARNING,"User opt_out, no heartbeat");Oe=!0;var e=0;if(C&&void 0!==N.q&&N.q.length>0){var t,i=N.q;for(N.q=[],e=0;e<i.length;e++)if(t=i[e],ft(b.DEBUG,"Processing queued call",t),"function"==typeof t)t();else if(Array.isArray(t)&&t.length>0){var n=D,o=0;if(N.i[t[o]]&&(n=N.i[t[o]],o++),"function"==typeof n[t[o]])n[t[o]].apply(n,t.slice(o+1));else if(0===t[o].indexOf("userData.")){var a=t[o].replace("userData.","");"function"==typeof n.userData[a]&&n.userData[a].apply(n,t.slice(o+1))}else"function"==typeof N[t[o]]&&N[t[o]].apply(N,t.slice(o+1))}}if($&&pe&&Ce){var s=A();s-r>Re&&(D.session_duration(s-r),r=s,D.hcErrorCount>0&&St(k.errorCount,D.hcErrorCount),D.hcWarningCount>0&&St(k.warningCount,D.hcWarningCount))}if(le.length>0&&!D.test_mode_eq){if(le.length<=Se)st({events:JSON.stringify(le)}),le=[];else{var c=le.splice(0,Se);st({events:JSON.stringify(c)})}St("cly_event",le)}if(!De&&ce.length>0&&Be&&A()>we){Be=!1;var l=ce[0];l.rr=ce.length,ft(b.DEBUG,"Processing request",l),St("cly_queue",ce,!0),D.test_mode||gt("send_request_queue",D.url+re,l,(function(e,t){e?we=A()+be:ce.shift(),St("cly_queue",ce,!0),Be=!0}),!1)}setTimeout(ct,ae)}function lt(){var e=Rt("cly_id");return e?(Ge=Rt("cly_id_type"),e):O()}function dt(){return D.metrics._ua||V()}function ut(){var e=JSON.parse(JSON.stringify(D.metrics||{}));if(e._app_version=e._app_version||D.app_version,e._ua=e._ua||V(),E&&screen.width){var t=screen.width?parseInt(screen.width):0,i=screen.height?parseInt(screen.height):0;if(0!==t&&0!==i){if(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&window.devicePixelRatio)t=Math.round(t*window.devicePixelRatio),i=Math.round(i*window.devicePixelRatio);else if(90===Math.abs(window.orientation)){var n=t;t=i,i=n}e._resolution=e._resolution||t+"x"+i}}E&&window.devicePixelRatio&&(e._density=e._density||window.devicePixelRatio);var r=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;return void 0!==r&&(e._locale=e._locale||r),ht()&&(e._store=e._store||document.referrer),ft(b.DEBUG,"Got metrics",e),e}function ht(e){if(!E)return!1;var t=e||document.referrer,i=!1;if(void 0===t||0===t.length)ft(b.DEBUG,"Invalid referrer:["+t+"], ignoring.");else{var n=S.exec(t);if(n)if(n[11])if(n[11]===window.location.hostname)ft(b.DEBUG,"Referrer is current host:["+t+"], ignoring.");else if(fe&&fe.length){i=!0;for(var r=0;r<fe.length;r++)if(t.indexOf(fe[r])>=0){ft(b.DEBUG,"Referrer in ignore list:["+t+"], ignoring."),i=!1;break}}else ft(b.DEBUG,"Valid referrer:["+t+"]"),i=!0;else ft(b.DEBUG,"No path found in referrer:["+t+"], ignoring.");else ft(b.DEBUG,"Referrer is corrupt:["+t+"], ignoring.")}return i}function ft(e,i){if(D.debug&&"undefined"!=typeof console){arguments[2]&&"object"===t(arguments[2])&&(arguments[2]=JSON.stringify(arguments[2])),C||(i="["+D.app_key+"] "+i),e||(e=b.DEBUG);for(var n="",r=2;r<arguments.length;r++)n+=arguments[r];var o=e+"[Countly] "+i+n;e===b.ERROR?(console.error(o),Nt.incrementErrorCount()):e===b.WARNING?(console.warn(o),Nt.incrementWarningCount()):e===b.INFO?console.info(o):e===b.VERBOSE?console.log(o):console.debug(o)}}function gt(e,t,i,n,r){E?_t(e,t,i,n,r):mt(e,t,i,n,r)}function pt(e){var t=e;return D.salt&&(t+="&checksum256="+(0,n.SHA256)(t+D.salt)),t}function _t(e,t,i,n,r){r=r||!1;try{ft(b.DEBUG,"Sending XML HTTP request");var o=new XMLHttpRequest,a=G(i=i||{}),s="GET";(D.force_post||a.length>=2e3)&&(s="POST");var c=pt(a);for(var l in"GET"===s?o.open("GET",t+"?"+c,!0):(o.open("POST",t,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded")),D.headers)o.setRequestHeader(l,D.headers[l]);o.onreadystatechange=function(){4===this.readyState&&(ft(b.DEBUG,e+" HTTP request completed with status code: ["+this.status+"] and response: ["+this.responseText+"]"),(r?yt(this.status,this.responseText):vt(this.status,this.responseText))?"function"==typeof n&&n(!1,i,this.responseText):(ft(b.ERROR,e+" Invalid response from server"),"send_request_queue"===e&&Nt.saveRequestCounters(this.status,this.responseText),"function"==typeof n&&n(!0,i,this.status,this.responseText)))},"GET"===s?o.send():o.send(c)}catch(t){ft(b.ERROR,e+" Something went wrong while making an XML HTTP request: "+t),"function"==typeof n&&n(!0,i)}}function mt(e,t,i,n,r){var o;r=r||!1;try{ft(b.DEBUG,"Sending Fetch request");var a="GET",s={"Content-type":"application/x-www-form-urlencoded"},c=null;for(var l in i=i||{},D.force_post||G(i).length>=2e3?(a="POST",c=pt(G(i))):t+="?"+pt(G(i)),D.headers)s[l]=D.headers[l];fetch(t,{method:a,headers:s,body:c}).then((function(e){return(o=e).text()})).then((function(t){ft(b.DEBUG,e+" Fetch request completed wit status code: ["+o.status+"] and response: ["+t+"]"),(r?yt(o.status,t):vt(o.status,t))?"function"==typeof n&&n(!1,i,t):(ft(b.ERROR,e+" Invalid response from server"),"send_request_queue"===e&&Nt.saveRequestCounters(o.status,t),"function"==typeof n&&n(!0,i,o.status,t))})).catch((function(t){ft(b.ERROR,e+" Failed Fetch request: "+t),"function"==typeof n&&n(!0,i)}))}catch(t){ft(b.ERROR,e+" Something went wrong with the Fetch request attempt: "+t),"function"==typeof n&&n(!0,i)}}function vt(e,t){if(!(e>=200&&e<300))return ft(b.ERROR,"Http response status code:["+e+"] is not within the expected range"),!1;try{var i=JSON.parse(t);return"[object Object]"!==Object.prototype.toString.call(i)?(ft(b.ERROR,"Http response is not JSON Object"),!1):!!i.result}catch(e){return ft(b.ERROR,"Http response is not JSON: "+e),!1}}function yt(e,t){if(!(e>=200&&e<300))return ft(b.ERROR,"Http response status code:["+e+"] is not within the expected range"),!1;try{var i=JSON.parse(t);return!("[object Object]"!==Object.prototype.toString.call(i)&&!Array.isArray(i)&&(ft(b.ERROR,"Http response is not JSON Object nor JSON Array"),1))}catch(e){return ft(b.ERROR,"Http response is not JSON: "+e),!1}}function wt(){E?Te=Math.max(Te,window.scrollY,document.body.scrollTop,document.documentElement.scrollTop):ft(b.WARNING,"processScroll, window object is not available. Not processing scroll.")}function bt(){if(E){if(Le){Le=!1;var e=Y(),t=X(),i=Q();if(D.check_consent(c)){var n={type:"scroll",y:Te+i,width:t,height:e,view:D.getViewUrl()};n=U(n,D.maxKeyLength,D.maxValueSize,D.maxSegmentationValues,"processScrollView",ft),D.track_domains&&(n.domain=window.location.hostname),Xe({key:y.ACTION,segmentation:n})}}}else ft(b.WARNING,"processScrollView, window object is not available. Not processing scroll view.")}function kt(e){St("cly_token",e)}function xt(e,t,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var r="; expires="+n.toGMTString();document.cookie=e+"="+t+r+"; path=/"}function Rt(e,i,n){var r;if("none"!==D.storage&&("object"===t(D.storage)||E))return n||(e=D.app_key+"/"+e,D.namespace&&(e=L(D.namespace)+"/"+e)),"object"===t(D.storage)&&"function"==typeof D.storage.getItem?(r=D.storage.getItem(e),e.endsWith("cly_id")?r:D.deserialize(r)):(void 0===i&&(i=We),i?r=localStorage.getItem(e):"localstorage"!==D.storage&&(r=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0,r=i.length;n<r;n++){for(var o=i[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}(e)),e.endsWith("cly_id")?r:D.deserialize(r));ft(b.DEBUG,"Storage is disabled. Value with key: ["+e+"] won't be retrieved")}function St(e,i,n,r){if("none"===D.storage||"object"!==t(D.storage)&&!E)ft(b.DEBUG,"Storage is disabled. Value with key: "+e+" won't be stored");else if(r||(e=D.app_key+"/"+e,D.namespace&&(e=L(D.namespace)+"/"+e)),null!=i){if("object"===t(D.storage)&&"function"==typeof D.storage.setItem)return void D.storage.setItem(e,i);void 0===n&&(n=We),i=D.serialize(i),n?localStorage.setItem(e,i):"localstorage"!==D.storage&&xt(e,i,30)}}function Et(e,i,n){"none"===D.storage||"object"!==t(D.storage)&&!E?ft(b.DEBUG,"Storage is disabled. Value with key: "+e+" won't be removed"):(n||(e=D.app_key+"/"+e,D.namespace&&(e=L(D.namespace)+"/"+e)),"object"!==t(D.storage)||"function"!=typeof D.storage.removeItem?(void 0===i&&(i=We),i?localStorage.removeItem(e):"localstorage"!==D.storage&&xt(e,"",-1)):D.storage.removeItem(e))}this.userData={set:function(e,t){ft(b.INFO,"[userData] set, Setting user's custom property value: ["+t+"] under the key: ["+e+"]"),e=H(e,D.maxKeyLength,"userData set",ft),t=H(t,D.maxValueSize,"userData set",ft),Qe[e]=t},unset:function(e){ft(b.INFO,"[userData] unset, Resetting user's custom property with key: ["+e+"] "),Qe[e]=""},set_once:function(e,t){ft(b.INFO,"[userData] set_once, Setting user's unique custom property value: ["+t+"] under the key: ["+e+"] "),e=H(e,D.maxKeyLength,"userData set_once",ft),t=H(t,D.maxValueSize,"userData set_once",ft),$e(e,t,"$setOnce")},increment:function(e){ft(b.INFO,"[userData] increment, Increasing user's custom property value under the key: ["+e+"] by one"),e=H(e,D.maxKeyLength,"userData increment",ft),$e(e,1,"$inc")},increment_by:function(e,t){ft(b.INFO,"[userData] increment_by, Increasing user's custom property value under the key: ["+e+"] by: ["+t+"]"),e=H(e,D.maxKeyLength,"userData increment_by",ft),t=H(t,D.maxValueSize,"userData increment_by",ft),$e(e,t,"$inc")},multiply:function(e,t){ft(b.INFO,"[userData] multiply, Multiplying user's custom property value under the key: ["+e+"] by: ["+t+"]"),e=H(e,D.maxKeyLength,"userData multiply",ft),t=H(t,D.maxValueSize,"userData multiply",ft),$e(e,t,"$mul")},max:function(e,t){ft(b.INFO,"[userData] max, Saving user's maximum custom property value compared to the value: ["+t+"] under the key: ["+e+"]"),e=H(e,D.maxKeyLength,"userData max",ft),t=H(t,D.maxValueSize,"userData max",ft),$e(e,t,"$max")},min:function(e,t){ft(b.INFO,"[userData] min, Saving user's minimum custom property value compared to the value: ["+t+"] under the key: ["+e+"]"),e=H(e,D.maxKeyLength,"userData min",ft),t=H(t,D.maxValueSize,"userData min",ft),$e(e,t,"$min")},push:function(e,t){ft(b.INFO,"[userData] push, Pushing a value: ["+t+"] under the key: ["+e+"] to user's custom property array"),e=H(e,D.maxKeyLength,"userData push",ft),t=H(t,D.maxValueSize,"userData push",ft),$e(e,t,"$push")},push_unique:function(e,t){ft(b.INFO,"[userData] push_unique, Pushing a unique value: ["+t+"] under the key: ["+e+"] to user's custom property array"),e=H(e,D.maxKeyLength,"userData push_unique",ft),t=H(t,D.maxValueSize,"userData push_unique",ft),$e(e,t,"$addToSet")},pull:function(e,t){ft(b.INFO,"[userData] pull, Removing the value: ["+t+"] under the key: ["+e+"] from user's custom property array"),$e(e,t,"$pull")},save:function(){ft(b.INFO,"[userData] save, Saving changes to user's custom property"),D.check_consent(f)&&(tt(),ft(b.INFO,"user_details, flushed the event queue"),st({user_details:JSON.stringify({custom:Qe})})),Qe={}}},this.report_trace=function(e){if(ft(b.INFO,"report_trace, Reporting performance trace"),this.check_consent(_)){for(var t=["type","name","stz","etz","apm_metrics","apm_attr"],i=0;i<t.length;i++)if("apm_attr"!==t[i]&&void 0===e[t[i]])return void ft(b.WARNING,"report_trace, APM trace don't have the property: "+t[i]);e.name=H(e.name,D.maxKeyLength,"report_trace",ft),e.app_metrics=U(e.app_metrics,D.maxKeyLength,D.maxValueSize,D.maxSegmentationValues,"report_trace",ft);var n=T(e,t);n.timestamp=e.stz;var r=new Date;n.hour=r.getHours(),n.dow=r.getDay(),st({apm:JSON.stringify(n)}),ft(b.INFO,"report_trace, Successfully adding APM trace: ",n)}},this.track_errors=function(e){E?(ft(b.INFO,"track_errors, Started tracking errors"),N.i[this.app_key].tracking_crashes=!0,window.cly_crashes||(window.cly_crashes=!0,ge=e,window.onerror=function e(t,i,n,r,o){if(null!=o)F(o,!1);else{var a="";void 0!==t&&(a+=t+"\n"),void 0!==i&&(a+="at "+i),void 0!==n&&(a+=":"+n),void 0!==(r=r||window.event&&window.event.errorCharacter)&&(a+=":"+r),a+="\n";try{for(var s=[],c=e.caller;c;)s.push(c.name),c=c.caller;a+=s.join("\n")}catch(e){ft(b.ERROR,"track_errors, Call stack generation experienced a problem: "+e)}F(a,!1)}},window.addEventListener("unhandledrejection",(function(e){F(new Error("Unhandled rejection (reason: "+(e.reason&&e.reason.stack?e.reason.stack:e.reason)+")."),!0)})))):ft(b.WARNING,"track_errors, window object is not available. Not tracking errors.")},this.log_error=function(e,t){ft(b.INFO,"log_error, Logging errors"),this.recordError(e,!0,t)},this.add_log=function(e){if(ft(b.INFO,"add_log, Adding a new log of breadcrumbs: [ "+e+" ]"),this.check_consent(u)){for(e=H(e,D.maxValueSize,"add_log",ft);ue.length>=D.maxBreadcrumbCount;)ue.shift(),ft(b.WARNING,"add_log, Reached maximum crashLogs size. Will erase the oldest one.");ue.push(e)}},this.fetch_remote_config=function(e,t,i){var n=null,r=null,o=null;if(e&&(i||"function"!=typeof e?Array.isArray(e)&&(n=e):o=e),t&&(i||"function"!=typeof t?Array.isArray(t)&&(r=t):o=t),o||"function"!=typeof i||(o=i),this.useExplicitRcApi)return ft(b.INFO,"fetch_remote_config, Fetching remote config"),void Ze(n,r,this.rcAutoOptinAb?1:0,null,o);ft(b.WARNING,"fetch_remote_config, Fetching remote config, with legacy API"),Ze(n,r,null,"legacy",o)},this.enrollUserToAb=function(e){if(ft(b.INFO,"enrollUserToAb, Providing AB test keys to opt in for"),e&&Array.isArray(e)&&0!==e.length){var t={method:"ab",keys:JSON.stringify(e),av:D.app_version};at(t),gt("enrollUserToAb",this.url+oe,t,(function(e,t,i){if(!e)try{var n=JSON.parse(i);ft(b.DEBUG,"enrollUserToAb, Parsed the response's result: ["+n.result+"]")}catch(e){ft(b.ERROR,"enrollUserToAb, Had an issue while parsing the response: "+e)}}),!0)}else ft(b.ERROR,"enrollUserToAb, No keys provided")},this.get_remote_config=function(e){return ft(b.INFO,"get_remote_config, Getting remote config from storage"),void 0!==e?de[e]:de},this.stop_time=function(){ft(b.INFO,"stop_time, Stopping tracking duration"),Ce&&(Ce=!1,_e=A()-r,ye=A()-ve)},this.start_time=function(){ft(b.INFO,"start_time, Starting tracking duration"),Ce||(Ce=!0,r=A()-_e,ve=A()-ye,ye=0,ot())},this.track_sessions=function(){if(E){ft(b.INFO,"track_session, Starting tracking user session"),this.begin_session(),this.start_time(),M(window,"beforeunload",(function(){tt(),D.end_session()}));var e="hidden";M(window,"focus",t),M(window,"blur",t),M(window,"pageshow",t),M(window,"pagehide",t),"onfocusin"in document&&(M(window,"focusin",t),M(window,"focusout",t)),e in document?document.addEventListener("visibilitychange",t):"mozHidden"in document?(e="mozHidden",document.addEventListener("mozvisibilitychange",t)):"webkitHidden"in document?(e="webkitHidden",document.addEventListener("webkitvisibilitychange",t)):"msHidden"in document&&(e="msHidden",document.addEventListener("msvisibilitychange",t)),M(window,"mousemove",i),M(window,"click",i),M(window,"keydown",i),M(window,"scroll",i),setInterval((function(){++xe>=ke&&D.stop_time()}),6e4)}else ft(b.WARNING,"track_sessions, window object is not available. Not tracking sessions.");function t(){document[e]||!document.hasFocus()?D.stop_time():D.start_time()}function i(){xe>=ke&&D.start_time(),xe=0}},this.track_pageview=function(e,t,i){if(E||e)if(ft(b.INFO,"track_pageview, Tracking page views"),ft(b.VERBOSE,"track_pageview, last view is:["+me+"], current view ID is:["+He+"], previous view ID is:["+Me+"]"),me&&Ue&&(ft(b.DEBUG,"track_pageview, Scroll registry triggered"),bt(),Le=!0,Te=0),rt(),Me=He,He=B(),(e=H(e,D.maxKeyLength,"track_pageview",ft))&&Array.isArray(e)&&(t=e,e=null),e||(e=this.getViewName()),void 0!==e&&""!==e)if(null!==e){if(t&&t.length)for(var n=0;n<t.length;n++)try{if(new RegExp(t[n]).test(e))return void ft(b.INFO,"track_pageview, Ignoring the page: "+e)}catch(e){ft(b.ERROR,"track_pageview, Problem with finding ignore list item: "+t[n]+", error: "+e)}me=e,ve=A(),ft(b.VERBOSE,"track_pageview, last view is assigned:["+me+"], current view ID is:["+He+"], previous view ID is:["+Me+"]");var r={name:e,visit:1,view:D.getViewUrl()};if(r=U(r,D.maxKeyLength,D.maxValueSize,D.maxSegmentationValues,"track_pageview",ft),this.track_domains&&(r.domain=window.location.hostname),Ne)if($)Fe&&(Fe=!1,r.start=1);else{var o=Rt("cly_session");(!o||parseInt(o)<=A())&&(Fe=!1,r.start=1)}else if(E&&void 0!==document.referrer&&document.referrer.length){var a=S.exec(document.referrer);a&&a[11]&&a[11]!==window.location.hostname&&(r.start=1)}if(Pe&&Object.keys(Pe).length)for(var c in ft(b.INFO,"track_pageview, Adding fresh utm tags to segmentation:["+JSON.stringify(Pe)+"]"),Pe)void 0===r["utm_"+c]&&(r["utm_"+c]=Pe[c]);if(E&&ht()&&(ft(b.INFO,"track_pageview, Adding referrer to segmentation:["+document.referrer+"]"),r.referrer=document.referrer),i)for(var l in i=U(i,D.maxKeyLength,D.maxValueSize,D.maxSegmentationValues,"track_pageview",ft))void 0===r[l]&&(r[l]=i[l]);this.check_consent(s)?Xe({key:y.VIEW,segmentation:r},He):Ae.track_pageview=arguments}else ft(b.ERROR,"track_pageview, View name returned as null. Page view will be ignored.");else ft(b.ERROR,"track_pageview, No page name to track (it is either undefined or empty string). No page view can be tracked.");else ft(b.WARNING,"track_pageview, window object is not available. Not tracking page views is page is not provided.")},this.track_view=function(e,t,i){ft(b.INFO,"track_view, Initiating tracking page views"),this.track_pageview(e,t,i)},this.track_clicks=function(e){if(E){ft(b.INFO,"track_clicks, Starting to track clicks"),e&&ft(b.INFO,"track_clicks, Tracking the specified children:["+e+"]"),e=e||document;var t=!0;M(e,"click",(function(e){if(t){if(t=!1,K(e),void 0!==e.pageX&&void 0!==e.pageY){var i=Y(),n=X();if(D.check_consent(l)){var r={type:"click",x:e.pageX,y:e.pageY,width:n,height:i,view:D.getViewUrl()};r=U(r,D.maxKeyLength,D.maxValueSize,D.maxSegmentationValues,"processClick",ft),D.track_domains&&(r.domain=window.location.hostname),Xe({key:y.ACTION,segmentation:r})}}setTimeout((function(){t=!0}),1e3)}}))}else ft(b.WARNING,"track_clicks, window object is not available. Not tracking clicks.")},this.track_scrolls=function(e){E?(ft(b.INFO,"track_scrolls, Starting to track scrolls"),e&&ft(b.INFO,"track_scrolls, Tracking the specified children"),e=e||window,Le=!0,Ue=!0,M(e,"scroll",wt),M(e,"beforeunload",bt)):ft(b.WARNING,"track_scrolls, window object is not available. Not tracking scrolls.")},this.track_links=function(e){E?(ft(b.INFO,"track_links, Starting to track clicks to links"),e&&ft(b.INFO,"track_links, Tracking the specified children"),M(e=e||document,"click",(function(e){var t=function(e,t){for(t=t.toUpperCase();e;){if(e.nodeName.toUpperCase()===t)return e;e=e.parentElement}}(P(e),"a");t&&(K(e),D.check_consent(l)&&Xe({key:"linkClick",segmentation:{href:t.href,text:t.innerText,id:t.id,view:D.getViewUrl()}}))}))):ft(b.WARNING,"track_links, window object is not available. Not tracking links.")},this.track_forms=function(e,t){function i(e){return e.name||e.id||e.type||e.nodeName}E?(ft(b.INFO,"track_forms, Starting to track form submissions. DOM object provided:["+!!e+"] Tracking hidden inputs :["+!!t+"]"),M(e=e||document,"submit",(function(e){var n,r=P(e),o={id:r.attributes.id&&r.attributes.id.nodeValue,name:r.attributes.name&&r.attributes.name.nodeValue,action:r.attributes.action&&r.attributes.action.nodeValue,method:r.attributes.method&&r.attributes.method.nodeValue,view:D.getViewUrl()};if(void 0!==r.elements){for(var a=0;a<r.elements.length;a++)(n=r.elements[a])&&"password"!==n.type&&-1===n.className.indexOf("cly_user_ignore")&&(void 0===o["input:"+i(n)]&&(o["input:"+i(n)]=[]),"select"===n.nodeName.toLowerCase()?void 0!==n.multiple?o["input:"+i(n)].push(I(n)):o["input:"+i(n)].push(n.options[n.selectedIndex].value):"input"===n.nodeName.toLowerCase()?void 0!==n.type?"checkbox"===n.type.toLowerCase()||"radio"===n.type.toLowerCase()?n.checked&&o["input:"+i(n)].push(n.value):("hidden"!==n.type.toLowerCase()||t)&&o["input:"+i(n)].push(n.value):o["input:"+i(n)].push(n.value):("textarea"===n.nodeName.toLowerCase()||void 0!==n.value)&&o["input:"+i(n)].push(n.value));for(var s in o)o[s]&&"function"==typeof o[s].join&&(o[s]=o[s].join(", "))}D.check_consent(d)&&Xe({key:"formSubmit",segmentation:o})}))):ft(b.WARNING,"track_forms, window object is not available. Not tracking forms.")},this.collect_from_forms=function(e,t){E?(ft(b.INFO,"collect_from_forms, Starting to collect possible user data. DOM object provided:["+!!e+"] Submitting custom user property:["+!!t+"]"),M(e=e||document,"submit",(function(i){var n,r=P(i),o={},a=!1;if(void 0!==r.elements){var s,c,l={},d=e.getElementsByTagName("LABEL");for(s=0;s<d.length;s++)d[s].htmlFor&&""!==d[s].htmlFor&&(l[d[s].htmlFor]=d[s].innerText||d[s].textContent||d[s].innerHTML);for(s=0;s<r.elements.length;s++)if((n=r.elements[s])&&"password"!==n.type&&-1===n.className.indexOf("cly_user_ignore")){var u="";if("select"===n.nodeName.toLowerCase()?u=void 0!==n.multiple?I(n):n.options[n.selectedIndex].value:"input"===n.nodeName.toLowerCase()?(void 0===n.type||"checkbox"!==n.type.toLowerCase()&&"radio"!==n.type.toLowerCase()||n.checked)&&(u=n.value):("textarea"===n.nodeName.toLowerCase()||void 0!==n.value)&&(u=n.value),n.className&&-1!==n.className.indexOf("cly_user_")){var h=n.className.split(" ");for(c=0;c<h.length;c++)if(0===h[c].indexOf("cly_user_")){o[h[c].replace("cly_user_","")]=u,a=!0;break}}else n.type&&"email"===n.type.toLowerCase()||n.name&&-1!==n.name.toLowerCase().indexOf("email")||n.id&&-1!==n.id.toLowerCase().indexOf("email")||n.id&&l[n.id]&&-1!==l[n.id].toLowerCase().indexOf("email")||/[^@\s]+@[^@\s]+\.[^@\s]+/.test(u)?(o.email||(o.email=u),a=!0):n.name&&-1!==n.name.toLowerCase().indexOf("username")||n.id&&-1!==n.id.toLowerCase().indexOf("username")||n.id&&l[n.id]&&-1!==l[n.id].toLowerCase().indexOf("username")?(o.username||(o.username=u),a=!0):n.name&&(-1!==n.name.toLowerCase().indexOf("tel")||-1!==n.name.toLowerCase().indexOf("phone")||-1!==n.name.toLowerCase().indexOf("number"))||n.id&&(-1!==n.id.toLowerCase().indexOf("tel")||-1!==n.id.toLowerCase().indexOf("phone")||-1!==n.id.toLowerCase().indexOf("number"))||n.id&&l[n.id]&&(-1!==l[n.id].toLowerCase().indexOf("tel")||-1!==l[n.id].toLowerCase().indexOf("phone")||-1!==l[n.id].toLowerCase().indexOf("number"))?(o.phone||(o.phone=u),a=!0):n.name&&(-1!==n.name.toLowerCase().indexOf("org")||-1!==n.name.toLowerCase().indexOf("company"))||n.id&&(-1!==n.id.toLowerCase().indexOf("org")||-1!==n.id.toLowerCase().indexOf("company"))||n.id&&l[n.id]&&(-1!==l[n.id].toLowerCase().indexOf("org")||-1!==l[n.id].toLowerCase().indexOf("company"))?(o.organization||(o.organization=u),a=!0):(n.name&&-1!==n.name.toLowerCase().indexOf("name")||n.id&&-1!==n.id.toLowerCase().indexOf("name")||n.id&&l[n.id]&&-1!==l[n.id].toLowerCase().indexOf("name"))&&(o.name||(o.name=""),o.name+=u+" ",a=!0)}}a&&(ft(b.INFO,"collect_from_forms, Gathered user data",o),t?D.user_details({custom:o}):D.user_details(o))}))):ft(b.WARNING,"collect_from_forms, window object is not available. Not collecting from forms.")},this.collect_from_facebook=function(e){E?"undefined"!=typeof FB&&FB&&FB.api?(ft(b.INFO,"collect_from_facebook, Starting to collect possible user data"),FB.api("/me",(function(t){var i={};if(t.name&&(i.name=t.name),t.email&&(i.email=t.email),"male"===t.gender?i.gender="M":"female"===t.gender&&(i.gender="F"),t.birthday){var n=t.birthday.split("/").pop();n&&4===n.length&&(i.byear=n)}if(t.work&&t.work[0]&&t.work[0].employer&&t.work[0].employer.name&&(i.organization=t.work[0].employer.name),e)for(var r in i.custom={},e){for(var o=e[r].split("."),a=t,s=0;s<o.length&&void 0!==(a=a[o[s]]);s++);void 0!==a&&(i.custom[r]=a)}D.user_details(i)}))):ft(b.ERROR,"collect_from_facebook, Facebook SDK is not available"):ft(b.WARNING,"collect_from_facebook, window object is not available. Not collecting from Facebook.")},this.opt_out=function(){ft(b.INFO,"opt_out, Opting out the user"),this.ignore_visitor=!0,St("cly_ignore",!0)},this.opt_in=function(){ft(b.INFO,"opt_in, Opting in the user"),St("cly_ignore",!1),this.ignore_visitor=!1,et(),this.ignore_visitor||Oe||ct()},this.report_feedback=function(e){ft(b.WARNING,"report_feedback, Deprecated function call! Use 'recordRatingWidgetWithID' or 'reportFeedbackWidgetManually' in place of this call. Call will be redirected to 'recordRatingWidgetWithID' now!"),this.recordRatingWidgetWithID(e)},this.recordRatingWidgetWithID=function(e){if(ft(b.INFO,"recordRatingWidgetWithID, Providing information about user with ID: [ "+e.widget_id+" ]"),this.check_consent(g))if(e.widget_id)if(e.rating){var t={key:y.STAR_RATING,count:1,segmentation:{}};t.segmentation=T(e,["widget_id","contactMe","platform","app_version","rating","email","comment"]),t.segmentation.app_version||(t.segmentation.app_version=this.metrics._app_version||this.app_version),t.segmentation.rating>5?(ft(b.WARNING,"recordRatingWidgetWithID, You have entered a rating higher than 5. Changing it back to 5 now."),t.segmentation.rating=5):t.segmentation.rating<1&&(ft(b.WARNING,"recordRatingWidgetWithID, You have entered a rating lower than 1. Changing it back to 1 now."),t.segmentation.rating=1),ft(b.INFO,"recordRatingWidgetWithID, Reporting Rating Widget: ",t),Xe(t)}else ft(b.ERROR,"recordRatingWidgetWithID, Rating Widget must contain rating property");else ft(b.ERROR,"recordRatingWidgetWithID, Rating Widget must contain widget_id property")},this.reportFeedbackWidgetManually=function(e,t,i){if(this.check_consent(m))if(e&&t)if(e._id)if(De)ft(b.ERROR,"reportFeedbackWidgetManually, Feedback Widgets can not be reported in offline mode");else{ft(b.INFO,"reportFeedbackWidgetManually, Providing information about user with, provided result of the widget with  ID: [ "+e._id+" ] and type: ["+e.type+"]");var n,r=[],o=e.type;if("nps"===o){if(i){if(!i.rating)return void ft(b.ERROR,"reportFeedbackWidgetManually, Widget must contain rating property");i.rating=Math.round(i.rating),i.rating>10?(ft(b.WARNING,"reportFeedbackWidgetManually, You have entered a rating higher than 10. Changing it back to 10 now."),i.rating=10):i.rating<0&&(ft(b.WARNING,"reportFeedbackWidgetManually, You have entered a rating lower than 0. Changing it back to 0 now."),i.rating=0),r=["rating","comment"]}n=y.NPS}else if("survey"===o){if(i){if(Object.keys(i).length<1)return void ft(b.ERROR,"reportFeedbackWidgetManually, Widget should have answers to be reported");r=Object.keys(i)}n=y.SURVEY}else{if("rating"!==o)return void ft(b.ERROR,"reportFeedbackWidgetManually, Widget has an unacceptable type");if(i){if(!i.rating)return void ft(b.ERROR,"reportFeedbackWidgetManually, Widget must contain rating property");i.rating=Math.round(i.rating),i.rating>5?(ft(b.WARNING,"reportFeedbackWidgetManually, You have entered a rating higher than 5. Changing it back to 5 now."),i.rating=5):i.rating<1&&(ft(b.WARNING,"reportFeedbackWidgetManually, You have entered a rating lower than 1. Changing it back to 1 now."),i.rating=1),r=["rating","comment","email","contactMe"]}n=y.STAR_RATING}var a={key:n,count:1,segmentation:{widget_id:e._id,platform:this.platform,app_version:this.metrics._app_version||this.app_version}};null===i?a.segmentation.closed=1:a.segmentation=function(e,t,i){if(i){for(var n,r=0,o=i.length;r<o;r++)void 0!==t[n=i[r]]&&(e[n]=t[n]);return e}}(a.segmentation,i,r),ft(b.INFO,"reportFeedbackWidgetManually, Reporting "+o+": ",a),Xe(a)}else ft(b.ERROR,"reportFeedbackWidgetManually, Feedback Widgets must contain _id property");else ft(b.ERROR,"reportFeedbackWidgetManually, Widget data and/or Widget object not provided. Aborting.")},this.show_feedback_popup=function(e){E?(ft(b.WARNING,"show_feedback_popup, Deprecated function call! Use 'presentRatingWidgetWithID' in place of this call. Call will be redirected now!"),this.presentRatingWidgetWithID(e)):ft(b.WARNING,"show_feedback_popup, window object is not available. Not showing feedback popup.")},this.presentRatingWidgetWithID=function(e){E?(ft(b.INFO,"presentRatingWidgetWithID, Showing rating widget popup for the widget with ID: [ "+e+" ]"),this.check_consent(g)&&(De?ft(b.ERROR,"presentRatingWidgetWithID, Cannot show ratingWidget popup in offline mode"):gt("presentRatingWidgetWithID,",this.url+"/o/feedback/widget",{widget_id:e,av:D.app_version},(function(e,t,i){if(!e)try{it(JSON.parse(i),!1)}catch(e){ft(b.ERROR,"presentRatingWidgetWithID, JSON parse failed: "+e)}}),!0))):ft(b.WARNING,"presentRatingWidgetWithID, window object is not available. Not showing rating widget popup.")},this.initialize_feedback_popups=function(e){E?(ft(b.WARNING,"initialize_feedback_popups, Deprecated function call! Use 'initializeRatingWidgets' in place of this call. Call will be redirected now!"),this.initializeRatingWidgets(e)):ft(b.WARNING,"initialize_feedback_popups, window object is not available. Not initializing feedback popups.")},this.initializeRatingWidgets=function(e){if(E){if(ft(b.INFO,"initializeRatingWidgets, Initializing rating widget with provided widget IDs:[ "+e+"]"),this.check_consent(g)){e||(e=Rt("cly_fb_widgets"));for(var t=document.getElementsByClassName("countly-feedback-sticker");t.length>0;)t[0].remove();gt("initializeRatingWidgets,",this.url+"/o/feedback/multiple-widgets-by-id",{widgets:JSON.stringify(e),av:D.app_version},(function(e,t,i){if(!e)try{for(var n=JSON.parse(i),r=0;r<n.length;r++)if("true"===n[r].is_active&&n[r].target_devices[q()])if("string"==typeof n[r].hide_sticker&&(n[r].hide_sticker="true"===n[r].hide_sticker),"all"!==n[r].target_page||n[r].hide_sticker)for(var o=n[r].target_pages,a=0;a<o.length;a++){var s=o[a].substr(0,o[a].length-1)===window.location.pathname.substr(0,o[a].length-1),c=o[a]===window.location.pathname;(o[a].includes("*")&&s||c)&&!n[r].hide_sticker&&it(n[r],!0)}else it(n[r],!0)}catch(e){ft(b.ERROR,"initializeRatingWidgets, JSON parse error: "+e)}}),!0)}}else ft(b.WARNING,"initializeRatingWidgets, window object is not available. Not initializing rating widgets.")},this.enable_feedback=function(e){E?(ft(b.WARNING,"enable_feedback, Deprecated function call! Use 'enableRatingWidgets' in place of this call. Call will be redirected now!"),this.enableRatingWidgets(e)):ft(b.WARNING,"enable_feedback, window object is not available. Not enabling feedback.")},this.enableRatingWidgets=function(e){if(E){if(ft(b.INFO,"enableRatingWidgets, Enabling rating widget with params:",e),this.check_consent(g))if(De)ft(b.ERROR,"enableRatingWidgets, Cannot enable rating widgets in offline mode");else{St("cly_fb_widgets",e.popups||e.widgets),ee(this.url+"/star-rating/stylesheets/countly-feedback-web.css");var t=e.popups||e.widgets;t.length>0?(document.body.insertAdjacentHTML("beforeend",'<div id="cfbg"></div>'),this.initializeRatingWidgets(t)):ft(b.ERROR,"enableRatingWidgets, You should provide at least one widget id as param. Read documentation for more detail. https://resources.count.ly/plugins/feedback")}}else ft(b.WARNING,"enableRatingWidgets, window object is not available. Not enabling rating widgets.")},this.get_available_feedback_widgets=function(e){ft(b.INFO,"get_available_feedback_widgets, Getting the feedback list, callback function is provided:["+!!e+"]"),this.check_consent(m)?De?ft(b.ERROR,"get_available_feedback_widgets, Cannot enable feedback widgets in offline mode."):gt("get_available_feedback_widgets,",this.url+oe,{method:m,device_id:this.device_id,app_key:this.app_key,av:D.app_version},(function(t,i,n){if(t)e&&e(null,t);else try{var r=JSON.parse(n).result||[];e&&e(r,null)}catch(t){ft(b.ERROR,"get_available_feedback_widgets, Error while parsing feedback widgets list: "+t),e&&e(null,t)}}),!1):e&&e(null,new Error("Consent for feedback not provided."))},this.getFeedbackWidgetData=function(e,t){if(e.type)if(ft(b.INFO,"getFeedbackWidgetData, Retrieving data for: ["+JSON.stringify(e)+"], callback function is provided:["+!!t+"]"),this.check_consent(m))if(De)ft(b.ERROR,"getFeedbackWidgetData, Cannot enable feedback widgets in offline mode.");else{var i=this.url,n={widget_id:e._id,shown:1,sdk_version:je,sdk_name:Ve,platform:this.platform,app_version:this.app_version};if("nps"===e.type)i+="/o/surveys/nps/widget";else if("survey"===e.type)i+="/o/surveys/survey/widget";else{if("rating"!==e.type)return void ft(b.ERROR,"getFeedbackWidgetData, Unknown type info: ["+e.type+"]");i+="/o/surveys/rating/widget"}gt("getFeedbackWidgetData,",i,n,(function(e,i,n){if(e)t&&t(null,e);else try{var r=JSON.parse(n);t&&t(r,null)}catch(e){ft(b.ERROR,"getFeedbackWidgetData, Error while parsing feedback widgets list: "+e),t&&t(null,e)}}),!0)}else t&&t(null,new Error("Consent for feedback not provided."));else ft(b.ERROR,"getFeedbackWidgetData, Expected the provided widget object to have a type but got: ["+JSON.stringify(e)+"], aborting.")},this.present_feedback_widget=function(e,i,n,r){if(E){if(ft(b.INFO,"present_feedback_widget, Presenting the feedback widget by appending to the element with ID: [ "+i+" ] and className: [ "+n+" ]"),this.check_consent(m))if(e&&"object"===t(e)&&!Array.isArray(e)){ft(b.INFO,"present_feedback_widget, Adding segmentation to feedback widgets:["+JSON.stringify(r)+"]"),r&&"object"===t(r)&&0!==Object.keys(r).length||(ft(b.DEBUG,"present_feedback_widget, Segmentation is not an object or empty"),r=null);try{var o=this.url;if("nps"===e.type)ft(b.DEBUG,"present_feedback_widget, Widget type: nps."),o+="/feedback/nps";else if("survey"===e.type)ft(b.DEBUG,"present_feedback_widget, Widget type: survey."),o+="/feedback/survey";else{if("rating"!==e.type)return void ft(b.ERROR,"present_feedback_widget, Feedback widget only accepts nps, rating and survey types.");ft(b.DEBUG,"present_feedback_widget, Widget type: rating."),o+="/feedback/rating"}var a,s=window.origin||window.location.origin;if("rating"===e.type?(ft(b.DEBUG,"present_feedback_widget, Loading css for rating widget."),a="ratings",ee(this.url+"/star-rating/stylesheets/countly-feedback-web.css")):(ft(b.DEBUG,"present_feedback_widget, Loading css for survey or nps."),ee(this.url+"/surveys/stylesheets/countly-surveys.css"),a="surveys"),o+="?widget_id="+e._id,o+="&app_key="+this.app_key,o+="&device_id="+this.device_id,o+="&sdk_name="+Ve,o+="&platform="+this.platform,o+="&app_version="+this.app_version,o+="&sdk_version="+je,r){var c={};c.sg=r,o+="&custom="+JSON.stringify(c)}o+="&origin="+s,o+="&widget_v=web";var l=document.createElement("iframe");l.src=o,l.name="countly-"+a+"-iframe",l.id="countly-"+a+"-iframe";var d=!1;l.onload=function(){d&&(document.getElementById("countly-"+a+"-wrapper-"+e._id).style.display="none",document.getElementById("csbg").style.display="none"),d=!0,ft(b.DEBUG,"present_feedback_widget, Loaded iframe.")};for(var u=document.getElementById("csbg");u;)u.remove(),u=document.getElementById("csbg"),ft(b.DEBUG,"present_feedback_widget, Removing past overlay.");for(var h=document.getElementsByClassName("countly-"+a+"-wrapper"),f=0;f<h.length;f++)h[f].remove(),ft(b.DEBUG,"present_feedback_widget, Removed a wrapper.");(h=document.createElement("div")).className="countly-"+a+"-wrapper",h.id="countly-"+a+"-wrapper-"+e._id,"survey"===e.type&&(h.className=h.className+" "+e.appearance.position);var g=document.body,p=!1;if(i&&(document.getElementById(i)?(g=document.getElementById(i),p=!0):ft(b.ERROR,"present_feedback_widget, Provided ID not found.")),p||n&&(document.getElementsByClassName(n)[0]?g=document.getElementsByClassName(n)[0]:ft(b.ERROR,"present_feedback_widget, Provided class not found.")),g.insertAdjacentHTML("beforeend",'<div id="csbg"></div>'),g.appendChild(h),"rating"===e.type){var _=document.createElement("div");_.className="countly-ratings-overlay",_.id="countly-ratings-overlay-"+e._id,h.appendChild(_),ft(b.DEBUG,"present_feedback_widget, appended the rating overlay to wrapper"),M(document.getElementById("countly-ratings-overlay-"+e._id),"click",(function(){document.getElementById("countly-ratings-wrapper-"+e._id).style.display="none"}))}if(h.appendChild(l),ft(b.DEBUG,"present_feedback_widget, Appended the iframe"),M(window,"message",(function(t){var i={};try{i=JSON.parse(t.data),ft(b.DEBUG,"present_feedback_widget, Parsed response message "+i)}catch(e){ft(b.ERROR,"present_feedback_widget, Error while parsing message body "+e)}i.close?(document.getElementById("countly-"+a+"-wrapper-"+e._id).style.display="none",document.getElementById("csbg").style.display="none"):ft(b.DEBUG,"present_feedback_widget, Closing signal not sent yet")})),"survey"===e.type){var v=!1;switch(e.showPolicy){case"afterPageLoad":"complete"===document.readyState?v||(v=!0,w(e)):M(document,"readystatechange",(function(t){"complete"===t.target.readyState&&(v||(v=!0,w(e)))}));break;case"afterConstantDelay":setTimeout((function(){v||(v=!0,w(e))}),1e4);break;case"onAbandon":"complete"===document.readyState?M(document,"mouseleave",(function(){v||(v=!0,w(e))})):M(document,"readystatechange",(function(t){"complete"===t.target.readyState&&M(document,"mouseleave",(function(){v||(v=!0,w(e))}))}));break;case"onScrollHalfwayDown":M(window,"scroll",(function(){v||Math.max(window.scrollY,document.body.scrollTop,document.documentElement.scrollTop)>=Y()/2&&(v=!0,w(e))}));break;default:v||(v=!0,w(e))}}else if("nps"===e.type)document.getElementById("countly-"+a+"-wrapper-"+e._id).style.display="block",document.getElementById("csbg").style.display="block";else if("rating"===e.type){var y=!1;"complete"===document.readyState?y||(y=!0,k(e)):M(document,"readystatechange",(function(t){"complete"===t.target.readyState&&(y||(y=!0,k(e)))}))}}catch(e){ft(b.ERROR,"present_feedback_widget, Something went wrong while presenting the widget: "+e)}}else ft(b.ERROR,"present_feedback_widget, Please provide at least one feedback widget object.")}else ft(b.WARNING,"present_feedback_widget, window object is not available. Not presenting feedback widget.");function w(e){document.getElementById("countly-surveys-wrapper-"+e._id).style.display="block",document.getElementById("csbg").style.display="block"}function k(e){if(!e.appearance.hideS){ft(b.DEBUG,"present_feedback_widget, handling the sticker as it was not set to hidden");var t=document.createElement("div");t.innerText=e.appearance.text,t.style.color=e.appearance.text_color.length<7?"#"+e.appearance.text_color:e.appearance.text_color,t.style.backgroundColor=e.appearance.bg_color.length<7?"#"+e.appearance.bg_color:e.appearance.bg_color,t.className="countly-feedback-sticker  "+e.appearance.position+"-"+e.appearance.size,t.id="countly-feedback-sticker-"+e._id,document.body.appendChild(t),M(document.getElementById("countly-feedback-sticker-"+e._id),"click",(function(){document.getElementById("countly-ratings-wrapper-"+e._id).style.display="flex",document.getElementById("csbg").style.display="block"}))}M(document.getElementById("countly-feedback-close-icon-"+e._id),"click",(function(){document.getElementById("countly-ratings-wrapper-"+e._id).style.display="none",document.getElementById("csbg").style.display="none"}))}},this.recordError=function(e,i,n){if(ft(b.INFO,"recordError, Recording error"),this.check_consent(u)&&e){n=n||ge;var r="";if("object"===t(e)?void 0!==e.stack?r=e.stack:(void 0!==e.name&&(r+=e.name+":"),void 0!==e.message&&(r+=e.message+"\n"),void 0!==e.fileName&&(r+="in "+e.fileName+"\n"),void 0!==e.lineNumber&&(r+="on "+e.lineNumber),void 0!==e.columnNumber&&(r+=":"+e.columnNumber)):r=e+"",r.length>D.maxStackTraceLineLength*D.maxStackTraceLinesPerThread){ft(b.DEBUG,"record_error, Error stack is too long will be truncated");var o=r.split("\n");o.length>D.maxStackTraceLinesPerThread&&(o=o.splice(0,D.maxStackTraceLinesPerThread));for(var a=0,s=o.length;a<s;a++)o[a].length>D.maxStackTraceLineLength&&(o[a]=o[a].substring(0,D.maxStackTraceLineLength));r=o.join("\n")}i=!!i;var c=ut(),l={_resolution:c._resolution,_error:r,_app_version:c._app_version,_run:A()-ze,_not_os_specific:!0,_javascript:!0},d=navigator.battery||navigator.webkitBattery||navigator.mozBattery||navigator.msBattery;d&&(l._bat=Math.floor(100*d.level)),void 0!==navigator.onLine&&(l._online=!!navigator.onLine),E&&(l._background=!document.hasFocus()),ue.length>0&&(l._logs=ue.join("\n")),ue=[],l._nonfatal=i,l._view=this.getViewName(),void 0!==n&&(n=U(n,D.maxKeyLength,D.maxValueSize,D.maxSegmentationValues,"record_error",ft),l._custom=n);try{var h=document.createElement("canvas").getContext("experimental-webgl");l._opengl=h.getParameter(h.VERSION)}catch(e){ft(b.ERROR,"Could not get the experimental-webgl context: "+e)}var f={};f.crash=JSON.stringify(l),f.metrics=JSON.stringify({_ua:c._ua}),st(f)}},this.onStorageChange=function(e,t){switch(ft(b.DEBUG,"onStorageChange, Applying storage changes for key:",e),ft(b.DEBUG,"onStorageChange, Applying storage changes for value:",t),e){case"cly_queue":ce=D.deserialize(t||"[]");break;case"cly_event":le=D.deserialize(t||"[]");break;case"cly_remote_configs":de=D.deserialize(t||"{}");break;case"cly_ignore":D.ignore_visitor=D.deserialize(t);break;case"cly_id":D.device_id=t;break;case"cly_id_type":Ge=D.deserialize(t)}},this._internals={store:St,getDocWidth:X,getDocHeight:Y,getViewportHeight:Q,get_page_coord:K,get_event_target:P,add_event_listener:M,createNewObjectFromProperties:T,truncateObject:U,truncateSingleValue:H,stripTrailingSlash:L,prepareParams:G,sendXmlHttpRequest:_t,isResponseValid:vt,getInternalDeviceIdType:function(){return Ge},getMsTimestamp:z,getTimestamp:A,isResponseValidBroad:yt,secureRandom:B,log:ft,checkIfLoggingIsOn:ie,getMetrics:ut,getUA:dt,prepareRequest:at,generateUUID:O,sendEventsForced:tt,isUUID:function(e){return/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-4[0-9a-fA-F]{3}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/.test(e)},isReferrerUsable:ht,getId:lt,heartBeat:ct,toRequestQueue:st,reportViewDuration:rt,loadJS:Z,loadCSS:ee,getLastView:function(){return me},setToken:kt,getToken:function(){var e=Rt("cly_token");return Et("cly_token"),e},showLoader:te,hideLoader:ne,setValueInStorage:St,getValueFromStorage:Rt,removeValueFromStorage:Et,add_cly_events:Xe,processScrollView:bt,processScroll:wt,currentUserAgentString:V,currentUserAgentDataString:j,userAgentDeviceDetection:q,userAgentSearchBotDetection:J,getRequestQueue:function(){return ce},getEventQueue:function(){return le},sendFetchRequest:mt,makeNetworkRequest:gt,clearQueue:function(){ce=[],St("cly_queue",[]),le=[],St("cly_event",[])},getLocalQueues:function(){return{eventQ:le,requestQ:ce}}};var Nt={sendInstantHCRequest:function(){var e=H(D.hcErrorMessage,1e3,"healthCheck",ft),t={el:D.hcErrorCount,wl:D.hcWarningCount,sc:D.hcStatusCode,em:JSON.stringify(e)},i={hc:JSON.stringify(t),metrics:JSON.stringify({_app_version:D.app_version})};at(i),gt("[healthCheck]",D.url+re,i,(function(e){e||Nt.resetAndSaveCounters()}),!0)},resetAndSaveCounters:function(){Nt.resetCounters(),St(k.errorCount,D.hcErrorCount),St(k.warningCount,D.hcWarningCount),St(k.statusCode,D.hcStatusCode),St(k.errorMessage,D.hcErrorMessage)},incrementErrorCount:function(){D.hcErrorCount++},incrementWarningCount:function(){D.hcWarningCount++},resetCounters:function(){D.hcErrorCount=0,D.hcWarningCount=0,D.hcStatusCode=-1,D.hcErrorMessage=""},saveRequestCounters:function(e,t){D.hcStatusCode=e,D.hcErrorMessage=t,St(k.statusCode,D.hcStatusCode),St(k.errorMessage,D.hcErrorMessage)}};this.initialize()})),oe=!0;N.features=[_,h,l,u,a,m,d,p,v,c,o,g,f,s],N.q=N.q||[],N.onload=N.onload||[],N.CountlyClass=re,N.init=function(e){if(e=e||{},N.loadAPMScriptsAsync&&oe)return oe=!1,void function(e){var t=document.createElement("script"),i=document.createElement("script");t.async=!0,i.async=!0,t.src=N.customSourceBoomerang||"https://cdn.jsdelivr.net/npm/countly-sdk-web@latest/plugin/boomerang/boomerang.min.js",i.src=N.customSourceCountlyBoomerang||"https://cdn.jsdelivr.net/npm/countly-sdk-web@latest/plugin/boomerang/countly_boomerang.js",document.getElementsByTagName("head")[0].appendChild(t),document.getElementsByTagName("head")[0].appendChild(i);var n=!1,r=!1;t.onload=function(){n=!0},i.onload=function(){r=!0};var o=0,a=setInterval((function(){if(o+=50,n&&r||o>=1500){if(N.debug){var t="BoomerangJS loaded:["+n+"], countly_boomerang loaded:["+r+"].";n&&r?(t="[DEBUG] "+t,console.log(t)):(t="[WARNING] "+t+" Initializing without APM.",console.warn(t))}N.init(e),clearInterval(a)}}),50)}(e);var t=e.app_key||N.app_key;if(!N.i||!N.i[t]){var i=new re(e);if(!N.i)for(var n in N.i={},i)N[n]=i[n];N.i[t]=i}return N.i[t]},N.serialize=function(e){return"object"===t(e)&&(e=JSON.stringify(e)),e},N.deserialize=function(e){if(""===e)return e;try{e=JSON.parse(e)}catch(t){ie()&&console.warn("[WARNING] [Countly] deserialize, Could not parse the file:["+e+"], error: "+t)}return e},N.getViewName=function(){return E?window.location.pathname:"web_worker"},N.getViewUrl=function(){return E?window.location.pathname:"web_worker"},N.getSearchQuery=function(){if(E)return window.location.search},N.DeviceIdType={DEVELOPER_SUPPLIED:0,SDK_GENERATED:1,TEMPORARY_ID:2},E&&window.addEventListener("storage",(function(e){var t=(e.key+"").split("/"),i=t.pop(),n=t.pop();N.i&&N.i[n]&&N.i[n].onStorageChange(i,e.newValue)})),e.default=N,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports?t(exports):"function"==typeof define&&i.amdO?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Countly=e.Countly||{})})()})();